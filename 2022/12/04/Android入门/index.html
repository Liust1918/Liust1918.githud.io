<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Android入门 - Liust of Blog</title><link rel="manifest" href="/Liust1918.githud.io/manifest.json"><meta name="application-name" content="Liust of Blog"><meta name="msapplication-TileImage" content="/img/Battlerfiled3.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Liust of Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Android Studio"><meta property="og:type" content="blog"><meta property="og:title" content="Android入门"><meta property="og:url" content="https://liust1918.github.io/Liust1918.githud.io/2022/12/04/Android%E5%85%A5%E9%97%A8/"><meta property="og:site_name" content="Liust of Blog"><meta property="og:description" content="Android Studio"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-09-16_144344.jpg"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20210916145206.jpg"><meta property="og:image" content="https://liust1918.github.io/image/屏幕截图_2021-09-16_174532.jpg"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-09-16_174532.jpg"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/30710065Figure-P96_9671.png"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/30710065Figure-T100_2933.png"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/30710065Figure-T101_52772-16348238627691.png"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/30710065Figure-T104_52779.png"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/tempFileForShare_20211022-170007.jpg"><meta property="og:image" content="c:/Users/13703/Desktop/1434635112_5542.png-thumb.png"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/1434635113_1523.png"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/1434635134_2747.png"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/Screenshot_20211025124841.jpg"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/2012082311450598.jpg"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/30710065Figure-P123_1796.png"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-25_134433.jpg"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_072410.jpg"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_073133.jpg"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_073339.jpg"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_172427-16352402965221.jpg"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_172633.jpg"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_173658-16352410711033.jpg"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_173716-16352410790354.jpg"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20211101192418.jpg"><meta property="og:image" content="https://liust1918.github.io/Liust1918.githud.io/image/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20211101224953.jpg"><meta property="article:published_time" content="2022-12-03T16:11:16.000Z"><meta property="article:modified_time" content="2022-12-03T16:21:35.347Z"><meta property="article:author" content="Liust"><meta property="article:tag" content="java"><meta property="article:tag" content="Android"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-09-16_144344.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://liust1918.github.io/Liust1918.githud.io/2022/12/04/Android%E5%85%A5%E9%97%A8/"},"headline":"Android入门","image":["https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-09-16_144344.jpg","https://liust1918.github.io/Liust1918.githud.io/image/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20210916145206.jpg","https://liust1918.github.io/image/屏幕截图_2021-09-16_174532.jpg","https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-09-16_174532.jpg","https://liust1918.github.io/Liust1918.githud.io/image/30710065Figure-P96_9671.png","https://liust1918.github.io/Liust1918.githud.io/image/30710065Figure-T100_2933.png","https://liust1918.github.io/Liust1918.githud.io/image/30710065Figure-T101_52772-16348238627691.png","https://liust1918.github.io/Liust1918.githud.io/image/30710065Figure-T104_52779.png","https://liust1918.github.io/Liust1918.githud.io/image/tempFileForShare_20211022-170007.jpg","c:/Users/13703/Desktop/1434635112_5542.png-thumb.png","https://liust1918.github.io/Liust1918.githud.io/image/1434635113_1523.png","https://liust1918.github.io/Liust1918.githud.io/image/1434635134_2747.png","https://liust1918.github.io/Liust1918.githud.io/image/Screenshot_20211025124841.jpg","https://liust1918.github.io/Liust1918.githud.io/image/2012082311450598.jpg","https://liust1918.github.io/Liust1918.githud.io/image/30710065Figure-P123_1796.png","https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-25_134433.jpg","https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_072410.jpg","https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_073133.jpg","https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_073339.jpg","https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_172427-16352402965221.jpg","https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_172633.jpg","https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_173658-16352410711033.jpg","https://liust1918.github.io/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_173716-16352410790354.jpg","https://liust1918.github.io/Liust1918.githud.io/image/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20211101192418.jpg","https://liust1918.github.io/Liust1918.githud.io/image/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20211101224953.jpg"],"datePublished":"2022-12-03T16:11:16.000Z","dateModified":"2022-12-03T16:21:35.347Z","author":{"@type":"Person","name":"Liust"},"publisher":{"@type":"Organization","name":"Liust of Blog","logo":{"@type":"ImageObject","url":"https://liust1918.github.io/img/Battlerfiled3.jpg"}},"description":"Android Studio"}</script><link rel="canonical" href="https://liust1918.github.io/Liust1918.githud.io/2022/12/04/Android%E5%85%A5%E9%97%A8/"><link rel="icon" href="/Liust1918.githud.io/img/Battlerfiled3.jpg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/Liust1918.githud.io/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><script data-ad-client="liust" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }
          Array
              .from(document.querySelectorAll('.tab-content'))
              .forEach($tab => {
                  $tab.classList.add('is-hidden');
              });
          Array
              .from(document.querySelectorAll('.tabs li'))
              .forEach($tab => {
                  $tab.classList.remove('is-active');
              });
          const $activeTab = document.querySelector(location.hash);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
          const $tabMenu = document.querySelector(`a[href="${location.hash}"]`);
          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/Liust1918.githud.io/"><img src="/Liust1918.githud.io/img/Battlerfiled3.jpg" alt="Liust of Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/Liust1918.githud.io/">主页(Home)</a><a class="navbar-item" href="/Liust1918.githud.io/archives">文章(Archives)</a><a class="navbar-item" href="/Liust1918.githud.io/categories">类型(Categories)</a><a class="navbar-item" href="/Liust1918.githud.io/tags">标签(Tags)</a><a class="navbar-item" href="/Liust1918.githud.io/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="My GitHub" href="https://github.com/Liust1918"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-12-03T16:11:16.000Z" title="2022/12/4 00:11:16">2022-12-04</time>发表</span><span class="level-item"><time dateTime="2022-12-03T16:21:35.347Z" title="2022/12/4 00:21:35">2022-12-04</time>更新</span><span class="level-item"><a class="link-muted" href="/Liust1918.githud.io/categories/Android/">Android</a></span><span class="level-item">2 小时读完 (大约18761个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">Android入门</h1><div class="content"><p>Android Studio</p>
<span id="more"></span>


<h1 id="1-Android开发环境搭建"><a href="#1-Android开发环境搭建" class="headerlink" title="1.Android开发环境搭建"></a>1.Android开发环境搭建</h1><h2 id="Android发展历程"><a href="#Android发展历程" class="headerlink" title="Android发展历程"></a>Android发展历程</h2><ul>
<li>基于Linux移动端</li>
<li>第一部Android手机是HTC制造</li>
<li>早期使用Eclipse开发APP</li>
<li>Android Studio基于IDEA开发</li>
</ul>
<h2 id="搭建Android-Studio开发环境"><a href="#搭建Android-Studio开发环境" class="headerlink" title="搭建Android Studio开发环境"></a>搭建Android Studio开发环境</h2><ul>
<li>Android Studio:开发环境界面</li>
<li>SDK(Software Development Kit):软件开发工具包,将App源码编译成可执行的App应用</li>
</ul>
<h3 id="下载SDK"><a href="#下载SDK" class="headerlink" title="下载SDK"></a>下载SDK</h3><ul>
<li>Tools-&gt;SDK Manager</li>
<li><img src="/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-09-16_144344.jpg" alt="屏幕截图 2021-09-16 144344"></li>
<li><img src="/Liust1918.githud.io/image/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20210916145206.jpg" alt="微信图片_20210916145206"></li>
</ul>
<h3 id="创建App项目"><a href="#创建App项目" class="headerlink" title="创建App项目"></a>创建App项目</h3><ul>
<li>File-&gt;New-&gt;New Project</li>
<li>选择 Empty Activity</li>
<li>配置<ul>
<li>Name:项目名称</li>
<li>Package name:包名</li>
<li>Save Location:项目保存地址</li>
<li>Language:编程语言<ul>
<li>java</li>
<li>Kotlin</li>
</ul>
</li>
<li>Minimun SDK:最低支持SDK版本</li>
<li>该版本的市场份额占多少</li>
<li>Use legacy android support libraries:启用旧的support支持吗(默认不要，用新的androidX库)</li>
</ul>
</li>
</ul>
<h3 id="导入App项目-x2F-模块"><a href="#导入App项目-x2F-模块" class="headerlink" title="导入App项目&#x2F;模块"></a>导入App项目&#x2F;模块</h3><h5 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h5><ul>
<li>File-&gt;Open(带绿色头)</li>
</ul>
<h5 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h5><ul>
<li>File-new-Import Module</li>
</ul>
<h3 id="编译App项目"><a href="#编译App项目" class="headerlink" title="编译App项目"></a>编译App项目</h3><h5 id="一般自动编译"><a href="#一般自动编译" class="headerlink" title="一般自动编译"></a>一般自动编译</h5><h5 id="手动编译"><a href="#手动编译" class="headerlink" title="手动编译"></a>手动编译</h5><ul>
<li><strong>编译整个项目</strong>:Build-&gt;Make Project</li>
<li><strong>编译指定模块</strong>:Build-&gt;Make Module ***</li>
<li><strong>清除模块</strong>:Build-&gt;Clean Project</li>
<li><strong>重新整个项目编译</strong>:Build-&gt;Rebuild Project</li>
</ul>
<h3 id="运行App"><a href="#运行App" class="headerlink" title="运行App"></a>运行App</h3><h4 id="在模拟器上运行"><a href="#在模拟器上运行" class="headerlink" title="在模拟器上运行"></a>在模拟器上运行</h4><p>省略</p>
<h4 id="在手机上运行"><a href="#在手机上运行" class="headerlink" title="在手机上运行"></a>在手机上运行</h4><ol>
<li>数据线连手机</li>
<li>打开手机的开发者选项目</li>
<li>启动USB调试</li>
<li>将手机设置为文件传输模式</li>
<li>允许计算机进行USB调试</li>
</ol>
<h3 id="修改java版本"><a href="#修改java版本" class="headerlink" title="修改java版本"></a>修改java版本</h3><ul>
<li>File-&gt;Project Structure-&gt;左边Modules-&gt;Source Compatibility</li>
</ul>
<h1 id="2-Android-App开发基础"><a href="#2-Android-App开发基础" class="headerlink" title="2.Android App开发基础"></a>2.Android App开发基础</h1><h2 id="观察App的运行日志"><a href="#观察App的运行日志" class="headerlink" title="观察App的运行日志"></a>观察App的运行日志</h2><h5 id="打印日志"><a href="#打印日志" class="headerlink" title="打印日志"></a>打印日志</h5><ul>
<li><strong>Log.e</strong>:错误信息</li>
<li><strong>Log.w</strong>:警告信息</li>
<li><strong>Log.i</strong>:一般消息</li>
<li><strong>Log.d</strong>:调试信息(打印变量)</li>
<li><strong>Log.v</strong>:冗余信息</li>
</ul>
<h5 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Log.d(<span class="string">&quot;MainActivity114514&quot;</span>,<span class="string">&quot;我看到你了&quot;</span>);</span><br></pre></td></tr></table></figure>



<h5 id="日志显示"><a href="#日志显示" class="headerlink" title="日志显示"></a>日志显示</h5><!-- <img src="/image/屏幕截图_2021-09-16_174532.jpg" alt="屏幕截图 2021-09-16 174532" style="zoom:200%;" /> -->
<ul>
<li><p><img src="/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-09-16_174532.jpg" alt="屏幕截图_2021-09-16_174532.jpg"></p>
</li>
<li><p>点击Logcat</p>
<ul>
<li>选择设备</li>
<li>测试包名</li>
<li>日志级别</li>
<li>日志包含字符串(如MainActivity114514)</li>
<li>选择只显示选中的应用日志(Show only selected application)</li>
</ul>
</li>
</ul>
<h2 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h2><ul>
<li>嵌入式数据库:SQLite</li>
<li>也可以直接服务器接口HTTP的方式</li>
</ul>
<h5 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h5><ol>
<li><strong>SQLite不能被外部访问</strong>,只能和App代码相连</li>
<li>当使用服务器接口HTTP的时候,App代码和后端代码进行交互.</li>
</ol>
<h2 id="项目文件结构"><a href="#项目文件结构" class="headerlink" title="项目文件结构"></a>项目文件结构</h2><h4 id="大的层次"><a href="#大的层次" class="headerlink" title="大的层次"></a>大的层次</h4><ul>
<li>项目Project</li>
<li>模块Module<ul>
<li>一个项目多个模块</li>
<li>一般来说,运行的是模块，不是项目</li>
</ul>
</li>
</ul>
<h4 id="具体文件"><a href="#具体文件" class="headerlink" title="具体文件"></a>具体文件</h4><ul>
<li>app<ul>
<li>manifests<ul>
<li>AndroidManifest.xml——App的运行配置文件</li>
</ul>
</li>
<li>java<ul>
<li>com.example.myapplication——java源码<ul>
<li>MainActivity</li>
</ul>
</li>
<li>com.example.myapplication(androidTest)——java测试代码<ul>
<li>ExampleInstrimentedTest</li>
</ul>
</li>
<li>com.example.myapplication(test)——java测试代码<ul>
<li>ExampleUnitTest</li>
</ul>
</li>
</ul>
</li>
<li>java(generated)<ul>
<li>com.example.myapplication<ul>
<li>BuildConfig</li>
</ul>
</li>
</ul>
</li>
<li>res——当前模块的资源文件<ul>
<li>drawable——图形描述文件与图片文件</li>
<li>layout——存放App页面的布局文件<ul>
<li>activity_main.xml</li>
</ul>
</li>
<li>mipmap——存放App的启动图标</li>
<li>values——常量定义文件<ul>
<li>colors.xml——颜色常量</li>
<li>strings.xml——字符串常量</li>
<li>等</li>
</ul>
</li>
</ul>
</li>
<li>res(generated)</li>
</ul>
</li>
<li>Gradle Scripts——工程的编译配置文件<ul>
<li>build.gradle(Project:***)——项目编译</li>
<li>build.gradle(Module:***)——模块编译</li>
<li>gradle.properties——命令行参数(不用管)</li>
<li>gradle-wrapper.properties——Gradle工具的版本配置</li>
<li>progurard-rules.pro——java代码的混淆规则</li>
<li>gradle.properties——需要编译哪些模块</li>
<li>setting.gradle</li>
<li>local.properties——项目的本地配置文件</li>
</ul>
</li>
</ul>
<h5 id="编译配置文件"><a href="#编译配置文件" class="headerlink" title="编译配置文件"></a>编译配置文件</h5><h6 id="项目-配置阿里云镜像"><a href="#项目-配置阿里云镜像" class="headerlink" title="项目(配置阿里云镜像)"></a>项目(配置阿里云镜像)</h6><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Top-level build file where you can add configuration options common to all sub-projects/modules.</span></span><br><span class="line">buildscript &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        <span class="comment">//镜像</span></span><br><span class="line">        maven &#123; url <span class="string">&#x27;https://maven.aliyun.com/repository/jcenter&#x27;</span> &#125;</span><br><span class="line">        maven &#123; url <span class="string">&#x27;https://maven.aliyun.com/repository/google&#x27;</span> &#125;</span><br><span class="line">        maven &#123; url <span class="string">&#x27;https://maven.aliyun.com/repository/gradle-plugin&#x27;</span> &#125;</span><br><span class="line">        maven &#123; url <span class="string">&#x27;https://maven.aliyun.com/repository/public&#x27;</span> &#125;</span><br><span class="line">        google()</span><br><span class="line">        mavenCentral()</span><br><span class="line">    &#125;</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        <span class="comment">//Gradle插件的版本号</span></span><br><span class="line">        classpath <span class="string">&quot;com.android.tools.build:gradle:7.0.2&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// <span class="doctag">NOTE:</span> Do not place your application dependencies here; they belong</span></span><br><span class="line">        <span class="comment">// in the individual module build.gradle files</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task clean(<span class="attr">type:</span> Delete) &#123;</span><br><span class="line">    delete rootProject.buildDir</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h6><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;com.android.application&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//指定编译用的SDK版本号.比如31表示使用Android 12.0编译</span></span><br><span class="line">    compileSdk <span class="number">31</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//指定编译工具的板块号.这里的头两位数字必须与compileSdkVersion保存一致,具体的版本号可在SDK安装目录的&quot;sdk\build-tools&quot;下找到</span></span><br><span class="line"><span class="comment">//    buildToolsVersion &quot;30.0.2&quot;</span></span><br><span class="line"></span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        <span class="comment">//指定该模块的应用编号,也就是App的包名</span></span><br><span class="line">        applicationId <span class="string">&quot;com.example.myapplication&quot;</span></span><br><span class="line">        <span class="comment">//指定App适合运行的最小SDK版本号.比如19表示至少要在Android4.4上运行</span></span><br><span class="line">        minSdk <span class="number">19</span></span><br><span class="line">        <span class="comment">//指定目标设备的SDK版本号.表示App最希望在哪个版本的Android上运行</span></span><br><span class="line">        targetSdk <span class="number">31</span></span><br><span class="line">        <span class="comment">//指定App的应用版本号</span></span><br><span class="line">        versionCode <span class="number">1</span></span><br><span class="line">        <span class="comment">//指定App的应用版本名称</span></span><br><span class="line">        versionName <span class="string">&quot;1.0&quot;</span></span><br><span class="line"></span><br><span class="line">        testInstrumentationRunner <span class="string">&quot;androidx.test.runner.AndroidJUnitRunner&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            minifyEnabled <span class="literal">false</span></span><br><span class="line">            proguardFiles getDefaultProguardFile(<span class="string">&#x27;proguard-android-optimize.txt&#x27;</span>), <span class="string">&#x27;proguard-rules.pro&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    compileOptions &#123;</span><br><span class="line">        sourceCompatibility JavaVersion.VERSION_1_8</span><br><span class="line">        targetCompatibility JavaVersion.VERSION_1_8</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//各种依赖</span></span><br><span class="line">dependencies &#123;</span><br><span class="line"></span><br><span class="line">    implementation <span class="string">&#x27;androidx.appcompat:appcompat:1.2.0&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;com.google.android.material:material:1.3.0&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;androidx.constraintlayout:constraintlayout:2.0.4&#x27;</span></span><br><span class="line">    testImplementation <span class="string">&#x27;junit:junit:4.13.2&#x27;</span></span><br><span class="line">    androidTestImplementation <span class="string">&#x27;androidx.test.ext:junit:1.1.2&#x27;</span></span><br><span class="line">    androidTestImplementation <span class="string">&#x27;androidx.test.espresso:espresso-core:3.3.0&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="AndroidManifest-xml——运行配置文件"><a href="#AndroidManifest-xml——运行配置文件" class="headerlink" title="AndroidManifest.xml——运行配置文件"></a>AndroidManifest.xml——运行配置文件</h5><ul>
<li><p>manifest标签</p>
</li>
<li><p>package:包名</p>
<ul>
<li><p>application标签</p>
</li>
<li><p>allowBackup——是否允许备份</p>
</li>
<li><p>icon——手机屏幕上显示图标</p>
</li>
<li><p>roundIcon——圆角图标</p>
</li>
<li><p>supportsRtl——支付支持从右往左的文字排序顺序(例如阿拉伯文,波斯语..)</p>
</li>
<li><p>theme——指定App的显示风格</p>
<ul>
<li>&#96;&#96;&#96;xml<!-- 活动页面的注册声明 只要当在这里配置了正确的activity节点,才能在运行时访问对应的活动页面 -->
<activity
android:name=".MainActivity"
android:exported="true"><br><intent-filter><br>    <!--
    android.intent.action.MAIN 入口页面,启动app最先打开
    默认
    --><br>    <action android:name="android.intent.action.MAIN" /><br><br>    <!--
     category中的android.intent.category.LAUNCHER 是否在手机屏幕上显示App图标
     如果有两个LAUNCHER就会有两个图标
     默认
    --><br>    <category android:name="android.intent.category.LAUNCHER" /><br></intent-filter></activity>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 界面设计和代码逻辑</span><br><span class="line"></span><br><span class="line">### App前后端分离设计</span><br><span class="line"></span><br><span class="line">- **XML文件负责描述App界面(**例如:activity_main.xml)</span><br><span class="line">- **界面布局可复用**</span><br><span class="line">- **java代码适配多个界面布局**</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## XML文件负责应用界面设计</span><br><span class="line"></span><br><span class="line">### xml结构</span><br><span class="line"></span><br><span class="line">- **根节点**</span><br><span class="line">  - **布局节点**</span><br><span class="line">    - **控件节点**</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 特点</span><br><span class="line"></span><br><span class="line">- **一个界面一个根节点,多个布局节点(也可没有布局节点)**</span><br><span class="line"></span><br><span class="line">- **根节点必备(布局节点不能用):**</span><br><span class="line"></span><br><span class="line">  ```xml</span><br><span class="line">  xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>指定XML内部的命名空间</p>
</li>
<li><p>检查各个节点命名是否合法</p>
</li>
</ul>
</li>
</ul>
<h3 id="简单TextView控件"><a href="#简单TextView控件" class="headerlink" title="简单TextView控件"></a>简单TextView控件</h3><ul>
<li><strong>android:id</strong>：控件id</li>
<li><strong>android:layout_width</strong>:控件布局宽度<ul>
<li>wrap_content:刚好包住控件内容</li>
<li>match_parent:由父节点决定大小</li>
</ul>
</li>
<li><strong>android:layout_height</strong>:控件布局高度<ul>
<li>wrap_content:刚好包住控件内容</li>
<li>match_parent:由父节点决定大小</li>
</ul>
</li>
<li><strong>android:text</strong>:控件的文本</li>
</ul>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!--LinearLayout布局的根节点--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--LinearLayout布局的布局节点--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--控件TextView--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_hello&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;Hello 我的程序&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="java写代码逻辑"><a href="#java写代码逻辑" class="headerlink" title="java写代码逻辑"></a>java写代码逻辑</h2><h3 id="把java文件和xml绑定"><a href="#把java文件和xml绑定" class="headerlink" title="把java文件和xml绑定"></a>把java文件和xml绑定</h3><h5 id="创建java类"><a href="#创建java类" class="headerlink" title="创建java类"></a>创建java类</h5><ol>
<li><p><strong>继承AppCompatActivity</strong></p>
</li>
<li><p><strong>重写onCreate方法</strong></p>
</li>
<li><p>&#96;&#96;&#96;<br>setContentView(R.layout.XML布局文件);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```java</span><br><span class="line">public class MainActivity extends AppCompatActivity &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        //引用xml布局文件 (res/layout/activity_main.xml)</span><br><span class="line">        //也就是这个java文件对应这个xml布局</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="修改XML内容"><a href="#修改XML内容" class="headerlink" title="修改XML内容"></a>修改XML内容</h5><ol>
<li>&#96;&#96;&#96;java<br>TextView viewById &#x3D; findViewById(R.id.XML文件中控件节点id);<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2. ```java</span><br><span class="line">   viewById.setText(&quot;内容&quot;);</span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        <span class="comment">//引用xml布局文件 (res/layout/activity_main.xml)</span></span><br><span class="line">        <span class="comment">//也就是这个java文件对应这个xml布局</span></span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        <span class="comment">//从上面布局文件中取出android:id=&quot;@+id/tv_hello&quot; 的TextView控件</span></span><br><span class="line">        <span class="type">TextView</span> <span class="variable">viewById</span> <span class="operator">=</span> findViewById(R.id.tv_hello);</span><br><span class="line">        <span class="comment">//再设置其新的文字内容</span></span><br><span class="line">        viewById.setText(<span class="string">&quot;你好，傻逼,卧槽我不好说&quot;</span>);</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="APP的活动页面"><a href="#APP的活动页面" class="headerlink" title="APP的活动页面"></a>APP的活动页面</h2><h3 id="手动创建App页面"><a href="#手动创建App页面" class="headerlink" title="手动创建App页面"></a>手动创建App页面</h3><h4 id="创建XML文件"><a href="#创建XML文件" class="headerlink" title="创建XML文件"></a>创建XML文件</h4><ul>
<li>res&#x2F;layout—&gt;New—&gt;XML—&gt;Layout XML File</li>
</ul>
<h4 id="创建java代码"><a href="#创建java代码" class="headerlink" title="创建java代码"></a>创建java代码</h4><ul>
<li><p>创建java文件,继承AppCompatActivity</p>
</li>
<li><p>重写OnCreate</p>
</li>
<li><p>&#96;&#96;&#96;java<br>setContentView(R.layout.XML页面);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 注册页面配置</span><br><span class="line"></span><br><span class="line">- 前往AndroidManifest.xml文件</span><br><span class="line"></span><br><span class="line">- 在application标签下添加</span><br><span class="line"></span><br><span class="line">- ```xml</span><br><span class="line">  &lt;activity android:name=&quot;.对应java文件&quot; /&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="快速生成页面源码"><a href="#快速生成页面源码" class="headerlink" title="快速生成页面源码"></a>快速生成页面源码</h3><ul>
<li>java源码文件—&gt;New—&gt;Activity—&gt;Empyt Activity</li>
<li>配置页面<ul>
<li>Activity Name:页面的java类名</li>
<li>Layout Name：XML文件名</li>
</ul>
</li>
</ul>
<h3 id="跳到另一个页面"><a href="#跳到另一个页面" class="headerlink" title="跳到另一个页面"></a>跳到另一个页面</h3><ul>
<li><p>在java文件</p>
</li>
<li><p>&#96;&#96;&#96;java<br>&#x2F;&#x2F;       活动页面跳转(A跳到B)<br>    startActivity(new Intent(A.this,B.class));</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  //    活动页面跳转（本类-&gt;目标类）</span><br><span class="line">      startActivity(new Intent(this,目标类.class));</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="3-简单控件"><a href="#3-简单控件" class="headerlink" title="3.简单控件"></a>3.简单控件</h1><h2 id="3-1文本显示-TextView"><a href="#3-1文本显示-TextView" class="headerlink" title="3.1文本显示(TextView)"></a>3.1文本显示(TextView)</h2><h3 id="3-1-1文本内容"><a href="#3-1-1文本内容" class="headerlink" title="3.1.1文本内容"></a>3.1.1文本内容</h3><h4 id="修改XML"><a href="#修改XML" class="headerlink" title="修改XML"></a>修改XML</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:text=&quot;内容&quot;</span><br></pre></td></tr></table></figure>

<h4 id="java代码控制"><a href="#java代码控制" class="headerlink" title="java代码控制"></a>java代码控制</h4><ol>
<li><p>xml中TextView控件id</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:id=&quot;@+id/id设置&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>获得控件对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">TextView</span> <span class="variable">id</span> <span class="operator">=</span> findViewById(R.id.控件id);</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置文本内容</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id.setText(<span class="string">&quot;文本显示内容&quot;</span>);</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="引用全局String"><a href="#引用全局String" class="headerlink" title="引用全局String"></a>引用全局String</h4><ol>
<li><p>找到res-&gt;values-&gt;strings.xml</p>
</li>
<li><p>设置全局字符串</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span> <span class="attr">name</span>=<span class="string">&quot;标签&quot;</span>&gt;</span>全局内容<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在XML设置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:text=&quot;@string/标签&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>或者在java代码中引用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">R.string.标签</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-1-2文本大小"><a href="#3-1-2文本大小" class="headerlink" title="3.1.2文本大小"></a>3.1.2文本大小</h3><h5 id="三字体"><a href="#三字体" class="headerlink" title="三字体"></a>三字体</h5><ul>
<li>px<ul>
<li>手机屏幕的最小显示单位</li>
<li><strong>显示屏</strong>有关</li>
</ul>
</li>
<li>dp（dip）<ul>
<li>与设备无关的显示单位</li>
<li><strong>屏幕尺寸</strong>有关</li>
</ul>
</li>
<li>sp<ul>
<li><strong>专门设置字体大小</strong></li>
<li>可以通过手机系统设置调整字体大小(小,标准,大,超大)<ul>
<li>设置标准,则sp&#x3D;dp</li>
<li>设置小&#x2F;大,sp会小大.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="修改XML-1"><a href="#修改XML-1" class="headerlink" title="修改XML"></a>修改XML</h4><ol>
<li><p>直接修改文本显示控件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:textSize=&quot;30px&quot;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="java代码实现"><a href="#java代码实现" class="headerlink" title="java代码实现"></a>java代码实现</h4><ol>
<li><p>XML设置控件Id</p>
</li>
<li><p>找到文本显示控件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">TextView</span> <span class="variable">viewById3</span> <span class="operator">=</span> findViewById(R.id.控件id);</span><br></pre></td></tr></table></figure>
</li>
<li><p>调用控件的setTextSize()方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">viewById.setTextSize(<span class="number">30</span>);</span><br><span class="line"><span class="comment">//默认使用sp，也就是现在是30sp</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-1-3文本颜色"><a href="#3-1-3文本颜色" class="headerlink" title="3.1.3文本颜色"></a>3.1.3文本颜色</h3><h4 id="Android颜色编码"><a href="#Android颜色编码" class="headerlink" title="Android颜色编码"></a>Android颜色编码</h4><ul>
<li>**透明度alpha和RGB三原色(红色red,绿色green,蓝色blue)**定义</li>
<li><strong>0x代表十六进制数</strong></li>
</ul>
<h4 id="八位十六进制数"><a href="#八位十六进制数" class="headerlink" title="八位十六进制数"></a>八位十六进制数</h4><h5 id="FFEEDDCC"><a href="#FFEEDDCC" class="headerlink" title="FFEEDDCC"></a>FFEEDDCC</h5><ul>
<li><p>FF：透明度</p>
<ul>
<li>FF：完全不透明</li>
<li>00：完全透明</li>
</ul>
</li>
<li><p>EE：红色浓度</p>
</li>
<li><p>DD：绿色浓度</p>
</li>
<li><p>CC：蓝色浓度</p>
</li>
</ul>
<h5 id="RGB三原色数值"><a href="#RGB三原色数值" class="headerlink" title="RGB三原色数值"></a>RGB三原色数值</h5><ul>
<li>越大颜色越深越暗</li>
<li>越小颜色越浅越深</li>
<li>三个00：白色</li>
<li>三个FF：黑色</li>
</ul>
<h4 id="六位十六进程数"><a href="#六位十六进程数" class="headerlink" title="六位十六进程数"></a>六位十六进程数</h4><h5 id="EEDDCC"><a href="#EEDDCC" class="headerlink" title="EEDDCC"></a>EEDDCC</h5><ul>
<li>透明度<ul>
<li><strong>在XML文件&#x3D;&#x3D;透明度FF</strong></li>
<li><strong>在代码&#x3D;&#x3D;透明度00</strong></li>
</ul>
</li>
<li>EE：红色浓度</li>
<li>DD：绿色浓度</li>
<li>CC：蓝色浓度</li>
</ul>
<h4 id="修改xml（记得前缀加-）"><a href="#修改xml（记得前缀加-）" class="headerlink" title="修改xml（记得前缀加#）"></a>修改xml（记得前缀加#）</h4><ol>
<li><p>在控件中</p>
<ul>
<li><p>EEDDCC</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:textColor=&quot;#00ff00&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>FFEEDDCC</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:textColor=&quot;#ff00ff00&quot;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h4 id="java代码实现-颜色前面都要0x"><a href="#java代码实现-颜色前面都要0x" class="headerlink" title="java代码实现(颜色前面都要0x)"></a>java代码实现(颜色前面都要0x)</h4><ol>
<li><p>获得控件对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">TextView</span> <span class="variable">viewById1</span> <span class="operator">=</span> findViewById(R.id.myTextView_code_six);</span><br></pre></td></tr></table></figure>
</li>
<li><p>调用setTextColor()</p>
<ul>
<li>&#96;&#96;&#96;java<br>viewById1.setTextColor(0x00ff00);<br>&#x2F;&#x2F;在java代码默认透明度:00<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  viewById2.setTextColor(0xff00ff00);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h4 id="设置全局color变量（记得前缀加-）"><a href="#设置全局color变量（记得前缀加-）" class="headerlink" title="设置全局color变量（记得前缀加#）"></a>设置全局color变量（记得前缀加#）</h4><ol>
<li><p>找到color全局文件:res-&gt;values-&gt;colors.xml</p>
</li>
<li><p>设置全局颜色</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">&quot;标签&quot;</span>&gt;</span>#FFBB86FC<span class="tag">&lt;/<span class="name">color</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>修改XML</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:textColor=&quot;@color/标签&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>或者java代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">控件.setTextColor(R.color.标签);</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-1-4背景颜色-x2F-背景图片设置"><a href="#3-1-4背景颜色-x2F-背景图片设置" class="headerlink" title="3.1.4背景颜色&#x2F;背景图片设置"></a>3.1.4背景颜色&#x2F;背景图片设置</h3><h4 id="设置背景颜色"><a href="#设置背景颜色" class="headerlink" title="设置背景颜色"></a>设置背景颜色</h4><ol>
<li><p>设置背景颜色</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:background=&quot;@color/标签&quot;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="设置背景图片"><a href="#设置背景图片" class="headerlink" title="设置背景图片"></a>设置背景图片</h4><ol>
<li><p>存放图片到res-&gt;drawable-&gt;图片</p>
</li>
<li><p>XML引用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:background=&quot;@drawable/不包含拓展名的图片名称&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>java代码引用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">控件对象.setBackgroundResource(R.drawable.不包含拓展名的图片名称)</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="3-2视图基础"><a href="#3-2视图基础" class="headerlink" title="3.2视图基础"></a>3.2视图基础</h2><h3 id="3-2-1设置视图的宽高"><a href="#3-2-1设置视图的宽高" class="headerlink" title="3.2.1设置视图的宽高"></a>3.2.1设置视图的宽高</h3><h4 id="三大取值"><a href="#三大取值" class="headerlink" title="三大取值"></a>三大取值</h4><ol>
<li><strong>match_parent</strong>:由上级视图决定.上级多大当前多大.</li>
<li><strong>wrap_content</strong>:刚好包住控件内容，不超过上级视图宽&#x2F;高,超过会隐藏</li>
<li>dp单位:固定</li>
</ol>
<h4 id="设置XML"><a href="#设置XML" class="headerlink" title="设置XML"></a>设置XML</h4><ul>
<li><strong>android:layout_width</strong>:控件布局宽度</li>
<li><strong>android:layout_height</strong>:控件布局高度</li>
</ul>
<h4 id="java代码修改"><a href="#java代码修改" class="headerlink" title="java代码修改"></a>java代码修改</h4><ol>
<li>获得控件对象</li>
<li>对象getLayoutParams方法获得参数类型ViewGroup.LayoutParams的对象</li>
<li>调用属性值，修改控件的宽高</li>
<li>调用控件对象的setLayoutParams，填入布局参数.</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity_Simple_Unit</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    </span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        ...</span><br><span class="line"><span class="type">TextView</span> <span class="variable">viewById3</span> <span class="operator">=</span> findViewById(R.id.tv_code);</span><br><span class="line">        ViewGroup.<span class="type">LayoutParams</span> <span class="variable">layout</span> <span class="operator">=</span> viewById3.getLayoutParams();</span><br><span class="line">        layout.width=dip2px(<span class="built_in">this</span>,<span class="number">300</span>);</span><br><span class="line">        viewById3.setLayoutParams(layout);</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//根据手机的分辨率从dp的单位转为px</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">dip2px</span><span class="params">(Context context, <span class="type">float</span> dpValue)</span> &#123;</span><br><span class="line">        <span class="comment">//获取当前的手机的像素（1个dp对应几个px）</span></span><br><span class="line">        <span class="type">float</span> <span class="variable">density</span> <span class="operator">=</span> context.getResources().getDisplayMetrics().density;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>)(dpValue* density +<span class="number">0.5f</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line">        </span><br></pre></td></tr></table></figure>





<h3 id="3-2-2设置视图的间距"><a href="#3-2-2设置视图的间距" class="headerlink" title="3.2.2设置视图的间距"></a>3.2.2设置视图的间距</h3><h4 id="适用范围"><a href="#适用范围" class="headerlink" title="适用范围"></a>适用范围</h4><ul>
<li>视图</li>
<li>控件</li>
<li>布局</li>
</ul>
<h4 id="View-ViewGroup-控件-布局的继承关系"><a href="#View-ViewGroup-控件-布局的继承关系" class="headerlink" title="View,ViewGroup,控件,布局的继承关系"></a>View,ViewGroup,控件,布局的继承关系</h4><ul>
<li>View<ul>
<li>控件</li>
<li>ViewGroup<ul>
<li>布局</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>间距设置是View中的属性,所以可以视图，控件，布局通用.</p>
<h4 id="当前视图和外部视图的间距margin"><a href="#当前视图和外部视图的间距margin" class="headerlink" title="当前视图和外部视图的间距margin"></a>当前视图和外部视图的间距margin</h4><table>
<thead>
<tr>
<th>android:layout_margin</th>
<th>四个方向</th>
</tr>
</thead>
<tbody><tr>
<td>android:layout_marginTop</td>
<td>顶</td>
</tr>
<tr>
<td>android:layout_marginBottom</td>
<td>底</td>
</tr>
<tr>
<td>android:layout_marginLeft</td>
<td>左</td>
</tr>
<tr>
<td>android:layout_marginRight</td>
<td>右</td>
</tr>
<tr>
<td>android:layout_marginHorizontal</td>
<td>左右</td>
</tr>
<tr>
<td>android:layout_marginVertical</td>
<td>上下</td>
</tr>
</tbody></table>
<h4 id="当前视图和内部视图的间距padding"><a href="#当前视图和内部视图的间距padding" class="headerlink" title="当前视图和内部视图的间距padding"></a>当前视图和内部视图的间距padding</h4><table>
<thead>
<tr>
<th>android:layout_padding</th>
<th>四个方向</th>
</tr>
</thead>
<tbody><tr>
<td>android:layout_paddingTop</td>
<td>顶</td>
</tr>
<tr>
<td>android:layout_paddingBottom</td>
<td>底</td>
</tr>
<tr>
<td>android:layout_paddingLeft</td>
<td>左</td>
</tr>
<tr>
<td>android:layout_paddingRight</td>
<td>右</td>
</tr>
<tr>
<td>android:layout_paddingHorizontal</td>
<td>左右</td>
</tr>
<tr>
<td>android:layout_paddingVertical</td>
<td>上下</td>
</tr>
</tbody></table>
<h3 id="3-2-3设置视图的对齐方式"><a href="#3-2-3设置视图的对齐方式" class="headerlink" title="3.2.3设置视图的对齐方式"></a>3.2.3设置视图的对齐方式</h3><h4 id="当前视图往上级视图对齐"><a href="#当前视图往上级视图对齐" class="headerlink" title="当前视图往上级视图对齐"></a>当前视图往上级视图对齐</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:layout_gravity=&quot;对齐方向&quot;</span><br></pre></td></tr></table></figure>

<ul>
<li>top</li>
<li>bottom</li>
<li>left</li>
<li>right</li>
<li>叠加方法:某一方向|某一方向<ul>
<li>例如:左下:left|bottom</li>
</ul>
</li>
</ul>
<h4 id="视图内部对齐"><a href="#视图内部对齐" class="headerlink" title="视图内部对齐"></a>视图内部对齐</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:gravity=&quot;对齐方向&quot;</span><br></pre></td></tr></table></figure>

<ul>
<li>top</li>
<li>bottom</li>
<li>left</li>
<li>right</li>
<li>叠加方法:某一方向|某一方向<ul>
<li>例如:左下:left|bottom</li>
</ul>
</li>
</ul>
<h2 id="3-3布局"><a href="#3-3布局" class="headerlink" title="3.3布局"></a>3.3布局</h2><h3 id="3-3-1线性布局LinearLayout"><a href="#3-3-1线性布局LinearLayout" class="headerlink" title="3.3.1线性布局LinearLayout"></a>3.3.1线性布局LinearLayout</h3><p>上下&#x2F;左右排控件</p>
<h4 id="控制方向orientation"><a href="#控制方向orientation" class="headerlink" title="控制方向orientation"></a>控制方向orientation</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;方向&quot;</span>&gt;</span></span><br><span class="line">              <span class="comment">&lt;!--控件--&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>垂直排</strong>：vertical</li>
<li><strong>水平排</strong>：horizontal（默认）</li>
</ul>
<h4 id="通过权重分割控件layout-weight"><a href="#通过权重分割控件layout-weight" class="headerlink" title="通过权重分割控件layout_weight"></a>通过权重分割控件layout_weight</h4><p>在LinearLayout下,不同控件设置layout_weight.</p>
<p>比如两个控件都设置1，那么这<strong>两个控件会按垂直&#x2F;水平方向分成1：1</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:layout_weight=&quot;权重值&quot;</span><br></pre></td></tr></table></figure>

<h5 id="限制"><a href="#限制" class="headerlink" title="限制:"></a>限制:</h5><p>如果按<strong>水平</strong>分，就把本控件<strong>android:layout_width</strong>设置成<strong>0dp</strong>.</p>
<p>同理,按<strong>垂直</strong>分，就把本控件<strong>android:layout_height</strong>设置成<strong>0dp</strong>.</p>
<h3 id="3-3-2相对布局RelativeLayout"><a href="#3-3-2相对布局RelativeLayout" class="headerlink" title="3.3.2相对布局RelativeLayout"></a>3.3.2相对布局RelativeLayout</h3><p>子视图由其他视图决定.</p>
<p>(<strong>如果不设置子视图,则默认显示在左上角)</strong></p>
<table>
<thead>
<tr>
<th>相对位置的属性取值</th>
<th>相对位置说明</th>
</tr>
</thead>
<tbody><tr>
<td>layout _ toLeftOf</td>
<td>当前视图在指定视图的左边</td>
</tr>
<tr>
<td>layout _ toRightOf</td>
<td>当前视图在指定视图的右边</td>
</tr>
<tr>
<td>layout _ above</td>
<td>当前视图在指定视图的上方</td>
</tr>
<tr>
<td>layout _ below</td>
<td>当前视图在指定视图的下方</td>
</tr>
<tr>
<td>layout _ alignLeft</td>
<td>当前视图与指定视图的左侧对齐</td>
</tr>
<tr>
<td>layout _ alignRight</td>
<td>当前视图与指定视图的右侧对齐</td>
</tr>
<tr>
<td>layout _ alignTop</td>
<td>当前视图与指定视图的顶部对齐</td>
</tr>
<tr>
<td>layout _ alignBotom</td>
<td>当前视图与指定视图的底部对齐</td>
</tr>
<tr>
<td>layout _ centerInParent</td>
<td>当前视图在上级视图中间</td>
</tr>
<tr>
<td>layout _ centerHorizontal</td>
<td>当前视图在上级视图的水平方向居中</td>
</tr>
<tr>
<td>layout _ centerVertical</td>
<td>当前视图在上级视图的垂直方向居中</td>
</tr>
<tr>
<td>layout _ alignParentLeft</td>
<td>当前视图与上级视图的左侧对齐</td>
</tr>
<tr>
<td>layout _ alignParentRight</td>
<td>当前视图与上级视图的右侧对齐</td>
</tr>
<tr>
<td>layout _ alignParentTop</td>
<td>当前视图与上级视图的顶部对齐</td>
</tr>
<tr>
<td>layout _ alignParentBotom</td>
<td>当前视图与上级视图的底部对齐</td>
</tr>
</tbody></table>
<h5 id="与上级视图"><a href="#与上级视图" class="headerlink" title="与上级视图"></a>与上级视图</h5><p>直接指定本视图的父视图对齐</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">          <span class="attr">...</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_alignParentBottom</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">...</span></span></span><br><span class="line"><span class="tag"> /&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="指定视图"><a href="#指定视图" class="headerlink" title="指定视图"></a>指定视图</h5><p><strong>指定其他视图id</strong>，和它对齐.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag"> <span class="attr">...</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_toLeftOf</span>=<span class="string">&quot;@+id/其他视图标签&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">...</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="3-3-3网格布局GridLayout"><a href="#3-3-3网格布局GridLayout" class="headerlink" title="3.3.3网格布局GridLayout"></a>3.3.3网格布局GridLayout</h3><p>多行多列布局</p>
<h4 id="方向"><a href="#方向" class="headerlink" title="方向"></a>方向</h4><ul>
<li>从左到右，</li>
<li>从上到下,</li>
<li>塞满第一排后，塞第二排</li>
</ul>
<h4 id="设置行和列数"><a href="#设置行和列数" class="headerlink" title="设置行和列数"></a>设置行和列数</h4><ul>
<li><strong>android:columnCount</strong>&#x3D;”列数”</li>
<li><strong>android:rowCount</strong>&#x3D;”行数”</li>
</ul>
<h3 id="3-3-4滚动视图ScrollView"><a href="#3-3-4滚动视图ScrollView" class="headerlink" title="3.3.4滚动视图ScrollView"></a>3.3.4滚动视图ScrollView</h3><p>左右&#x2F;上下滑出内容</p>
<h4 id="垂直-x2F-水平滚动视图"><a href="#垂直-x2F-水平滚动视图" class="headerlink" title="垂直&#x2F;水平滚动视图"></a>垂直&#x2F;水平滚动视图</h4><ul>
<li><strong>ScrollView</strong>：垂直</li>
<li><strong>HorizontalScrollView</strong>:水平</li>
</ul>
<h5 id="规则"><a href="#规则" class="headerlink" title="规则"></a>规则</h5><p>设置那个方向，另一个方向的就设置wrap_content</p>
<p>(例如:滑动垂直,android:layout_width:wrap_content</p>
<p>android:layout_height:match_parent)</p>
<h5 id="滚动视图节点下面只能有一个子布局节点"><a href="#滚动视图节点下面只能有一个子布局节点" class="headerlink" title="滚动视图节点下面只能有一个子布局节点"></a>滚动视图节点下面只能有一个子布局节点</h5><h4 id="内容少不够满屏"><a href="#内容少不够满屏" class="headerlink" title="内容少不够满屏"></a>内容少不够满屏</h4><p>滚动视图没有满屏幕，但是又想它满.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">android:layout_height=&quot;match_parent&quot;</span><br><span class="line">android:fillViewport=&quot;true&quot;</span><br></pre></td></tr></table></figure>





<h3 id="3-4按钮控件"><a href="#3-4按钮控件" class="headerlink" title="3.4按钮控件"></a>3.4按钮控件</h3><h5 id="3-4-1按钮控件Button"><a href="#3-4-1按钮控件Button" class="headerlink" title="3.4.1按钮控件Button"></a>3.4.1按钮控件Button</h5><p>Button继承与View类,所以所有控件和布局都可以适用</p>
<h5 id="设置大写-x2F-不大写textAllCaps"><a href="#设置大写-x2F-不大写textAllCaps" class="headerlink" title="设置大写&#x2F;不大写textAllCaps"></a>设置大写&#x2F;不大写textAllCaps</h5><p>默认按钮中间内容<strong>全大写，并且居中</strong></p>
<ul>
<li>true:大写</li>
<li>false:<strong>不转为大写</strong></li>
</ul>
<h5 id="激活方法onClick"><a href="#激活方法onClick" class="headerlink" title="激活方法onClick"></a>激活方法onClick</h5><p>当用户点击按钮,就激活方法</p>
<ul>
<li>android:onClick:”java代码的方法名”</li>
</ul>
<h5 id="可用状态setEnabled"><a href="#可用状态setEnabled" class="headerlink" title="可用状态setEnabled"></a>可用状态setEnabled</h5><ul>
<li>不可用按钮<ul>
<li>不允许点击</li>
<li>文字灰色</li>
</ul>
</li>
<li>可用按钮<ul>
<li>允许点击</li>
<li>文字正常黑色</li>
</ul>
</li>
<li>修改xml<ul>
<li>android:setEnabled<ul>
<li>true:启用</li>
<li>false:弃用</li>
</ul>
</li>
</ul>
</li>
<li>java代码<ul>
<li>控件.setEnable(true&#x2F;false);</li>
</ul>
</li>
</ul>
<h4 id="3-4-2建立点击-x2F-长按监听器"><a href="#3-4-2建立点击-x2F-长按监听器" class="headerlink" title="3.4.2建立点击&#x2F;长按监听器"></a>3.4.2建立点击&#x2F;长按监听器</h4><p>一般开发不适用上面的直接指明方法</p>
<h5 id="按钮对象注册统一点击监听器"><a href="#按钮对象注册统一点击监听器" class="headerlink" title="按钮对象注册统一点击监听器"></a>按钮对象注册统一点击监听器</h5><ul>
<li>在java代码中</li>
<li>本类继承接口View.OnclickListener</li>
<li>重写onClick方法</li>
<li>在主方法中,按钮控件对象.setOnClickListener(监听器类(继承接口OnClickListener的类)这里填this)</li>
<li>在onClick方法中,调用View.getid获得控件id.</li>
<li>与需要的控件id进行对比（R.id.控件id）</li>
<li>执行</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//继承接口View.OnclickListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity_Button</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span>  <span class="keyword">implements</span>  <span class="title class_">View</span>.OnClickListener&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TextView btn_test;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重写onClick方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main_button);</span><br><span class="line"></span><br><span class="line">       </span><br><span class="line">        <span class="type">TextView</span> <span class="variable">id</span> <span class="operator">=</span> findViewById(R.id.btn_test);</span><br><span class="line">        <span class="built_in">this</span>.btn_test=id;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//按钮控件对象.setOnClickListener(监听器类(继承接口OnClickListener的类))</span></span><br><span class="line">        btn_test.setOnClickListener(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">         <span class="comment">//调用View.getid获得控件id.只要一点击就可以获得</span></span><br><span class="line">        <span class="comment">//与需要的控件id进行对比（R.id.控件id）</span></span><br><span class="line">        <span class="keyword">if</span>(view.getId()==R.id.btn_enable)&#123;</span><br><span class="line">            btn_test.setTextColor(Color.BLACK);</span><br><span class="line">            btn_test.setEnabled(<span class="literal">true</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(view.getId()==R.id.btn_test)&#123;</span><br><span class="line">            <span class="type">TextView</span> <span class="variable">viewById</span> <span class="operator">=</span> findViewById(R.id.btn_result);</span><br><span class="line">            <span class="type">String</span> <span class="variable">format</span> <span class="operator">=</span> String.format(<span class="string">&quot;%s 你点击了按钮: %s&quot;</span>,<span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>).format(<span class="keyword">new</span> <span class="title class_">Date</span>()),((Button)view).getText());</span><br><span class="line">            viewById.setText(format);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="长按钮监听"><a href="#长按钮监听" class="headerlink" title="长按钮监听"></a>长按钮监听</h5><p>当控件被按住**500毫秒(ms)**才会触发事件</p>
<p>基本流程和上面差不多,但是有几点不同</p>
<ul>
<li>类要继承接口<strong>View.OnLongClickListener</strong></li>
<li>重写<strong>onLongClick</strong>方法</li>
<li>控件监听设置<strong>setOnLongClickListener</strong></li>
</ul>
<h2 id="3-5图像显示控件"><a href="#3-5图像显示控件" class="headerlink" title="3.5图像显示控件"></a>3.5图像显示控件</h2><h3 id="3-5-1图像视图ImageView"><a href="#3-5-1图像视图ImageView" class="headerlink" title="3.5.1图像视图ImageView"></a>3.5.1图像视图ImageView</h3><h4 id="显示图片"><a href="#显示图片" class="headerlink" title="显示图片"></a>显示图片</h4><p>存放图片到res-&gt;drawable</p>
<h5 id="修改XML-2"><a href="#修改XML-2" class="headerlink" title="修改XML"></a>修改XML</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:src=&quot;@drawable/不带拓展名的图片名称&quot;</span><br></pre></td></tr></table></figure>



<h5 id="java代码实现-1"><a href="#java代码实现-1" class="headerlink" title="java代码实现"></a>java代码实现</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImageView控件对象.setImageResource(R.drawable.不含拓展名的图片名称)</span><br></pre></td></tr></table></figure>



<h4 id="图片缩放scaleType"><a href="#图片缩放scaleType" class="headerlink" title="图片缩放scaleType"></a>图片缩放scaleType</h4><p>ImageView默认图片</p>
<ul>
<li>居中显示</li>
<li>fitCenter放缩</li>
</ul>
<h5 id="图片缩放类型"><a href="#图片缩放类型" class="headerlink" title="图片缩放类型"></a>图片缩放类型</h5><table>
<thead>
<tr>
<th>XML缩放类型</th>
<th>java代码ScaleType类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>fitCenter</td>
<td>FIT _ CENTER</td>
<td>保持宽高比例,缩放图片使其位于视图中间(只缩小)</td>
</tr>
<tr>
<td>centerInside</td>
<td>CENTER _ INSIDE</td>
<td>保持宽高比例,缩小图片使之位于视图中间(只缩小不放大)</td>
</tr>
<tr>
<td>center</td>
<td>CENTER</td>
<td>保持图片原尺寸,并使其位于视图中间(不放大不缩小)</td>
</tr>
<tr>
<td>centerCrop</td>
<td>CENTER _ CROP</td>
<td>缩放图片使其充满视图(超出部分会被裁剪),并位于视图中间</td>
</tr>
<tr>
<td>fitXY</td>
<td>FIT _ XY</td>
<td>缩放图片使其正好填满视图(图片可能被拉伸变形)</td>
</tr>
<tr>
<td>fitStart</td>
<td>FIT _ START</td>
<td>保持宽高比例,缩放图片使其位于视图上方或左侧</td>
</tr>
<tr>
<td>fitEnd</td>
<td>FIT _ END</td>
<td>保持宽高比例,缩放图片使其位于视图下方或右侧</td>
</tr>
</tbody></table>
<h5 id="XML实现"><a href="#XML实现" class="headerlink" title="XML实现"></a>XML实现</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:scaleType=&quot;XML放缩类型&quot;</span><br></pre></td></tr></table></figure>



<h5 id="java代码实现-2"><a href="#java代码实现-2" class="headerlink" title="java代码实现"></a>java代码实现</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImageView控件.setScaleType(ImageView.ScaleType.缩放类型)</span><br></pre></td></tr></table></figure>





<h3 id="3-5-2图像按钮ImageButton"><a href="#3-5-2图像按钮ImageButton" class="headerlink" title="3.5.2图像按钮ImageButton"></a>3.5.2图像按钮ImageButton</h3><h4 id="ImageButton和Button区别"><a href="#ImageButton和Button区别" class="headerlink" title="ImageButton和Button区别"></a>ImageButton和Button区别</h4><p>ImageButton继承ImageView，不是继承Button</p>
<ul>
<li>Button即可显示图片和文字,ImageButton不能</li>
<li>ImageButton图片按比例缩放,Button用fitXY方式无法按比例缩放</li>
<li>Button只能显示一张图片,ImageButton可显示前景和背景</li>
</ul>
<h4 id="ImageButton实现"><a href="#ImageButton实现" class="headerlink" title="ImageButton实现"></a>ImageButton实现</h4><p>例子：</p>
<p><strong>默认center缩放类型</strong></p>
<p>(如果图片太大无法显示，就用fitCenter)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ImageButton</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/image_button&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;200dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:src</span>=<span class="string">&quot;@drawable/apple&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:scaleType</span>=<span class="string">&quot;fitCenter&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="3-5-3Button同时展示文本与图像"><a href="#3-5-3Button同时展示文本与图像" class="headerlink" title="3.5.3Button同时展示文本与图像"></a>3.5.3Button同时展示文本与图像</h3><h4 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h4><p>在图片按钮中不仅有文字还有图片，而且可控制文件在图片的位置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:drawableTop</span>=<span class="string">&quot;@drawable/ic_about&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:drawablePadding</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;图标在上&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="文字在图片的方向以及间距"><a href="#文字在图片的方向以及间距" class="headerlink" title="文字在图片的方向以及间距"></a>文字在图片的方向以及间距</h4><ul>
<li><strong>drawableTop</strong>：文字在图片上方</li>
<li><strong>drawableBottom</strong>：文字在图片下方</li>
<li><strong>drawableLeft</strong>：文字左边的图片</li>
<li><strong>drawableRight</strong>：文字右边的图片</li>
<li><strong>drawablePadding</strong>：图片与文字的间距</li>
</ul>
<h2 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h2><h3 id="提示框Toast-makeTex"><a href="#提示框Toast-makeTex" class="headerlink" title="提示框Toast.makeTex"></a>提示框Toast.makeTex</h3><p>展示短暂的提示文字.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Toast.makeText(当前页面实例(一般<span class="built_in">this</span>),提示内容,停留时间).show();</span><br></pre></td></tr></table></figure>

<h5 id="停留时间"><a href="#停留时间" class="headerlink" title="停留时间"></a>停留时间</h5><ul>
<li><strong>Toast.LENGTH_SHORT</strong>:2秒后消失</li>
<li><strong>Toast.LENGTH_LONG</strong>:3.5秒消失</li>
</ul>
<h1 id="4-四大组件之一活动Activity"><a href="#4-四大组件之一活动Activity" class="headerlink" title="4.四大组件之一活动Activity"></a>4.四大组件之一活动Activity</h1><h2 id="4-1活动页面"><a href="#4-1活动页面" class="headerlink" title="4.1活动页面"></a>4.1活动页面</h2><h3 id="4-1-1活动和页面的概念"><a href="#4-1-1活动和页面的概念" class="headerlink" title="4.1.1活动和页面的概念"></a>4.1.1活动和页面的概念</h3><p>页面是静态的，活动是动态的,用户看到的页面是静态的,用户使用起来像活动.</p>
<p>所以一个页面是一个活动,下面的描述的打开一个页面其实本质上是启动一个活动,关闭页面本质上是关闭一个活动.</p>
<h3 id="4-1-2Activity的启动和停止"><a href="#4-1-2Activity的启动和停止" class="headerlink" title="4.1.2Activity的启动和停止"></a>4.1.2Activity的启动和停止</h3><ul>
<li><strong>startActivity</strong>（Intent对象）:一般用于跳转页面</li>
<li><strong>finish</strong>():一般用于结束本页面</li>
</ul>
<h3 id="4-1-3Activity的生命周期"><a href="#4-1-3Activity的生命周期" class="headerlink" title="4.1.3Activity的生命周期"></a>4.1.3Activity的生命周期</h3><p><img src="/Liust1918.githud.io/image/30710065Figure-P96_9671.png" alt="30710065Figure-P96_9671"></p>
<ol>
<li><strong>onCreate</strong>:创建活动<ul>
<li>页面布局加载到内容.</li>
</ul>
</li>
<li><strong>onStart</strong>:开启活动<ul>
<li>页面显示在屏幕</li>
</ul>
</li>
<li><strong>onResume</strong>:恢复活动<ul>
<li>能正常交互</li>
</ul>
</li>
<li><strong>onPause</strong>:暂停活动<ul>
<li>无法与用户交互</li>
</ul>
</li>
<li><strong>onStop</strong>:停止活动<ul>
<li>不显示页面在屏幕</li>
</ul>
</li>
<li><strong>onDestroy</strong>:销毁活动<ul>
<li>从内存中清除</li>
</ul>
</li>
<li><strong>onRestart</strong>:重启活动<ul>
<li>处于停止状态，重新启动,不走onCreate方法</li>
</ul>
</li>
<li><strong>onNewIntent</strong>:重用已有的活动实例<ul>
<li>重用实例</li>
</ul>
</li>
</ol>
<h3 id="4-1-4Activity的启动模式"><a href="#4-1-4Activity的启动模式" class="headerlink" title="4.1.4Activity的启动模式"></a>4.1.4Activity的启动模式</h3><p>Android给每个活动页面<strong>分配进栈</strong>中,</p>
<p><strong>一个活动页面遵循先进后出的规则.</strong></p>
<p><strong>每次创建活动页面</strong>的时候会选择一种出入栈的行为(启动模式)，默认为栈的先进后出规则.</p>
<h4 id="配置文件设置"><a href="#配置文件设置" class="headerlink" title="配置文件设置"></a>配置文件设置</h4><p>表示本活动以哪个启动模式运行</p>
<ol>
<li><p>修改AndroidManifest.xml文件</p>
</li>
<li><p>指定activity节点添加属性android:launchMode</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;.MainActivity&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:exported</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:launchMode</span>=<span class="string">&quot;standard&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="lauchMode属性说明"><a href="#lauchMode属性说明" class="headerlink" title="lauchMode属性说明"></a>lauchMode属性说明</h5><p><img src="/Liust1918.githud.io/image/30710065Figure-T100_2933.png" alt="30710065Figure-T100_2933"></p>
<h4 id="代码设置"><a href="#代码设置" class="headerlink" title="代码设置"></a>代码设置</h4><p>表示后续打开的活动页面采用该启动标注.</p>
<ol>
<li><p>调用Intent对象中的setFlags方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>, MainActivityButtonB.class);</span><br><span class="line">intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="启动标注取值"><a href="#启动标注取值" class="headerlink" title="启动标注取值"></a>启动标注取值</h5><p><img src="/Liust1918.githud.io/image/30710065Figure-T101_52772-16348238627691.png" alt="30710065Figure-T101_52772"></p>
<h4 id="应用-两个活动之间交替跳转"><a href="#应用-两个活动之间交替跳转" class="headerlink" title="应用:两个活动之间交替跳转"></a>应用:两个活动之间交替跳转</h4><p>两个页面相互跳，不会像出入栈那样.</p>
<p>避免无谓的重复返回，只会在活动A和活动B之间跳转</p>
<h5 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h5><p>在活动A和活动B都设置标志FlAG_ACTIVITY_CLEAR_TOP</p>
<h4 id="应用-登陆成功后不再返回登陆页面"><a href="#应用-登陆成功后不再返回登陆页面" class="headerlink" title="应用:登陆成功后不再返回登陆页面"></a>应用:登陆成功后不再返回登陆页面</h4><p>到登陆成功页面后，清空前面不应该回去(获取验证码,找回验证码等页面)的栈.</p>
<h5 id="解决方法-1"><a href="#解决方法-1" class="headerlink" title="解决方法:"></a>解决方法:</h5><p>登陆成功活动页面设置FlAG_ACTIVITY_CLEAR_TASK | FLAG_ACTIVITY_NEW_TASK</p>
<p>(一个清空栈，一个新生产栈)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">       ...</span><br><span class="line">           <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>, MainActivitySuccessfulLogin.class);</span><br><span class="line">    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line">        ...</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>





<h2 id="4-2Intent在活动之间传递消息"><a href="#4-2Intent在活动之间传递消息" class="headerlink" title="4.2Intent在活动之间传递消息"></a>4.2Intent在活动之间传递消息</h2><h3 id="4-2-1Intent概念和组成"><a href="#4-2-1Intent概念和组成" class="headerlink" title="4.2.1Intent概念和组成"></a>4.2.1Intent概念和组成</h3><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><p><strong>Intent的意思是意图</strong></p>
<h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><p><strong>负责android任意东西之间的相互通信</strong></p>
<ol>
<li>本次通信从哪里来，去到哪里，怎么走</li>
<li>发送方携带数据内容，接收方从意图Intent中解析数据</li>
<li>接收方接收意图Intent后，返回应答数据给前面的发送方.</li>
</ol>
<h4 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h4><table>
<thead>
<tr>
<th>属性</th>
<th>方法</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>Component</td>
<td>setComponent</td>
<td>组件(来源和目标)</td>
</tr>
<tr>
<td>Action</td>
<td>setAction</td>
<td>动作(动作行为)</td>
</tr>
<tr>
<td>Data</td>
<td>setData</td>
<td>Uri(动作要操作的数据路径)</td>
</tr>
<tr>
<td>Category</td>
<td>addCategory</td>
<td>类别(操作类别)</td>
</tr>
<tr>
<td>Type</td>
<td>setType</td>
<td>数据类型</td>
</tr>
<tr>
<td>Extras</td>
<td>putExtras</td>
<td>拓展信息(装载的包裹信息)</td>
</tr>
<tr>
<td>Flags</td>
<td>setFlags</td>
<td>标志位(活动的启动标注)</td>
</tr>
</tbody></table>
<h3 id="4-2-2显式Intent和隐式Intent"><a href="#4-2-2显式Intent和隐式Intent" class="headerlink" title="4.2.2显式Intent和隐式Intent"></a>4.2.2显式Intent和隐式Intent</h3><h4 id="显式Intent-指定来源活动和目标活动-精准匹配"><a href="#显式Intent-指定来源活动和目标活动-精准匹配" class="headerlink" title="显式Intent(指定来源活动和目标活动-精准匹配)"></a>显式Intent(指定来源活动和目标活动-精准匹配)</h4><ol>
<li><p><strong>Intent构造方法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>, MainActivityIntentSuccessful.class);</span><br></pre></td></tr></table></figure>
</li>
<li><p>Intent对象中的<strong>setClass</strong>(来源,目标)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();</span><br><span class="line">intent.setClass(<span class="built_in">this</span>,MainActivityIntentSuccessful.class);</span><br></pre></td></tr></table></figure>
</li>
<li><p>Intent对象的<strong>setComponent</strong>(来源,目标)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();</span><br><span class="line"><span class="type">ComponentName</span> <span class="variable">componentName</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ComponentName</span>(<span class="built_in">this</span>,MainActivityIntentSuccessful.class);</span><br><span class="line">intent.setComponent(componentName);</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="隐式Intent-匹配AndroidManifest中的活动-模块查询"><a href="#隐式Intent-匹配AndroidManifest中的活动-模块查询" class="headerlink" title="隐式Intent(匹配AndroidManifest中的活动-模块查询)"></a>隐式Intent(匹配AndroidManifest中的活动-模块查询)</h4><p>隐式Intent<strong>不指明</strong>源活动和目标活动.（可以唤醒外部app）</p>
<p>只会去匹配AndroidManifest.xml中的每个活动中Intent-filter标签的category,action,data.</p>
<p>从某种程度上起到过滤作用.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;.MainActivityIntentSuccessful&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:exported</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;MyTest&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.DEFAULT&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="隐式Intent的Intent-filter属性"><a href="#隐式Intent的Intent-filter属性" class="headerlink" title="隐式Intent的Intent-filter属性"></a>隐式Intent的Intent-filter属性</h4><h5 id="Action-必须"><a href="#Action-必须" class="headerlink" title="Action(必须)"></a>Action(必须)</h5><h6 id="常见动作"><a href="#常见动作" class="headerlink" title="常见动作"></a>常见动作</h6><p><img src="/Liust1918.githud.io/image/30710065Figure-T104_52779.png" alt="30710065Figure-T104_52779"></p>
<h6 id="自定义动作"><a href="#自定义动作" class="headerlink" title="自定义动作"></a>自定义动作</h6><ul>
<li>android:name&#x3D;”自定义名”</li>
<li>category android:name&#x3D;”android.intent.category.DEFAULT” (<strong>必须</strong>)</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;.MainActivityIntentSuccessful&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:exported</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;MyTest&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.DEFAULT&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="Category-可选-可设置多个"><a href="#Category-可选-可设置多个" class="headerlink" title="Category(可选,可设置多个)"></a>Category(可选,可设置多个)</h5><p>更加详细匹配</p>
<h5 id="Data-可选"><a href="#Data-可选" class="headerlink" title="Data(可选)"></a>Data(可选)</h5><p>更加详细匹配</p>
<h5 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();</span><br><span class="line">intent.setAction(Intent.ACTION_DIAL);</span><br><span class="line"><span class="type">Uri</span> <span class="variable">parse</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;tel:&quot;</span> + <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">intent.setData(parse);</span><br><span class="line">startActivity(intent);</span><br></pre></td></tr></table></figure>

<p>效果</p>
<p>点击后会跳转到拨打电话界面,并且已经输入123456.</p>
<h3 id="4-2-3把数据发送到下一个活动"><a href="#4-2-3把数据发送到下一个活动" class="headerlink" title="4.2.3把数据发送到下一个活动"></a>4.2.3把数据发送到下一个活动</h3><h4 id="Intent存放数据"><a href="#Intent存放数据" class="headerlink" title="Intent存放数据"></a>Intent存放数据</h4><h5 id="支持数据类型"><a href="#支持数据类型" class="headerlink" title="支持数据类型"></a>支持数据类型</h5><ul>
<li>基本数据类型</li>
<li>Serializable序列化结构</li>
</ul>
<h5 id="Bundle对象存放到Intent"><a href="#Bundle对象存放到Intent" class="headerlink" title="Bundle对象存放到Intent"></a>Bundle对象存放到Intent</h5><p>Bundle像包裹一样存放在Intent</p>
<ul>
<li>使用Map映射存放数据</li>
<li>putExtras(Bundle对象)</li>
</ul>
<h4 id="发送方"><a href="#发送方" class="headerlink" title="发送方"></a>发送方</h4><ol>
<li>得到Intent对象</li>
<li>新建Bundle对象</li>
<li>将数据内容装入Bundle对象</li>
<li>调用Intent对象的putExtras()装入Bundle对象</li>
<li>将Intent对象调如startActivity中</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>, GetNextActivity.class);</span><br><span class="line"><span class="type">Bundle</span> <span class="variable">bundle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line">bundle.putString(<span class="string">&quot;time&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>().toString());</span><br><span class="line">bundle.putString(<span class="string">&quot;content&quot;</span>, <span class="string">&quot;测试&quot;</span>);</span><br><span class="line">intent.putExtras(bundle);</span><br><span class="line">startActivity(intent);</span><br></pre></td></tr></table></figure>



<h4 id="接收方"><a href="#接收方" class="headerlink" title="接收方"></a>接收方</h4><ol>
<li>直接调用getIntent()方法得到Intent对象</li>
<li>调用Intent对象中的getExtras()方法，得到Bundle对象</li>
<li>通过getXXX(key,value)得到值</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Bundle</span> <span class="variable">extras</span> <span class="operator">=</span> getIntent().getExtras();</span><br><span class="line"><span class="type">String</span> <span class="variable">time</span> <span class="operator">=</span> extras.getString(<span class="string">&quot;time&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> extras.getString(<span class="string">&quot;content&quot;</span>);</span><br><span class="line">String input=String.format(<span class="string">&quot;收到请求消息:\n请求时间为%s\n请求内容为%s&quot;</span>,time,content);</span><br></pre></td></tr></table></figure>



<h3 id="4-2-4数据发送到下个活动后返回数据到上一个活动"><a href="#4-2-4数据发送到下个活动后返回数据到上一个活动" class="headerlink" title="4.2.4数据发送到下个活动后返回数据到上一个活动"></a>4.2.4数据发送到下个活动后返回数据到上一个活动</h3><p>这个活动页面把数据发到下个活动页面，然后返回内容给上一个页面.</p>
<h4 id="发送方-1"><a href="#发送方-1" class="headerlink" title="发送方"></a>发送方</h4><h5 id="步骤一startActivityForResult"><a href="#步骤一startActivityForResult" class="headerlink" title="步骤一startActivityForResult"></a>步骤一startActivityForResult</h5><ol>
<li>发送内容装入Bundle对象中，再把Bundle对象装入Intent对象中</li>
<li>将Intent对象装入startActivityForResult中</li>
<li><strong>设置startActivityForResult(应答数据，标识每个跳转的唯一请求代码)</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>, SendNextAndReturnResultActivity.class);</span><br><span class="line"><span class="type">Bundle</span> <span class="variable">bundle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line">bundle.putString(<span class="string">&quot;time&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>().toString());</span><br><span class="line">bundle.putString(<span class="string">&quot;content&quot;</span>,<span class="string">&quot;测试&quot;</span>);</span><br><span class="line">intent.putExtras(bundle);</span><br><span class="line">startActivityForResult(intent,<span class="number">0</span>);</span><br></pre></td></tr></table></figure>



<h5 id="步骤四"><a href="#步骤四" class="headerlink" title="步骤四"></a>步骤四</h5><ol>
<li>重写<strong>onActivityResult方法</strong></li>
<li>判断<ul>
<li><strong>requestCode:上面的标识每个跳转的唯一请求代码</strong></li>
<li><strong>resultCode:判断上个页面是否处理成功</strong><ul>
<li>Activity.RESULT_OK</li>
<li>Activity.RESULT_CANCELED</li>
</ul>
</li>
<li><strong>Intent:Intent对象不为空</strong></li>
</ul>
</li>
<li>从Intent中获得Bundle对象，再获得数据内容.</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 从下一个页面携带参数返回到当前页面时触发</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> requestCode</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> resultCode</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> data</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onActivityResult</span><span class="params">(<span class="type">int</span> requestCode, <span class="type">int</span> resultCode, <span class="meta">@Nullable</span> Intent data)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">    <span class="keyword">if</span>(data!=<span class="literal">null</span>&amp;&amp;requestCode==<span class="number">0</span>&amp;&amp;resultCode==Activity.RESULT_OK)&#123;</span><br><span class="line">        <span class="type">Bundle</span> <span class="variable">extras</span> <span class="operator">=</span> data.getExtras();</span><br><span class="line">        <span class="type">String</span> <span class="variable">time</span> <span class="operator">=</span> extras.getString(<span class="string">&quot;time&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> extras.getString(<span class="string">&quot;content&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">format</span> <span class="operator">=</span> String.format(<span class="string">&quot;收到返回信息:\n应答时间为%s\n应答内容为%s&quot;</span>, time, content);</span><br><span class="line">        <span class="type">TextView</span> <span class="variable">textView</span> <span class="operator">=</span>findViewById(R.id.MyText);</span><br><span class="line">        textView.setText(format);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="接收方-1"><a href="#接收方-1" class="headerlink" title="接收方"></a>接收方</h4><h5 id="步骤二"><a href="#步骤二" class="headerlink" title="步骤二"></a>步骤二</h5><ol>
<li>直接调用getIntent()方法得到Intent对象</li>
<li>调用Intent对象中的getExtras()方法，得到Bundle对象</li>
<li>通过getXXX(key,value)得到值</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Bundle</span> <span class="variable">extras</span> <span class="operator">=</span> getIntent().getExtras();</span><br><span class="line"><span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> extras.getString(<span class="string">&quot;content&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">time</span> <span class="operator">=</span> extras.getString(<span class="string">&quot;time&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">input</span> <span class="operator">=</span> String.format(<span class="string">&quot;收到请求消息:\n请求时间为%s\n请求内容为%s&quot;</span>, time, content);</span><br></pre></td></tr></table></figure>



<h5 id="步骤三setResult"><a href="#步骤三setResult" class="headerlink" title="步骤三setResult"></a>步骤三setResult</h5><ol>
<li>创建Intent对象</li>
<li>创建Bundle对象</li>
<li>将数据内容装入Bundle对象</li>
<li>调用Intent对象的putExtras装入Bundle对象</li>
<li><strong>调用setResult（应答代码(成功&#x2F;失败)，Intent对象）</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();</span><br><span class="line"><span class="type">Bundle</span> <span class="variable">bundle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line">bundle.putString(<span class="string">&quot;content&quot;</span>,response);</span><br><span class="line">bundle.putString(<span class="string">&quot;time&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>().toString());</span><br><span class="line">intent.putExtras(bundle);</span><br><span class="line">setResult(Activity.RESULT_OK,intent);</span><br></pre></td></tr></table></figure>





<h2 id="4-3除Intent之外添加消息"><a href="#4-3除Intent之外添加消息" class="headerlink" title="4.3除Intent之外添加消息"></a>4.3除Intent之外添加消息</h2><h3 id="4-3-1设置全局字符串"><a href="#4-3-1设置全局字符串" class="headerlink" title="4.3.1设置全局字符串"></a>4.3.1设置全局字符串</h3><ol>
<li>设置string.xml中key-value</li>
<li>代码调用:R.id.key</li>
<li>xml调用:@string&#x2F;key</li>
</ol>
<h3 id="4-3-2用元数据传递配置信息"><a href="#4-3-2用元数据传递配置信息" class="headerlink" title="4.3.2用元数据传递配置信息"></a>4.3.2用元数据传递配置信息</h3><h5 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h5><ol>
<li>在AndroidManifest.xml文件设置meta-data</li>
<li>设置meta-data的android:name以及android:value</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:name</span>=<span class="string">&quot;.addActivity&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:exported</span>=<span class="string">&quot;true&quot;</span> &gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;meta-data android:name=&quot;weather&quot; android:value=&quot;晴天&quot;/&gt;--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;weather&quot;</span> <span class="attr">android:value</span>=<span class="string">&quot;@string/weather&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="调用"><a href="#调用" class="headerlink" title="调用"></a>调用</h5><ol>
<li>获取当前应用的包管理器</li>
<li>调用包管理器的<strong>getActivityInfo</strong>方法获得当前活动的信息对象</li>
<li>调用<strong>getActivityInfo的metaData方法</strong>获得Bundle对象</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用元数据显示字符串资源</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showStringResourceForMeta_data</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//获取应用的包管理器</span></span><br><span class="line">        <span class="type">PackageManager</span> <span class="variable">packageManager</span> <span class="operator">=</span> getPackageManager();</span><br><span class="line">        <span class="comment">//从应用包管理器中获取当前的活动信息</span></span><br><span class="line">        <span class="type">ActivityInfo</span> <span class="variable">activityInfo</span> <span class="operator">=</span> packageManager.getActivityInfo(getComponentName(), PackageManager.GET_META_DATA);</span><br><span class="line">        <span class="comment">//获取活动附件的元数据信息</span></span><br><span class="line">        <span class="type">Bundle</span> <span class="variable">metaData</span> <span class="operator">=</span> activityInfo.metaData;</span><br><span class="line">        <span class="type">String</span> <span class="variable">weather</span> <span class="operator">=</span> metaData.getString(<span class="string">&quot;weather&quot;</span>);</span><br><span class="line">        textView.setText(<span class="string">&quot;来着元数据:今天的天气是&quot;</span>+weather);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (PackageManager.NameNotFoundException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="4-3-3给应用页面注册快捷方式"><a href="#4-3-3给应用页面注册快捷方式" class="headerlink" title="4.3.3给应用页面注册快捷方式"></a>4.3.3给应用页面注册快捷方式</h3><h5 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h5><p><img src="/Liust1918.githud.io/image/tempFileForShare_20211022-170007.jpg" alt="tempFileForShare_20211022-170007"></p>
<h5 id="创建shortcuts-xml配置资源文件"><a href="#创建shortcuts-xml配置资源文件" class="headerlink" title="创建shortcuts.xml配置资源文件"></a>创建shortcuts.xml配置资源文件</h5><h6 id="shortcut标签"><a href="#shortcut标签" class="headerlink" title="shortcut标签"></a>shortcut标签</h6><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>shortcutId</td>
<td>快捷方式的编号</td>
</tr>
<tr>
<td>enabled</td>
<td>是否启用</td>
</tr>
<tr>
<td>icon</td>
<td>快捷菜单左侧的图标</td>
</tr>
<tr>
<td>shortcutShortLabel</td>
<td>快捷菜单短名称</td>
</tr>
<tr>
<td>shortcutLongLabel</td>
<td>快捷菜单长名称(优先展示,放不下才显示短名称)</td>
</tr>
</tbody></table>
<h6 id="intent标签"><a href="#intent标签" class="headerlink" title="intent标签"></a>intent标签</h6><p>点击菜单后跳转内容由Intent节点决定</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>cation</td>
<td>固定为android.intent.action.VIEW</td>
</tr>
<tr>
<td>targetPackage</td>
<td>固定为当前App的包名</td>
</tr>
<tr>
<td>targetClass</td>
<td><strong>活动页面类的完整路径</strong></td>
</tr>
</tbody></table>
<h6 id="categories标签"><a href="#categories标签" class="headerlink" title="categories标签"></a>categories标签</h6><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>固定android.shortcut.conversation</td>
</tr>
</tbody></table>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">shortcuts</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">shortcut</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:shortcutId</span>=<span class="string">&quot;first&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:enabled</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/ic_launcher&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:shortcutShortLabel</span>=<span class="string">&quot;@string/first_short&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:shortcutLongLabel</span>=<span class="string">&quot;@string/first_long&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">intent</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:action</span>=<span class="string">&quot;android.intent.action.VIEW&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:targetPackage</span>=<span class="string">&quot;com.example.type_4_chapter&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:targetClass</span>=<span class="string">&quot;com.example.type_4_chapter.addActivity&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">categories</span> <span class="attr">android:name</span>=<span class="string">&quot;android.shortcut.conversation&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">categories</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">shortcut</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shortcuts</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h5 id="在AndroidManifest-xml设置meta-data中的resource配置"><a href="#在AndroidManifest-xml设置meta-data中的resource配置" class="headerlink" title="在AndroidManifest.xml设置meta-data中的resource配置"></a>在AndroidManifest.xml设置meta-data中的resource配置</h5><p><strong>只能在主页的活动页面设置</strong></p>
<ol>
<li>到AndroidManifest.xml中设置<strong>meta-data</strong></li>
<li><strong>name设置android.app.shortcuts</strong></li>
<li><strong>resource设置成调用上面的xml文件</strong></li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;.MainActivity&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:exported</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:launchMode</span>=<span class="string">&quot;standard&quot;</span>&gt;</span></span><br><span class="line">   ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.app.shortcuts&quot;</span> <span class="attr">android:resource</span>=<span class="string">&quot;@xml/shortcuts&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h1 id="5-中级控件"><a href="#5-中级控件" class="headerlink" title="5.中级控件"></a>5.中级控件</h1><h2 id="5-1定制简单图形"><a href="#5-1定制简单图形" class="headerlink" title="5.1定制简单图形"></a>5.1定制简单图形</h2><h3 id="5-1-1图形基本概念"><a href="#5-1-1图形基本概念" class="headerlink" title="5.1.1图形基本概念"></a>5.1.1图形基本概念</h3><h4 id="Drawable类分类"><a href="#Drawable类分类" class="headerlink" title="Drawable类分类"></a>Drawable类分类</h4><p>所有能显示的图片(图片，色块，画板，背景等)</p>
<h4 id="图片文件以及图片保存目录"><a href="#图片文件以及图片保存目录" class="headerlink" title="图片文件以及图片保存目录"></a>图片文件以及图片保存目录</h4><h5 id="包含图片的图片文件都保存在res-x2F-drawable中"><a href="#包含图片的图片文件都保存在res-x2F-drawable中" class="headerlink" title="包含图片的图片文件都保存在res&#x2F;drawable中"></a>包含图片的图片文件都保存在res&#x2F;drawable中</h5><ol>
<li>描述性的<strong>XML文件</strong></li>
<li>图片文件存放各种分辨率<ul>
<li><strong>drawable-ldpi</strong>:低分辨率(240x320)</li>
<li><strong>drawable-mdpi</strong>:中分辨率(320x480)</li>
<li><strong>drawable-hdpi</strong>:高分辨率(480x800)</li>
<li><strong>drawable-xhdpi</strong>:加高分辨率(720x1280)</li>
<li><strong>drawable-xxhdpi</strong>：超高分辨率(1080x1920)</li>
<li><strong>drawable-xxxhdpi</strong>：超超高分辨率(1440x2560)</li>
</ul>
</li>
</ol>
<h5 id="工作方式"><a href="#工作方式" class="headerlink" title="工作方式"></a>工作方式</h5><p>当图片文件在drawable的同目录下，android会根据手机的分辨率分别适配对应文件夹的图片.</p>
<p><strong>手机分辨率就高不就低</strong>，分辨率低了，android会强行拉伸图片分辨率，就会感觉图片很模糊.</p>
<h4 id="图片引用方式"><a href="#图片引用方式" class="headerlink" title="图片引用方式"></a>图片引用方式</h4><ol>
<li><strong>java代码方式</strong>:R.drawable.文件名</li>
<li><strong>xml方式</strong>：@drawable&#x2F;不会拓展名的图片文件.</li>
</ol>
<h3 id="5-1-2形状图形-Shape图片"><a href="#5-1-2形状图形-Shape图片" class="headerlink" title="5.1.2形状图形(Shape图片)"></a>5.1.2形状图形(Shape图片)</h3><p>以<strong>shape为根节点</strong>的XML文件，存在在drawable目录下.</p>
<ul>
<li>shape<ul>
<li>size（尺寸）</li>
<li>stroke（描边）</li>
<li>conrners（圆角）</li>
<li>solid（填充）</li>
<li>padding（间隔）</li>
<li>gradient（渐变）</li>
</ul>
</li>
</ul>
<h4 id="shape（形状）"><a href="#shape（形状）" class="headerlink" title="shape（形状）"></a>shape（形状）</h4><ul>
<li><p>shape：字符串类型,描述形状</p>
<table>
<thead>
<tr>
<th>形状类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>rectangle</td>
<td>矩形.（默认）</td>
</tr>
<tr>
<td>oval</td>
<td>椭圆.(corners节点失效)</td>
</tr>
<tr>
<td>line</td>
<td>直线.（必须设置stroke节点）</td>
</tr>
<tr>
<td>ring</td>
<td>圆环</td>
</tr>
</tbody></table>
</li>
</ul>
<h4 id="size-尺寸"><a href="#size-尺寸" class="headerlink" title="size(尺寸)"></a>size(尺寸)</h4><p>描述宽高尺寸(若无size，则与宿主视图一样大小)</p>
<ol>
<li><strong>height</strong>:px类型，高度</li>
<li><strong>width</strong>:px类型,宽度</li>
</ol>
<h4 id="stroke-描边"><a href="#stroke-描边" class="headerlink" title="stroke(描边)"></a>stroke(描边)</h4><p>图形的描边规格</p>
<ol>
<li><strong>color</strong>：颜色类型，描边颜色</li>
<li><strong>dashGap</strong>：px类型，<strong>每段虚线之间的间隔</strong>.为0则为实线</li>
<li><strong>dashWidth</strong>：px类型，<strong>每段虚线的宽度</strong>.为0则为实线</li>
<li><strong>width</strong>:px类型,<strong>描边的厚度</strong></li>
</ol>
<h4 id="corners（圆角）"><a href="#corners（圆角）" class="headerlink" title="corners（圆角）"></a>corners（圆角）</h4><p>图片的圆角大小</p>
<ol>
<li><strong>bottomLeftRadius</strong>：px类型,<strong>左下角圆角的半径</strong></li>
<li><strong>bottomRightRadius</strong>：px类型,<strong>右下圆角的半径</strong></li>
<li><strong>topLeftRadius</strong>:px类型,<strong>左上圆角的半径</strong></li>
<li><strong>topRightRadius</strong>：px类型,<strong>右上圆角的半径</strong></li>
<li><strong>radius</strong>：px类型，<strong>4个格圆角的半径</strong></li>
</ol>
<h4 id="solid（填充）"><a href="#solid（填充）" class="headerlink" title="solid（填充）"></a>solid（填充）</h4><p>填充颜色</p>
<ol>
<li><strong>color</strong>：颜色类型，内部填充的颜色.</li>
</ol>
<h4 id="padding（间隔）"><a href="#padding（间隔）" class="headerlink" title="padding（间隔）"></a>padding（间隔）</h4><p>图片和周围边界的间隔（不设置就没有间隔）</p>
<ol>
<li><strong>top</strong>：px类型</li>
<li><strong>bottom</strong>：px类型</li>
<li><strong>left</strong>：px类型</li>
<li><strong>right</strong>：px类型</li>
</ol>
<h4 id="gradient（渐变）"><a href="#gradient（渐变）" class="headerlink" title="gradient（渐变）"></a>gradient（渐变）</h4><p>图片的颜色渐变</p>
<ol>
<li><strong>angle</strong>：整型,渐变的起始角度.<ul>
<li>值为0时，是从9点钟方向开始渐变</li>
<li>以此类推逆时针(90对应6点钟,180对应3点钟,270对应0&#x2F;12点钟)</li>
</ul>
</li>
<li><strong>type</strong>：字符串类型，渐变类型<ul>
<li><strong>linear</strong>：线性渐变(默认)<img src="C:\Users\13703\Desktop\1434635112_5542.png-thumb.png" alt="1434635112_5542.png-thumb"></li>
<li><strong>radial</strong>：放射渐变（起始颜色时圆心颜色）<img src="/Liust1918.githud.io/image/1434635113_1523.png" alt="1434635113_1523"></li>
<li><strong>sweep</strong>：滚动渐变(一个线段以某个端点为圆心做360度旋转)<img src="/Liust1918.githud.io/image/1434635134_2747.png" alt="1434635134_2747"></li>
</ul>
</li>
<li><strong>centerX</strong>：浮点型，圆心渐变起点的X起点(0.5为中心)</li>
<li><strong>centerY</strong>：浮点型，圆心渐变起点的Y起点(0.5为中心)</li>
<li><strong>gradientRadius</strong>：整型，渐变的半径.(type&#x3D;radial时才需要设置)</li>
<li><strong>centerColor</strong>：颜色类型，渐变的中间颜色</li>
<li><strong>startColor</strong>：颜色类型，渐变的起始颜色</li>
<li><strong>endColor</strong>：颜色类型，渐变的终止颜色.</li>
<li><strong>useLevel</strong>：布尔类型<ul>
<li>true：无渐变色</li>
<li>false：为有渐变色</li>
</ul>
</li>
</ol>
<h4 id="创建和使用方法"><a href="#创建和使用方法" class="headerlink" title="创建和使用方法"></a>创建和使用方法</h4><ol>
<li>在drawable目录下创建Drawable resource file</li>
<li>修改根节点(Root element)为shape</li>
<li>生成XML文件</li>
<li>在使用的java文件中设置背景即可.</li>
</ol>
<h3 id="5-1-3九宫格图片"><a href="#5-1-3九宫格图片" class="headerlink" title="5.1.3九宫格图片"></a>5.1.3九宫格图片</h3><h4 id="解决问题"><a href="#解决问题" class="headerlink" title="解决问题"></a>解决问题</h4><ol>
<li>图片设置成背景后，如果图片尺寸太小，系统会自动拉伸造成模糊</li>
<li>设置文字从图片的某个位置输入.</li>
</ol>
<p>九宫格文件本质上时通过</p>
<p><strong>拉伸图片时，只拉伸内部区域，不拉伸边缘线条完成的.</strong></p>
<h4 id="创建九宫格文件"><a href="#创建九宫格文件" class="headerlink" title="创建九宫格文件"></a>创建九宫格文件</h4><h5 id="九宫格创建"><a href="#九宫格创建" class="headerlink" title="九宫格创建"></a>九宫格创建</h5><ol>
<li>把<strong>XXX.png的图片</strong>文件加入drawable文件</li>
<li>右键图片,选择Create 9-Patch files</li>
<li>得到<strong>XXXX.9.png</strong>的九宫格文件</li>
<li>删除原来的<strong>XXX.png的图片</strong></li>
</ol>
<h5 id="九宫格效果"><a href="#九宫格效果" class="headerlink" title="九宫格效果"></a>九宫格效果</h5><p><img src="/Liust1918.githud.io/image/Screenshot_20211025124841.jpg" alt="Screenshot_20211025124841"></p>
<h4 id="4条黑线"><a href="#4条黑线" class="headerlink" title="4条黑线"></a>4条黑线</h4><ul>
<li>顶部：在水平拉伸的时候，保持其他位置不动，只在这个点的区域做无限的延伸</li>
<li>左边：在竖直拉伸的时候，保持其他位置不动，只在这个点的区域做无限的延伸</li>
<li>底部：在水平拉伸的时候，指定图片里的内容显示的区域</li>
<li>右边：在竖直拉伸的时候，指定图片里的内容显示的区域</li>
</ul>
<p><img src="/Liust1918.githud.io/image/2012082311450598.jpg" alt="2012082311450598"></p>
<h3 id="5-1-4状态列表图形"><a href="#5-1-4状态列表图形" class="headerlink" title="5.1.4状态列表图形"></a>5.1.4状态列表图形</h3><h5 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h5><p>图片文件一般时静态的，我们需要用到动态图片.</p>
<h5 id="本质"><a href="#本质" class="headerlink" title="本质"></a>本质</h5><p>根据触摸情况的不同，更换不同图片.</p>
<p>在XML文件中规定不同状态所呈现的图片列表.</p>
<h5 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h5><ol>
<li>在drawable目录中，创建Drawable resource file</li>
<li>选择根节点(root element)为selector</li>
<li>设置不同item设置不同图片&#x2F;颜色</li>
</ol>
<h5 id="item的属性以及设置图片-x2F-颜色例子"><a href="#item的属性以及设置图片-x2F-颜色例子" class="headerlink" title="item的属性以及设置图片&#x2F;颜色例子"></a>item的属性以及设置图片&#x2F;颜色例子</h5><h6 id="item的属性"><a href="#item的属性" class="headerlink" title="item的属性"></a>item的属性</h6><table>
<thead>
<tr>
<th>状态类型</th>
<th>说明</th>
<th>适用控件</th>
</tr>
</thead>
<tbody><tr>
<td>state_pressed</td>
<td>是否按下</td>
<td>Button</td>
</tr>
<tr>
<td>state_checked</td>
<td>是否勾选</td>
<td>CheckBox,RadioButton</td>
</tr>
<tr>
<td>state_focused</td>
<td>是否获取焦点</td>
<td>EditText</td>
</tr>
<tr>
<td>state_selected</td>
<td>是否选中</td>
<td>**</td>
</tr>
<tr>
<td>没有</td>
<td>默认情况</td>
<td>**</td>
</tr>
</tbody></table>
<h6 id="设置图片-x2F-颜色例子"><a href="#设置图片-x2F-颜色例子" class="headerlink" title="设置图片&#x2F;颜色例子"></a>设置图片&#x2F;颜色例子</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</span><br><span class="line">    &lt;item android:state_focused=&quot;true&quot; android:drawable=&quot;@drawable/shape_edit_focus&quot; /&gt;</span><br><span class="line">    &lt;item android:drawable=&quot;@drawable/shape_edit_normal&quot;/&gt;</span><br><span class="line">&lt;/selector&gt;</span><br></pre></td></tr></table></figure>

<p>默认情况,显示shape_edit_normal图片</p>
<p>按下的时候，显示shape_edit_focus图片</p>
<p>用状态列表图片的时候，只需要设置组件的background或者color就行了.</p>
<h2 id="5-2选择按钮"><a href="#5-2选择按钮" class="headerlink" title="5.2选择按钮"></a>5.2选择按钮</h2><h4 id="抽象按钮CompoundButton"><a href="#抽象按钮CompoundButton" class="headerlink" title="抽象按钮CompoundButton"></a>抽象按钮CompoundButton</h4><p><img src="/Liust1918.githud.io/image/30710065Figure-P123_1796.png" alt="30710065Figure-P123_1796"></p>
<h5 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h5><p>CompoundButton是CheckBox.Radio,Switch的抽象类</p>
<h5 id="CompoundButton属性"><a href="#CompoundButton属性" class="headerlink" title="CompoundButton属性"></a><strong>CompoundButton属性</strong></h5><p>下面继承的类都可以用一下的属性</p>
<ul>
<li>XML文件属性<ol>
<li><strong>checked</strong>：勾选状态(默认未勾选)true是勾选，false是未勾选</li>
<li><strong>button</strong>：左侧勾选图标的图形资源（默认系统图标）</li>
</ol>
</li>
<li>java代码的方法<ol>
<li><strong>setChecked</strong>：设置按钮的勾选状态</li>
<li><strong>setButtonDrawable</strong>：设置左侧勾选图标的图形资源.</li>
<li><strong>setOnCheckedChangeListener</strong>：设置勾选状态变化的监听器</li>
<li><strong>isChecked</strong>：判断按钮是否勾选</li>
</ol>
</li>
</ul>
<h5 id="勾选状态监听器OnCheckedChangeListener"><a href="#勾选状态监听器OnCheckedChangeListener" class="headerlink" title="勾选状态监听器OnCheckedChangeListener"></a>勾选状态监听器OnCheckedChangeListener</h5><ol>
<li><h2 id="继承CompoundButton-OnCheckedChangeListener类-RadioGroup-OnCheckedChangeListener-CompoundButton-OnCheckedChangeListener"><a href="#继承CompoundButton-OnCheckedChangeListener类-RadioGroup-OnCheckedChangeListener-CompoundButton-OnCheckedChangeListener" class="headerlink" title="继承CompoundButton.OnCheckedChangeListener类- RadioGroup.OnCheckedChangeListener- CompoundButton.OnCheckedChangeListener"></a>继承CompoundButton.<strong>OnCheckedChangeListener</strong>类<br>- RadioGroup.OnCheckedChangeListener<br>- CompoundButton.OnCheckedChangeListener</h2></li>
<li>重写<strong>onCheckedChanged</strong>方法</li>
<li>让<strong>抽象类CompoundButton下面的实现类</strong>设置监听<strong>setOnCheckedChangeListener</strong>(this)</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCheckBox</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">CompoundButton</span>.OnCheckedChangeListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_my_check_box);</span><br><span class="line">        <span class="comment">//获得CheckBox对象</span></span><br><span class="line">        <span class="type">CheckBox</span> <span class="variable">checkBox</span> <span class="operator">=</span>findViewById(R.id.ch_system);</span><br><span class="line">        <span class="comment">//调用CheckBox对象的setOnCheckedChangeListener方法进行监视</span></span><br><span class="line">       checkBox.setOnCheckedChangeListener(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCheckedChanged</span><span class="params">(CompoundButton compoundButton, <span class="type">boolean</span> isChecked)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(compoundButton.getId()==R.id.ch_system)&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">format</span> <span class="operator">=</span> String.format(<span class="string">&quot;你%s了这个CheckBox&quot;</span>, isChecked ? <span class="string">&quot;勾选&quot;</span> : <span class="string">&quot;取消勾选&quot;</span>);</span><br><span class="line">            compoundButton.setText(format);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="复选框CheckBox"><a href="#复选框CheckBox" class="headerlink" title="复选框CheckBox"></a>复选框CheckBox</h4><h5 id="效果-1"><a href="#效果-1" class="headerlink" title="效果"></a>效果</h5><p><img src="/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-25_134433.jpg" alt="屏幕截图 2021-10-25 134433"></p>
<h5 id="XML实现-1"><a href="#XML实现-1" class="headerlink" title="XML实现"></a>XML实现</h5><ol>
<li>CheckBox标签<ul>
<li>checked:是否选择</li>
</ul>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/ch_system&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:checked</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;这是系统的CheckBox&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="开关按钮Switch"><a href="#开关按钮Switch" class="headerlink" title="开关按钮Switch"></a>开关按钮Switch</h4><p>Switch像个高级级别的CheckBox</p>
<h5 id="效果-2"><a href="#效果-2" class="headerlink" title="效果"></a>效果</h5><p><img src="/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_072410.jpg" alt="屏幕截图 2021-10-26 072410"></p>
<h5 id="XML实现-2"><a href="#XML实现-2" class="headerlink" title="XML实现"></a>XML实现</h5><ol>
<li><strong>Switch</strong>标签<ul>
<li><strong>textOn</strong>：设置右侧开启时的文本</li>
<li><strong>textOff</strong>：设置左侧关闭时的文本</li>
<li><strong>track</strong>：设置开关轨道的背景</li>
<li><strong>thumb</strong>：设置开关标识的图标</li>
</ul>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Switch</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/toMySwitch&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;80dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:textOn</span>=<span class="string">&quot;开启textOn&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:textOff</span>=<span class="string">&quot;关闭textOff&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="仿IOS的开关按钮"><a href="#仿IOS的开关按钮" class="headerlink" title="仿IOS的开关按钮"></a>仿IOS的开关按钮</h5><p>借助状态列表图形,设置选中与未选中时候的开关图标.</p>
<h5 id="效果-3"><a href="#效果-3" class="headerlink" title="效果"></a>效果</h5><p><img src="/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_073133.jpg" alt="屏幕截图 2021-10-26 073133"></p>
<h5 id="XML实现-3"><a href="#XML实现-3" class="headerlink" title="XML实现"></a>XML实现</h5><ul>
<li>将状态列表图片放background</li>
<li>button的图标太小了,所以设置为空.不适用默认图标</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/toMyiOSOfSwitch&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;@drawable/myios&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:button</span>=<span class="string">&quot;@null&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_checked</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:drawable</span>=<span class="string">&quot;@drawable/switch_on&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">&quot;@drawable/switch_off&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="单选择按钮RadioButton"><a href="#单选择按钮RadioButton" class="headerlink" title="单选择按钮RadioButton"></a>单选择按钮RadioButton</h4><h5 id="效果-4"><a href="#效果-4" class="headerlink" title="效果"></a>效果</h5><p><img src="/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_073339.jpg" alt="屏幕截图 2021-10-26 073339"></p>
<h5 id="RadioGroup和线性布局的区别"><a href="#RadioGroup和线性布局的区别" class="headerlink" title="RadioGroup和线性布局的区别"></a>RadioGroup和线性布局的区别</h5><h6 id="RadioGroup"><a href="#RadioGroup" class="headerlink" title="RadioGroup"></a>RadioGroup</h6><p><strong>RadioGroup</strong>本质是个<strong>布局</strong>，同一组<strong>RadioButton</strong>需要放在同一个RadioGroup布局下.</p>
<p>RadioGroup也可以挂其他组件.</p>
<h6 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h6><ul>
<li>RadioGroup可以管理RadioButton,线性布局不行</li>
<li><strong>默认orientation</strong>属性是<strong>垂直排序</strong>，线性布局默认是水平</li>
</ul>
<h5 id="XML实现-4"><a href="#XML实现-4" class="headerlink" title="XML实现"></a>XML实现</h5><ol>
<li>RadioGroup<ol>
<li>orientation</li>
<li>RadioButton</li>
</ol>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">RadioGroup</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/MyRadioGroup&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/rb_male&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;男&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/rb_female&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;女&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RadioGroup</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="java代码与监视器"><a href="#java代码与监视器" class="headerlink" title="java代码与监视器"></a>java代码与监视器</h5><h6 id="java代码"><a href="#java代码" class="headerlink" title="java代码"></a>java代码</h6><ol>
<li><strong>check</strong>：选中指定资源编号的单选按钮</li>
<li><strong>getCheckedRadioButtinId</strong>：获取已选中单选按钮的资源编号</li>
<li><strong>setOnCheckedChangeListener</strong>：设置单选按钮勾选变化的监听器.</li>
</ol>
<h6 id="监视器"><a href="#监视器" class="headerlink" title="监视器"></a>监视器</h6><p><strong>OnCheckedChangeListener是监视RadioGroup,而不是RadioButton.</strong></p>
<p>所以只有点击同一组的其他RadioButton，才会监听到被选中.</p>
<h2 id="5-3文本输入"><a href="#5-3文本输入" class="headerlink" title="5.3文本输入"></a>5.3文本输入</h2><h3 id="编辑框EditText"><a href="#编辑框EditText" class="headerlink" title="编辑框EditText"></a>编辑框EditText</h3><p>相当于输入框，继承TextView</p>
<h5 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h5><ol>
<li><strong>inputType</strong>：指定输入的文本类型.(可以用:”|”拼接各种类型)</li>
<li><strong>maxLength</strong>：文本最大长度</li>
<li><strong>hint</strong>：提示文本内容</li>
<li><strong>textColorHint</strong>：提示文本颜色</li>
</ol>
<h5 id="inputType输入类型"><a href="#inputType输入类型" class="headerlink" title="inputType输入类型"></a>inputType输入类型</h5><table>
<thead>
<tr>
<th>输入类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>text</td>
<td>文本</td>
</tr>
<tr>
<td>textPassoword</td>
<td>文本密码</td>
</tr>
<tr>
<td>number</td>
<td>整型数</td>
</tr>
<tr>
<td>numberSigned</td>
<td>带符号的数字(允许”-“开头)</td>
</tr>
<tr>
<td>numberDecimal</td>
<td>带小数点的数字</td>
</tr>
<tr>
<td>numberPassword</td>
<td>数字密码</td>
</tr>
<tr>
<td>datetime</td>
<td>时间日期格式（允许横线，斜杠，空格，冒号）</td>
</tr>
<tr>
<td>date</td>
<td>日期格式(允许”-“和”&#x2F;“)</td>
</tr>
<tr>
<td>time</td>
<td>时间格式(允许”；”)</td>
</tr>
</tbody></table>
<h5 id="XML代码"><a href="#XML代码" class="headerlink" title="XML代码"></a>XML代码</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:inputType</span>=<span class="string">&quot;textPassword&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:maxLength</span>=<span class="string">&quot;8&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;请输入密码&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="输入和未输入的颜色变化设置"><a href="#输入和未输入的颜色变化设置" class="headerlink" title="输入和未输入的颜色变化设置"></a>输入和未输入的颜色变化设置</h5><p>使用状态列表图形以及background</p>
<ol>
<li><p>创建根节点selector的xml文件在drawable</p>
</li>
<li><p>一个图形设置默认</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">&quot;@drawable/shape_edit_normal&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>一个图形设置获得焦点时刻(state_focused)就改变图片</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_focused</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:drawable</span>=<span class="string">&quot;@drawable/shape_edit_focus&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>设置对应EditText标签下面的backgroud为@drawable&#x2F;状态列表图形</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag"><span class="attr">...</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:hint</span>=<span class="string">&quot;我的边框是圆角&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;@drawable/edittext_selector&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="焦点变更监听器OnFocusChangeListener"><a href="#焦点变更监听器OnFocusChangeListener" class="headerlink" title="焦点变更监听器OnFocusChangeListener"></a>焦点变更监听器OnFocusChangeListener</h3><p>EditText无法设置minlength属性.我们可以通过焦点变更监听器实现.</p>
<h5 id="EditText点击触发事件说明"><a href="#EditText点击触发事件说明" class="headerlink" title="EditText点击触发事件说明"></a>EditText点击触发事件说明</h5><ul>
<li>第一次点击：<strong>触发焦点变更事件</strong>(光标在不同编辑框切换就会触发)</li>
<li>第二次点击：<strong>触发点击事件</strong></li>
</ul>
<p>当切换焦点(也就是第一次点击)的时候，就检查EditText的长度是否符合.</p>
<h5 id="使用方式-1"><a href="#使用方式-1" class="headerlink" title="使用方式"></a>使用方式</h5><ol>
<li>类实现<strong>View.OnFocusChangeListener</strong></li>
<li>重写<strong>onFocusChange</strong>方法</li>
<li>给<strong>EditText</strong>组件添加<strong>setOnFocusChangeListener（this）</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//类实现View.OnFocusChangeListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginFocusChange</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">View</span>.OnFocusChangeListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> EditText editText;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_login_focus_change);</span><br><span class="line">        <span class="comment">//给EditText组件添加setOnFocusChangeListener（this）</span></span><br><span class="line">        <span class="type">EditText</span> <span class="variable">view</span> <span class="operator">=</span> findViewById(R.id.MyPassword);</span><br><span class="line">        view.setOnFocusChangeListener(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">        editText = findViewById(R.id.MyPassword);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重写onFocusChange方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onFocusChange</span><span class="params">(View view, <span class="type">boolean</span> hasFocus)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(view.getId()==R.id.MyPassword&amp;&amp;hasFocus)&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> editText.getText().toString();</span><br><span class="line">            <span class="keyword">if</span> (TextUtils.isEmpty(s) || s.length() &lt; <span class="number">11</span>) &#123;</span><br><span class="line">                <span class="comment">//重回密码的光标</span></span><br><span class="line">                editText.requestFocus();</span><br><span class="line">                Toast.makeText(<span class="built_in">this</span>,<span class="string">&quot;请输入11位手机号码&quot;</span>,Toast.LENGTH_SHORT).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="文本变化监听器"><a href="#文本变化监听器" class="headerlink" title="文本变化监听器"></a>文本变化监听器</h3><p>当用户输入位数达到后自动关闭键盘.</p>
<h4 id="关闭软键盘"><a href="#关闭软键盘" class="headerlink" title="关闭软键盘"></a>关闭软键盘</h4><p>输入法软键盘由系统服务<strong>INPUT_METHOD_SERVICE</strong>管理.(必须是EidtText类才能正常关闭软键盘)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">hideOneInputMethod</span><span class="params">(Activity activity, View view)</span>&#123;</span><br><span class="line">    <span class="type">InputMethodManager</span> <span class="variable">manager</span> <span class="operator">=</span> (InputMethodManager) activity.getSystemService(Context.INPUT_METHOD_SERVICE);</span><br><span class="line">    manager.hideSoftInputFromWindow(view.getWindowToken(),<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="用文本变化监听器TextWatcher判断输入文字是否达到指定位"><a href="#用文本变化监听器TextWatcher判断输入文字是否达到指定位" class="headerlink" title="用文本变化监听器TextWatcher判断输入文字是否达到指定位"></a><strong>用文本变化监听器TextWatcher判断输入文字是否达到指定位</strong></h4><h5 id="文本监听器接口TextWatcher功能"><a href="#文本监听器接口TextWatcher功能" class="headerlink" title="文本监听器接口TextWatcher功能"></a>文本监听器接口TextWatcher功能</h5><p>实时监控当前已输入的文本长度.</p>
<h5 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h5><ol>
<li>类<strong>继承TextWatcher</strong>并实现</li>
<li>重写3个方法<ul>
<li><strong>beforeTextChanged</strong>：文本改变之前触发</li>
<li><strong>onTextChanged</strong>：文本改变过程中触发</li>
<li><strong>afterTextChanged</strong>：文本改变之后触发.(建议使用)</li>
</ul>
</li>
<li>给<strong>EditText</strong>组件添加<strong>addTextChangedListener(继承TextWatcher类的实例)</strong></li>
</ol>
<h5 id="java代码-1"><a href="#java代码-1" class="headerlink" title="java代码"></a>java代码</h5><ol>
<li><pre><code class="java">@Override
public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) &#123;

&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2. ```java</span><br><span class="line">   @Override</span><br><span class="line">   public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) &#123;</span><br><span class="line">   </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><pre><code class="java">@Override
public void afterTextChanged(Editable editable) &#123;
    String s = editable.toString();
    if((s.length()==11&amp;&amp;mMaxLength==11)||(s.length()==6&amp;&amp;mMaxLength==6))&#123;
        hideOneInputMethod(MyTextWatch.this,editText);
    &#125;

&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 5.4获取对话框的选择结果</span><br><span class="line"></span><br><span class="line">### 提醒对话框AlertDialog</span><br><span class="line"></span><br><span class="line">#### 功能和效果</span><br><span class="line"></span><br><span class="line">弹出确认,提示，选择等窗体功能</span><br><span class="line"></span><br><span class="line">![屏幕截图 2021-10-26 154202](/image/屏幕截图_2021-10-26_154202.jpg)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 创建和生成以及显示</span><br><span class="line"></span><br><span class="line">1. **创建建造器AlertDialog.Builder对象**</span><br><span class="line"></span><br><span class="line">   ```java</span><br><span class="line">   AlertDialog.Builder builder = new AlertDialog.Builder(this);</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>设置属性</p>
</li>
<li><p>调用<strong>AlertDialog.Builder对象</strong>的<strong>create方法</strong>生成<strong>对话框实例</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">AlertDialog</span> <span class="variable">alertDialog</span> <span class="operator">=</span> builder.create();</span><br></pre></td></tr></table></figure>
</li>
<li><p>调用<strong>对话框实例</strong>的<strong>show方法</strong>展示对话框</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alertDialog.show();</span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showMyDialog</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//创建提醒对话框的建造器</span></span><br><span class="line">    AlertDialog.<span class="type">Builder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(<span class="built_in">this</span>);</span><br><span class="line">    <span class="comment">//设置对话框的标题文本</span></span><br><span class="line">    builder.setTitle(<span class="string">&quot;尊敬的用户&quot;</span>);</span><br><span class="line">    builder.setMessage(<span class="string">&quot;你真的要卸载我吗?&quot;</span>);</span><br><span class="line">    builder.setPositiveButton(<span class="string">&quot;残忍卸载&quot;</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">            textView.setText(<span class="string">&quot;成功卸载&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    builder.setNegativeButton(<span class="string">&quot;我再想想&quot;</span>, <span class="keyword">new</span> <span class="title class_">DialogInterface</span>.OnClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(DialogInterface dialogInterface, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">            textView.setText(<span class="string">&quot;放弃卸载&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//根据构造器构建提醒对话框对象</span></span><br><span class="line">    <span class="type">AlertDialog</span> <span class="variable">alertDialog</span> <span class="operator">=</span> builder.create();</span><br><span class="line">    <span class="comment">//显示提醒对话框</span></span><br><span class="line">    alertDialog.show();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="设置属性（在java代码中）"><a href="#设置属性（在java代码中）" class="headerlink" title="设置属性（在java代码中）"></a>设置属性（在java代码中）</h4><ol>
<li><strong>setIcon</strong>：标题图标</li>
<li><strong>setTitle</strong>：标题文本</li>
<li><strong>setMessage</strong>：内容文本</li>
<li><strong>setPostitiveButton</strong>：肯定按钮（需要重写内部方法）</li>
<li><strong>setNegativeButton</strong>：否定按钮（需要重写内部方法）</li>
<li><strong>setNeutralButton</strong>：中性按钮(需要重写内部方法)</li>
</ol>
<h3 id="日期对话框DatePickerDialog"><a href="#日期对话框DatePickerDialog" class="headerlink" title="日期对话框DatePickerDialog"></a>日期对话框DatePickerDialog</h3><h4 id="嵌入式日期选择器-不常用-DatePicker"><a href="#嵌入式日期选择器-不常用-DatePicker" class="headerlink" title="嵌入式日期选择器(不常用)DatePicker"></a>嵌入式日期选择器(不常用)DatePicker</h4><h5 id="效果-5"><a href="#效果-5" class="headerlink" title="效果"></a>效果</h5><p><img src="/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_172427-16352402965221.jpg" alt="屏幕截图 2021-10-26 172427"></p>
<h5 id="XML代码-DatePicker"><a href="#XML代码-DatePicker" class="headerlink" title="XML代码(DatePicker)"></a>XML代码(DatePicker)</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">DatePicker</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="弹出式日期选择器-常用-DatePickerDialog"><a href="#弹出式日期选择器-常用-DatePickerDialog" class="headerlink" title="弹出式日期选择器(常用)DatePickerDialog"></a>弹出式日期选择器(常用)DatePickerDialog</h4><p>DatePickerDialog相当于DatePicker装在AlertDialog</p>
<h5 id="效果-6"><a href="#效果-6" class="headerlink" title="效果"></a>效果</h5><p><img src="/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_172633.jpg" alt="屏幕截图 2021-10-26 172633"></p>
<h5 id="弹出方式的java代码"><a href="#弹出方式的java代码" class="headerlink" title="弹出方式的java代码"></a>弹出方式的java代码</h5><ol>
<li>在xml设置一个按钮</li>
<li>OnClick方法中<strong>创建DatePickerDialog实例</strong></li>
<li>填入选择日期（可以通过Calendar实现）</li>
<li>调用DatePickerDialog对象中的<strong>show方法.</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建日历的一个实例</span></span><br><span class="line"><span class="type">Calendar</span> <span class="variable">calendar</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line"><span class="comment">//构建一个日期对话框</span></span><br><span class="line"><span class="type">DatePickerDialog</span> <span class="variable">datePickerDialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatePickerDialog</span>(<span class="built_in">this</span>, <span class="built_in">this</span>, calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH));</span><br><span class="line"><span class="comment">//显示日期对话框</span></span><br><span class="line">datePickerDialog.show();</span><br></pre></td></tr></table></figure>



<h5 id="监听器OnDateSetListener-获取日期"><a href="#监听器OnDateSetListener-获取日期" class="headerlink" title="监听器OnDateSetListener(获取日期)"></a>监听器OnDateSetListener(获取日期)</h5><ol>
<li>类继承<strong>DatePickerDialog.OnDateSetListener</strong>接口并实现</li>
<li>重写<strong>onDateSet</strong>方法</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//一旦点击日期对话框上的确定按钮，就会触发监听器的onDateSet方法</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDateSet</span><span class="params">(DatePicker datePicker, <span class="type">int</span> year, <span class="type">int</span> mothOfYear, <span class="type">int</span> dayOfMonth)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">format</span> <span class="operator">=</span> String.format(<span class="string">&quot;你选择的日期时%d年%d月%d日&quot;</span>, year, mothOfYear, dayOfMonth);</span><br><span class="line">    textView.setText(format);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="注意onDateSet方法中的月份参数是从0开始的"><a href="#注意onDateSet方法中的月份参数是从0开始的" class="headerlink" title="注意onDateSet方法中的月份参数是从0开始的"></a>注意onDateSet方法中的月份参数是从0开始的</h6><h3 id="时间对话框TimePuckerDialog"><a href="#时间对话框TimePuckerDialog" class="headerlink" title="时间对话框TimePuckerDialog"></a>时间对话框TimePuckerDialog</h3><h4 id="嵌入式时间选择器TimePicker"><a href="#嵌入式时间选择器TimePicker" class="headerlink" title="嵌入式时间选择器TimePicker"></a><strong>嵌入式时间选择器TimePicker</strong></h4><h5 id="效果-7"><a href="#效果-7" class="headerlink" title="效果"></a>效果</h5><p><img src="/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_173658-16352410711033.jpg" alt="屏幕截图 2021-10-26 173658"></p>
<h5 id="XML代码-1"><a href="#XML代码-1" class="headerlink" title="XML代码"></a>XML代码</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TimePicker</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>





<h4 id="弹出式时间选择器TimePickerDialog"><a href="#弹出式时间选择器TimePickerDialog" class="headerlink" title="弹出式时间选择器TimePickerDialog"></a><strong>弹出式时间选择器TimePickerDialog</strong></h4><h5 id="效果-8"><a href="#效果-8" class="headerlink" title="效果"></a>效果</h5><p><img src="/Liust1918.githud.io/image/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_2021-10-26_173716-16352410790354.jpg" alt="屏幕截图 2021-10-26 173716"></p>
<h5 id="弹出方式的java代码-1"><a href="#弹出方式的java代码-1" class="headerlink" title="弹出方式的java代码"></a>弹出方式的java代码</h5><ol>
<li>在XML中设置一个按钮</li>
<li>OnClick方法中<strong>创建TimePickerDialog实例</strong></li>
<li>填入选择时间（可以通过Calendar实现）</li>
<li>调用<strong>TimePickerDialog</strong>对象中的<strong>show方法.</strong></li>
<li><strong>注意TimePickerDialog构造方法的最后一个参数：是否采用24小时制</strong><ul>
<li>true：0~23</li>
<li>false：12小时</li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">       <span class="keyword">if</span> (view.getId() == R.id.showTimePickerDialog) &#123;</span><br><span class="line">           <span class="type">Calendar</span> <span class="variable">calendar</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">           <span class="type">TimePickerDialog</span> <span class="variable">timePickerDialog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TimePickerDialog</span>(<span class="built_in">this</span>, <span class="built_in">this</span>,</span><br><span class="line">                   calendar.get(Calendar.HOUR_OF_DAY),</span><br><span class="line">                   calendar.get(Calendar.MINUTE),</span><br><span class="line">                   <span class="literal">true</span>);</span><br><span class="line">           timePickerDialog.show();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<h5 id="监听器OnTimeSetListener-获取小时和分钟"><a href="#监听器OnTimeSetListener-获取小时和分钟" class="headerlink" title="监听器OnTimeSetListener(获取小时和分钟)"></a>监听器OnTimeSetListener(获取小时和分钟)</h5><ol>
<li><p>类继承<strong>TimePickerDialog.OnTimeSetListener</strong>接口并实现</p>
</li>
<li><p>重写<strong>onTimeSet</strong>方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onTimeSet</span><span class="params">(TimePicker timePicker, <span class="type">int</span> hourOfDay, <span class="type">int</span> minute)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">format</span> <span class="operator">=</span> String.format(<span class="string">&quot;你选择的时间%d时%d分&quot;</span>, hourOfDay, minute);</span><br><span class="line">    textView.setText(format);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="6-数据存储"><a href="#6-数据存储" class="headerlink" title="6.数据存储"></a>6.数据存储</h1><h2 id="6-1共享参数SharedPreferences"><a href="#6-1共享参数SharedPreferences" class="headerlink" title="6.1共享参数SharedPreferences"></a>6.1共享参数SharedPreferences</h2><h3 id="6-1-1基本概念"><a href="#6-1-1基本概念" class="headerlink" title="6.1.1基本概念"></a>6.1.1基本概念</h3><h4 id="组成-1"><a href="#组成-1" class="headerlink" title="组成"></a>组成</h4><ol>
<li>轻量级存储工具</li>
<li>key-value存储</li>
<li>作用类似java的properties</li>
<li>XML存储</li>
</ol>
<h4 id="保存地址"><a href="#保存地址" class="headerlink" title="保存地址"></a>保存地址</h4><ul>
<li>&#x2F;data&#x2F;data&#x2F;应用包名&#x2F;shared_prefs&#x2F;文件名.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&#x27;1.0&#x27; encoding=&#x27;utf-8&#x27; standalone=&#x27;yes&#x27; ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span>吃个饭<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">float</span> <span class="attr">name</span>=<span class="string">&quot;weight&quot;</span> <span class="attr">value</span>=<span class="string">&quot;85.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">boolean</span> <span class="attr">name</span>=<span class="string">&quot;isMarry&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">int</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;782&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">float</span> <span class="attr">name</span>=<span class="string">&quot;height&quot;</span> <span class="attr">value</span>=<span class="string">&quot;89.0&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="如何在Android-studio中找到"><a href="#如何在Android-studio中找到" class="headerlink" title="如何在Android studio中找到"></a>如何在Android studio中找到</h4><ol>
<li>连接手机或者虚拟手机</li>
<li><strong>看AndroidStudio右下角的DeviceFileExplorer</strong></li>
<li>按地址找</li>
</ol>
<p>SQLlite数据库同理</p>
<h4 id="使用场合"><a href="#使用场合" class="headerlink" title="使用场合"></a>使用场合</h4><ol>
<li>独立简单数据</li>
<li>文本类型的数据</li>
<li>需要持久化存储的数据</li>
</ol>
<p>例子:app的配置信息,用户行为信息,临时需要保存的片段</p>
<h3 id="6-1-2写入和读取共享参数"><a href="#6-1-2写入和读取共享参数" class="headerlink" title="6.1.2写入和读取共享参数"></a>6.1.2写入和读取共享参数</h3><h4 id="获得共享参数实例"><a href="#获得共享参数实例" class="headerlink" title="获得共享参数实例"></a>获得共享参数实例</h4><ol>
<li><p><strong>getSharedPreferences</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">SharedPreferences</span> <span class="variable">share</span> <span class="operator">=</span> getSharedPreferences(<span class="string">&quot;share&quot;</span>, MODE_PRIVATE);</span><br><span class="line"><span class="comment">//SharedPreferences share = getSharedPreferences(&quot;文件名&quot;, 操作模式);</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="写入"><a href="#写入" class="headerlink" title="写入"></a>写入</h4><ol>
<li>使用共享参数实例中的edit()方法</li>
<li>获得Editor类,然后调用putXXX(key值, 输入值)方法写入内容</li>
<li>获得Editor类调用commit(),来提交修改</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获得编辑器的对象</span></span><br><span class="line">android.content.SharedPreferences.<span class="type">Editor</span> <span class="variable">edit</span> <span class="operator">=</span> share.edit();</span><br><span class="line"><span class="comment">//写入数据</span></span><br><span class="line"><span class="comment">//edit.putString(key值, 输入值);</span></span><br><span class="line">edit.putString(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;测试&quot;</span>);</span><br><span class="line"><span class="comment">//提交编辑器的修改</span></span><br><span class="line">edit.commit();</span><br></pre></td></tr></table></figure>



<h4 id="读取"><a href="#读取" class="headerlink" title="读取"></a>读取</h4><ol>
<li><p>使用共享参数实例中的的各种getXXX(key值，默认值)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//共享参数实例.getString(key值，默认值);</span></span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> sharedPreferences.getString(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="6-2App的全局内存"><a href="#6-2App的全局内存" class="headerlink" title="6.2App的全局内存"></a>6.2App的全局内存</h2><h3 id="6-2-1Application的生命周期"><a href="#6-2-1Application的生命周期" class="headerlink" title="6.2.1Application的生命周期"></a>6.2.1Application的生命周期</h3><h4 id="运行周期"><a href="#运行周期" class="headerlink" title="运行周期"></a>运行周期</h4><p>存在唯一一个Application对象在整个应用的运行周期.</p>
<h5 id="适用存储数据"><a href="#适用存储数据" class="headerlink" title="适用存储数据"></a>适用存储数据</h5><ol>
<li>会频繁读取的信息</li>
<li>不方便由意图传递的数据</li>
<li>容易因频繁分配内容而导致内存泄漏的对象</li>
</ol>
<h4 id="配置Application全局内容"><a href="#配置Application全局内容" class="headerlink" title="配置Application全局内容"></a>配置Application全局内容</h4><ol>
<li><p>创建一个继承Application的类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainApplication</span> <span class="keyword">extends</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在<strong>AndroidManifest.xml</strong>文件中给<strong>application</strong>节点添加<strong>name</strong>属性(android:name&#x3D;”.MainApplication”)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">package</span>=<span class="string">&quot;com.example.type6chapter&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span>      </span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">&quot;.MainApplication&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">...</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">       ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>让name属性应用上面的类.（作为一个入口类）</p>
</li>
<li><p>在整个类重写方法</p>
<ul>
<li><strong>onCreate</strong>:在App启动时调用</li>
<li><strong>onTerminate</strong>:没用的</li>
<li>**onConfigurationChanged:**在配置改变时调用.</li>
</ul>
</li>
</ol>
<h4 id="为继承Application的类设置单例模式"><a href="#为继承Application的类设置单例模式" class="headerlink" title="为继承Application的类设置单例模式"></a>为继承Application的类设置单例模式</h4><ol>
<li><p>设置该类的<strong>私有静态成员属性</strong></p>
</li>
<li><p>在OnCreate方法中为上面的<strong>成员属性实例化</strong></p>
</li>
<li><p>设置<strong>getInstance</strong>()返回该成员属性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.设置该类的私有静态成员属性</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> MainApplication mainApplication;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.在OnCreate方法中为上面的成员属性实例化</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onCreate();</span><br><span class="line">    <span class="comment">//app一打开就生成全局变量MainApplication对象</span></span><br><span class="line">    mainApplication=<span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.设置getInstance()返回该成员属性</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> MainApplication <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mainApplication;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="6-2-2全局变量写入"><a href="#6-2-2全局变量写入" class="headerlink" title="6.2.2全局变量写入"></a>6.2.2全局变量写入</h3><ol>
<li>在全局变量类中设置私有成员变量</li>
<li>在OnCreate()方法中实例化变量</li>
<li>设置一个方法返回该变量</li>
</ol>
<h3 id="6-2-3全局变量读取"><a href="#6-2-3全局变量读取" class="headerlink" title="6.2.3全局变量读取"></a>6.2.3全局变量读取</h3><ol>
<li><p><strong>全局变量类.返回对象方法()</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">例如:MainApplication.getInstance();</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用全局变量类，调用里面的成员变量和成员方法</p>
</li>
</ol>
<h2 id="6-3数据库SQLite"><a href="#6-3数据库SQLite" class="headerlink" title="6.3数据库SQLite"></a>6.3数据库SQLite</h2><h4 id="6-3-1使用Room框架"><a href="#6-3-1使用Room框架" class="headerlink" title="6.3.1使用Room框架"></a>6.3.1使用Room框架</h4><h5 id="Room是什么"><a href="#Room是什么" class="headerlink" title="Room是什么"></a>Room是什么</h5><ol>
<li>谷歌公司开发</li>
<li>基于SQLite</li>
<li>通过注解技术简化数据库操作</li>
<li>第三方框架提供</li>
</ol>
<h5 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h5><ol>
<li><p>在build.gradle中的dependenices节点添加</p>
</li>
<li><p>&#96;&#96;&#96;<br>&#x2F;&#x2F; Room components<br>implementation “androidx.room:room-runtime:2.2.5”<br>annotationProcessor “androidx.room:room-compiler:2.2.5”</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 使用Room(类似Hibernate操作)</span><br><span class="line"></span><br><span class="line">##### 配置实体类@Entity</span><br><span class="line"></span><br><span class="line">1. 给Pojo类添加类级别的**@Entity**</span><br><span class="line">2. 设置主键**@PrimaryKey**</span><br><span class="line">   - autoGenerate：主键自增</span><br><span class="line">3. 设置主键**@NonNull**</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##### 设置持久类Dao层@Dao</span><br><span class="line"></span><br><span class="line">1. 创建接口</span><br><span class="line"></span><br><span class="line">2. 让接口继承**@Dao**</span><br><span class="line"></span><br><span class="line">3. 创建方法</span><br><span class="line"></span><br><span class="line">4. 给方法添加SQL注解</span><br><span class="line"></span><br><span class="line">   1. **@Query**</span><br><span class="line"></span><br><span class="line">      - 可以添加具体sql语句</span><br><span class="line"></span><br><span class="line">   2. **@Update**</span><br><span class="line"></span><br><span class="line">      - **onConflict**： 当重复记录要采取的策略</span><br><span class="line"></span><br><span class="line">        - OnConflictStrategy.REPLACE：替换</span><br><span class="line"></span><br><span class="line">          ```java</span><br><span class="line">          @Insert(onConflict = OnConflictStrategy.REPLACE)</span><br><span class="line">          void insertOneBook(BookInfo book);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p><strong>@Insert</strong></p>
<ul>
<li><p><strong>onConflict</strong>： 当重复记录要采取的策略</p>
<ul>
<li><p>OnConflictStrategy.REPLACE：替换</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Insert(onConflict = OnConflictStrategy.REPLACE)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">insertOneBook</span><span class="params">(BookInfo book)</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>@Delete</strong></p>
</li>
</ol>
</li>
</ol>
<h5 id="创建数据库类RoomDatabase"><a href="#创建数据库类RoomDatabase" class="headerlink" title="创建数据库类RoomDatabase"></a>创建数据库类RoomDatabase</h5><ol>
<li>创建<strong>抽象类</strong>并且继承<strong>RoomDatabase类</strong></li>
<li>给类添加类级别**@Database**注解<ol>
<li><strong>entites：</strong>数据库的实体类数组(也就是表)</li>
<li><strong>version</strong>：数据库版本号</li>
<li><strong>exportSchema：false</strong>：是否导出数据库信息的json串(一般用false,不然要指定build.gradle指定json文件的保存路径)</li>
</ol>
</li>
<li>一个返回<strong>数据库中某个表</strong>的<strong>持久化类</strong>(@Dao的类)的<strong>抽象方法</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Database(entities = &#123;BookInfo.class,UserInfo.class&#125;,version = 1,exportSchema = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">BookDatabase</span> <span class="keyword">extends</span> <span class="title class_">RoomDatabase</span> &#123;</span><br><span class="line">    <span class="comment">//获取数据库中某表的持久化对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> BookDao <span class="title function_">bookDao</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="在全局变量类中创建唯一实例"><a href="#在全局变量类中创建唯一实例" class="headerlink" title="在全局变量类中创建唯一实例"></a>在全局变量类中创建唯一实例</h5><ol>
<li>设置私有的成员变量的数据库对象</li>
<li>在OnCreat()方法实例化上面的那个数据库对象</li>
<li>设置getXXX()方法返回整个数据库对象</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.</span></span><br><span class="line"><span class="keyword">private</span> BookDatabase bookDatabase;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onCreate();</span><br><span class="line">   ...</span><br><span class="line">    <span class="comment">//构建数据库的实例(单例模式)</span></span><br><span class="line">    bookDatabase= Room.databaseBuilder(mainApplication,</span><br><span class="line">            BookDatabase.class,</span><br><span class="line">            <span class="string">&quot;BookInfo&quot;</span></span><br><span class="line">    ).addMigrations()</span><br><span class="line">            <span class="comment">//允许潜移数据库(发生数据库变更时,Room默认删除原来数据库在创建一个新的数据库.如此一来原来的记录会丢失，所有要改变潜移方式以便保存原有记录)</span></span><br><span class="line">            .allowMainThreadQueries()</span><br><span class="line">            <span class="comment">//允许在主线程中操作数据库(Room默认不能在主线程操作数据库)</span></span><br><span class="line">            .build();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//3.获取数据库的实例</span></span><br><span class="line">    <span class="keyword">public</span> BookDatabase <span class="title function_">getBookDatabase</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> bookDatabase;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h5 id="具体引用"><a href="#具体引用" class="headerlink" title="具体引用"></a>具体引用</h5><ol>
<li>获得全局变量类MainApplication.getInstance()</li>
<li>获得数据库类.getBookDatabase()</li>
<li>获取持久类.bookDao()</li>
<li>调用持久类中的sql方法.getAllBook();</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MainApplication.getInstance().getBookDatabase().bookDao().getAllBook();</span><br></pre></td></tr></table></figure>



<h4 id="6-2-2原生用法-不推荐-SQLite"><a href="#6-2-2原生用法-不推荐-SQLite" class="headerlink" title="6.2.2原生用法(不推荐)SQLite"></a>6.2.2原生用法(不推荐)SQLite</h4><h5 id="注意-1"><a href="#注意-1" class="headerlink" title="注意"></a>注意</h5><ol>
<li>SQlite是嵌入式数据库</li>
<li>SQLite的sql语法与通用的sql语句不同</li>
<li>只用到数据定义和数据操纵<ul>
<li>数据定义语言DDL<ol>
<li>创建表格<ul>
<li>sql不分大小写</li>
<li><strong>不支持boolean类型(用整型处理)</strong></li>
</ul>
</li>
<li>删除表格</li>
<li>修改表结构</li>
</ol>
</li>
<li>数据操纵语言DML<ul>
<li>增删改查</li>
</ul>
</li>
</ul>
</li>
</ol>
<h5 id="数据库管理器SQLiteDatabase"><a href="#数据库管理器SQLiteDatabase" class="headerlink" title="数据库管理器SQLiteDatabase"></a>数据库管理器SQLiteDatabase</h5><h6 id="创建数据库openOrCreateDatabase"><a href="#创建数据库openOrCreateDatabase" class="headerlink" title="创建数据库openOrCreateDatabase"></a>创建数据库openOrCreateDatabase</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">SQLiteDatabase</span> <span class="variable">sqLiteDatabase</span> <span class="operator">=</span> openOrCreateDatabase(getFilesDir() + <span class="string">&quot;/test.db&quot;</span>, Context.MODE_PRIVATE, <span class="literal">null</span>);</span><br></pre></td></tr></table></figure>

<h6 id="删除数据库deleteDatabase"><a href="#删除数据库deleteDatabase" class="headerlink" title="删除数据库deleteDatabase"></a>删除数据库deleteDatabase</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deleteDatabase(getFilesDir()+<span class="string">&quot;/test.db&quot;</span>);</span><br></pre></td></tr></table></figure>

<h6 id="API使用"><a href="#API使用" class="headerlink" title="API使用"></a>API使用</h6><ol>
<li>管理类(数据库层)<ul>
<li><strong>openDatabase</strong>：打开指定路径的数据库</li>
<li><strong>isOpen</strong>：判断数据库是否已打开</li>
<li><strong>close</strong>：关闭数据库</li>
<li><strong>getVersion</strong>：获取数据库的版本号</li>
<li><strong>setVersion</strong>：设置数据库的版本号</li>
</ul>
</li>
<li>事务类(事务操作)<ul>
<li><strong>beginTransaction</strong>：开始事务.</li>
<li><strong>setTransactionSuccessful</strong>：设置事务的成功标注</li>
<li><strong>endTransaction</strong>：结束前面的事务(如果前面没使用setTransactionSuccessful，就事务回调)</li>
</ul>
</li>
<li>数据处理类<ul>
<li><strong>execSQL</strong>：执行SQL语句(删表，建表，改表结构)</li>
<li><strong>delete</strong></li>
<li><strong>update</strong></li>
<li><strong>insert</strong></li>
<li><strong>query</strong>：返回结果集的游标</li>
<li><strong>rawQuery</strong>：执行SQL语句，返回结构集的游标</li>
</ul>
</li>
</ol>
<h5 id="数据库帮助器SQLiteOpenHelper"><a href="#数据库帮助器SQLiteOpenHelper" class="headerlink" title="数据库帮助器SQLiteOpenHelper"></a>数据库帮助器SQLiteOpenHelper</h5><p>防止数据库重复打开</p>
<ol>
<li><p>创建持久层类并且继承<strong>SQLiteOpenHelper</strong>类</p>
</li>
<li><p>重写<strong>onCreate</strong>和<strong>onUpgrade</strong>方法</p>
<ul>
<li><strong>onCreate</strong>：第一次打开数据库创建表</li>
<li><strong>onUpgrade</strong>：数据库版本升高时执行</li>
</ul>
</li>
<li><p>获取单例对象</p>
</li>
<li><p>打开数据库读取&#x2F;写入连接(读锁和写锁)</p>
<ul>
<li><p>读取连接<strong>getReadableDatabase</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQLiteDatabase a=SQLiteDatabase对象.getReadableDatabase();</span><br></pre></td></tr></table></figure>
</li>
<li><p>写入连接<strong>getWritableDatabase</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQLiteDatabase a=SQLiteDatabase对象.getWritableDatabase();</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>增删改查</p>
<ul>
<li><p>增改:使用<strong>ContentValues</strong>类</p>
<ul>
<li><p>ContentValues类似Map</p>
</li>
<li><p>键key只能是字符串</p>
</li>
<li><p>&#96;&#96;&#96;java<br>ContentValues contentValues &#x3D; new ContentValues();<br>contentValues.put(“name”,userInfo.getName());<br>&#x2F;&#x2F;执行更新操作 返回更新记录数量<br>&#x2F;&#x2F;condition是条件<br>mDB.update(TABLE_NAME,contentValues,condition,null);<br>&#x2F;&#x2F;result&#x3D;mDB.insert(TABLE_NAME,””,contentValues);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   - 查:使用到**游标类Cursor**类</span><br><span class="line"></span><br><span class="line">     - query和queryQuery方法返回**Cursor类**</span><br><span class="line">     - 游标遍历</span><br><span class="line">       1. 游标控制类(指定游标状态)</span><br><span class="line">          - close：关闭游标</span><br><span class="line">          - isClosed：游标是否关闭</span><br><span class="line">          - isFirst：游标是否在开头</span><br><span class="line">          - isLast：游标是否在末尾</span><br><span class="line">       2. 游标移动类(游标到指定位置)</span><br><span class="line">          - moveToFirst：到开头</span><br><span class="line">          - moveToLast：到末尾</span><br><span class="line">          - moveToNext：下一条记录</span><br><span class="line">          - moveToPrevious：上一条记录</span><br><span class="line">          - move：移动若干条记录</span><br><span class="line">          - moveToPosition：到指定位置的路径</span><br><span class="line">       3. 记录类(获取记录的数量，类型，取值)</span><br><span class="line">          - getCount：获取结果记录的数量</span><br><span class="line">          - getType：获取指定字段的字段类型</span><br><span class="line">          - geInt：</span><br><span class="line">          - getLong</span><br><span class="line">          - getFloat</span><br><span class="line">          - getString</span><br><span class="line"></span><br><span class="line">   - 删</span><br><span class="line"></span><br><span class="line">6. 关闭数据库连接close</span><br><span class="line"></span><br><span class="line">   ```java</span><br><span class="line">   SQLiteDatabase对象.close();</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="6-3存储卡文件"><a href="#6-3存储卡文件" class="headerlink" title="6.3存储卡文件"></a>6.3存储卡文件</h2><h3 id="6-3-1私有存储空间和公有存储空间"><a href="#6-3-1私有存储空间和公有存储空间" class="headerlink" title="6.3.1私有存储空间和公有存储空间"></a>6.3.1私有存储空间和公有存储空间</h3><h5 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h5><ol>
<li>Android7.0将存储卡分为<ul>
<li>私有存储<ul>
<li>系统分配每个app默认的空间</li>
<li>无权限</li>
<li>app卸载就没</li>
</ul>
</li>
<li>公共存储<ul>
<li>要权限</li>
<li>即使在AndroidManifest.xml声明，系统也不给</li>
</ul>
</li>
</ul>
</li>
</ol>
<h5 id="获取私有空间getExternalFilesDir"><a href="#获取私有空间getExternalFilesDir" class="headerlink" title="获取私有空间getExternalFilesDir"></a>获取私有空间getExternalFilesDir</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获得当前App私有存储路径</span></span><br><span class="line"><span class="type">String</span> <span class="variable">privateFilePath</span> <span class="operator">=</span> getExternalFilesDir(Environment.DIRECTORY_DOWNLOADS).toString();</span><br></pre></td></tr></table></figure>



<h5 id="获取公共空间Environment-getExternalStoragePublicDirectory"><a href="#获取公共空间Environment-getExternalStoragePublicDirectory" class="headerlink" title="获取公共空间Environment.getExternalStoragePublicDirectory"></a>获取公共空间Environment.getExternalStoragePublicDirectory</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获得系统公共存储路径</span></span><br><span class="line"><span class="type">String</span> <span class="variable">publicFilePath</span> <span class="operator">=</span> Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).toString();</span><br></pre></td></tr></table></figure>



<h3 id="6-3-2文本文件的读写"><a href="#6-3-2文本文件的读写" class="headerlink" title="6.3.2文本文件的读写"></a>6.3.2文本文件的读写</h3><p>把文本字符串变成byte数组写入流</p>
<h5 id="读取FileInputStream"><a href="#读取FileInputStream" class="headerlink" title="读取FileInputStream"></a>读取FileInputStream</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//读取指定的文件路径构建文件输入流对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">openText</span><span class="params">(String path)</span> &#123;</span><br><span class="line">    String readStr=<span class="string">&quot;&quot;</span>;</span><br><span class="line">   ...</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fileInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(path);</span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[fileInputStream.available()];</span><br><span class="line">        fileInputStream.read(bytes);</span><br><span class="line">        readStr=<span class="keyword">new</span> <span class="title class_">String</span>(bytes);</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> readStr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="写入FileOutputStream"><a href="#写入FileOutputStream" class="headerlink" title="写入FileOutputStream"></a>写入FileOutputStream</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//把字符串保存到指定路径的文本文件</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">saveText</span><span class="params">(String path,String txt)</span>&#123;</span><br><span class="line">    <span class="comment">//根据指定的文件路径构建文件输出流对象</span></span><br><span class="line">    ...</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fileOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(path);</span><br><span class="line">        fileOutputStream.write(txt.getBytes());</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="6-3-3图片文件的读写以及使用"><a href="#6-3-3图片文件的读写以及使用" class="headerlink" title="6.3.3图片文件的读写以及使用"></a>6.3.3图片文件的读写以及使用</h3><h5 id="基本概念Bitmap"><a href="#基本概念Bitmap" class="headerlink" title="基本概念Bitmap"></a>基本概念Bitmap</h5><ol>
<li><p>使用<strong>位图数据Bitmap</strong>类型处理图像数据</p>
</li>
<li><p>从bitmap工厂方法的<strong>BitmapFactory</strong>中调用</p>
<ol>
<li><p><strong>decodeResource</strong>：从资源文件获取图片</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Bitmap</span> <span class="variable">bitmap</span> <span class="operator">=</span> BitmapFactory.decodeResource(getResources(), R.drawable.图片名);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>decodeFile</strong>：指定路径</p>
<ul>
<li><strong>Android10开始不能使用</strong></li>
</ul>
</li>
<li><p><strong>decodeStream</strong>：文件输入流获取</p>
</li>
</ol>
</li>
</ol>
<h5 id="读取-1"><a href="#读取-1" class="headerlink" title="读取"></a>读取</h5><ol>
<li>获得位图类型Bitmap对象</li>
<li><strong>ImageView</strong>三种使用<ol>
<li><strong>setImageResource</strong>：R.drawbale.去掉拓展名的图片名称</li>
<li><strong>setImageBitMap</strong>：BitMap类型</li>
<li><strong>setImageURI</strong>：Uri类型（<strong>Uri.parse（图片路径）</strong>）</li>
</ol>
</li>
</ol>
<h5 id="写入-1"><a href="#写入-1" class="headerlink" title="写入"></a>写入</h5><ol>
<li>获取位图类型Bitmap对象</li>
<li>调用Bitmap对象中的<strong>compress方法</strong>获取<strong>文件输出流</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//保存图片到文件</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">saveImage</span><span class="params">(String path,Bitmap bitmap)</span>&#123;</span><br><span class="line">    <span class="keyword">try</span> (<span class="type">FileOutputStream</span> <span class="variable">fileOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(path)) &#123;</span><br><span class="line">        <span class="comment">//调用Bitmap对象中的 compress方法 获取 文件输出流</span></span><br><span class="line">        bitmap.compress(Bitmap.CompressFormat.JPEG,<span class="number">80</span>,fileOutputStream);</span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Other-1"><a href="#Other-1" class="headerlink" title="Other"></a>Other</h2><h5 id="图片的三级缓存机制-不用复习"><a href="#图片的三级缓存机制-不用复习" class="headerlink" title="图片的三级缓存机制(不用复习)"></a>图片的三级缓存机制(不用复习)</h5><p>运行内存——&gt;存储卡——&gt;网络下载</p>
<ol>
<li>通过共享参数(运行内存)判断是否首次访问网络图片</li>
<li>如果首次访问网络图片，就从服务器下载图片</li>
<li>通过存储卡存储服务器下载的图片</li>
<li>向数据库写入图片相关操作，返回图片本地存储地址</li>
<li>更新共享参数(运行内存)中的首次访问标志</li>
</ol>
<h5 id="include标签的重用样式"><a href="#include标签的重用样式" class="headerlink" title="include标签的重用样式"></a>include标签的重用样式</h5><ol>
<li>写一个布局</li>
<li>在另一个布局用include引用上面那个布局</li>
<li>这样可以共用一些小布局</li>
</ol>
<h1 id="7-内容共享ContentProvider"><a href="#7-内容共享ContentProvider" class="headerlink" title="7.内容共享ContentProvider"></a>7.内容共享ContentProvider</h1><h5 id="内容组件"><a href="#内容组件" class="headerlink" title="内容组件"></a>内容组件</h5><ol>
<li>内容提供器<strong>ContentProvider</strong></li>
<li>内容解析器<strong>ContentResolver</strong></li>
<li>内容观察者<strong>ContentObserver</strong></li>
</ol>
<h2 id="7-1内容组件在应用之间共享数据"><a href="#7-1内容组件在应用之间共享数据" class="headerlink" title="7.1内容组件在应用之间共享数据"></a>7.1内容组件在应用之间共享数据</h2><h3 id="7-1-1内容提供器ContentProvider封装内部数据的外部访问接口"><a href="#7-1-1内容提供器ContentProvider封装内部数据的外部访问接口" class="headerlink" title="7.1.1内容提供器ContentProvider封装内部数据的外部访问接口"></a>7.1.1内容提供器ContentProvider封装内部数据的外部访问接口</h3><h4 id="功能："><a href="#功能：" class="headerlink" title="功能："></a>功能：</h4><ul>
<li><strong>ContentProvider作为中间接口，不之间保存数据</strong>，</li>
<li>而是通过SQLiteOpenHelper与SQLiteDatabase间接操作底层数据库.</li>
<li>ContentProvider封装SQLite数据库帮助器的<strong>对外的接口.</strong></li>
</ul>
<h4 id="具体使用"><a href="#具体使用" class="headerlink" title="具体使用"></a>具体使用</h4><h5 id="编写数据库帮助器"><a href="#编写数据库帮助器" class="headerlink" title="编写数据库帮助器"></a>编写数据库帮助器</h5><ol>
<li>创建类继承SQLiteOpenHelper</li>
<li>重写onCreate</li>
<li>创建单例模式(getInstance方法)</li>
<li>创建数据库名称的成员变量值</li>
</ol>
<h5 id="创建内容提供器的基础字段类"><a href="#创建内容提供器的基础字段类" class="headerlink" title="创建内容提供器的基础字段类"></a>创建内容提供器的基础字段类</h5><p>整个类相当于告诉本App要什么权限，开放什么东西(Uri)</p>
<ol>
<li><p>创建类继承<strong>BaseColumns</strong></p>
</li>
<li><p>创建私人成员变量的<strong>权限字符串</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String AUTHORITIES=<span class="string">&quot;com.example.type7chapter.provider.UserInfoProvider&quot;</span>;</span><br><span class="line"><span class="comment">//URI的授权串</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建私人成员变量的<strong>访问提供器的外部表名</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span>  String TABLE_NAME= UserDBHelper.TABLE_NAME;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建私人成员变量的<strong>访问提供器的URI</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Uri CONTENT_URI=Uri.parse(<span class="string">&quot;content://&quot;</span>+AUTHORITIES+<span class="string">&quot;/user&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建私人成员变量的<strong>各个字段名称</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String USER_NAME=<span class="string">&quot;name&quot;</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String USER_AGE=<span class="string">&quot;age&quot;</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String USER_HEIGHT=<span class="string">&quot;height&quot;</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String USER_WEIGHT=<span class="string">&quot;weight&quot;</span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="右键菜单创建内容提供器"><a href="#右键菜单创建内容提供器" class="headerlink" title="右键菜单创建内容提供器"></a>右键菜单创建内容提供器</h5><ol>
<li><p><strong>New-&gt;Other-&gt;Content Provider</strong> 创建内容提供器</p>
<ul>
<li>Class Name：<strong>内容提供器的类名称</strong></li>
<li><strong>URI Authorities</strong>：<strong>URI的授权串</strong></li>
</ul>
</li>
<li><p>创建后AnroidManifest.xml的变化</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">provider</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;.UserInfoProvider&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:authorities</span>=<span class="string">&quot;com.example.type7chapter.provider.UserInfoProvider&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:enabled</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:exported</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>新生成的<strong>XXXXProvider类</strong></p>
<ul>
<li><p>该类继承ContentProvider类</p>
</li>
<li><p>重写onCreate,insert,delete,query,update,getType方法</p>
<ol>
<li><p><strong>onCreate</strong>：获取数据库帮助器实例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userDB=UserDBHelper.getInstance(getContext(),<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>给<strong>Uri匹配器中添加指定的数据路径</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">//Uri匹配时的代号</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">USER_INFO</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">UriMatcher</span> <span class="variable">URI_MATCHER</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UriMatcher</span>(UriMatcher.NO_MATCH);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">//向Uri匹配器中添加指定的数据路径</span></span><br><span class="line">        URI_MATCHER.addURI(UserInfoContent.AUTHORITIES,<span class="string">&quot;/user&quot;</span>,USER_INFO);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>insert,delete,query：</p>
<ol>
<li><p>判断Uri中的用户USER_INFO</p>
</li>
<li><p>打开数据库的写入&#x2F;读取连接</p>
</li>
<li><p>操作数据库的insert&#x2F;delete&#x2F;query</p>
</li>
<li><p>关闭数据库</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Uri <span class="title function_">insert</span><span class="params">(Uri uri, ContentValues values)</span> &#123;</span><br><span class="line">    <span class="comment">//匹配Uri中的用户USER_INFO</span></span><br><span class="line">    <span class="keyword">if</span>(URI_MATCHER.match(uri)==USER_INFO)&#123;</span><br><span class="line">        <span class="type">SQLiteDatabase</span> <span class="variable">db</span> <span class="operator">=</span> userDB.getWritableDatabase();</span><br><span class="line">        <span class="type">long</span> <span class="variable">rowid</span> <span class="operator">=</span> db.insert(UserInfoContent.TABLE_NAME, <span class="literal">null</span>, values);</span><br><span class="line">        <span class="comment">//判断插入是否成功</span></span><br><span class="line">        <span class="keyword">if</span>(rowid&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//如果插入成功，就利用新记录的行号生成新的地址</span></span><br><span class="line">            <span class="type">Uri</span> <span class="variable">newUri</span> <span class="operator">=</span> ContentUris.withAppendedId(UserInfoContent.CONTENT_URI, rowid);</span><br><span class="line">            <span class="comment">//通知监听器，数据已经改变</span></span><br><span class="line">            getContext().getContentResolver().notifyChange(newUri,<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//关闭SQLite数据库连接</span></span><br><span class="line">        db.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> uri;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
</li>
</ul>
</li>
<li><p>服务端App的接口封装成功.</p>
</li>
</ol>
<h3 id="7-1-2内容解析器ContentResolver通过外部操作内部数据"><a href="#7-1-2内容解析器ContentResolver通过外部操作内部数据" class="headerlink" title="7.1.2内容解析器ContentResolver通过外部操作内部数据"></a>7.1.2内容解析器ContentResolver通过外部操作内部数据</h3><h5 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h5><ul>
<li>内容解析器是客户端App操作服务端数据的工具</li>
<li>ContenResolver和ContentProvider重写方法以及参数都一样</li>
</ul>
<h5 id="具体使用-1"><a href="#具体使用-1" class="headerlink" title="具体使用"></a>具体使用</h5><ul>
<li><p><strong>getContentResolver</strong>（）：可获得内容解析器的实例</p>
</li>
<li><p>insert方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addUser</span><span class="params">(UserInfo user)</span> &#123;</span><br><span class="line">    <span class="type">ContentValues</span> <span class="variable">contentValues</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>();</span><br><span class="line">    contentValues.put(<span class="string">&quot;name&quot;</span>, user.getName());</span><br><span class="line">    ...</span><br><span class="line">        <span class="comment">//参数一:数据库路径</span></span><br><span class="line">    getContentResolver().insert(UserInfoContent.CONTENT_URI, contentValues);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>delete方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">        <span class="comment">//参数一:数据库路径 参数二:删除条件 </span></span><br><span class="line">getContentResolver().delete(UserInfoContent.CONTENT_URI, <span class="string">&quot;1=1&quot;</span>, <span class="literal">null</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>query方法以及参数（从左向右排）:</p>
<ul>
<li>uri：Uri类型,指定数据库路径</li>
<li>projection：字符串数组，要查询的字段名称列表</li>
<li>selection：字符串类型，查询条件</li>
<li>sortOrder：字符串，排序条件</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">showAllUser</span><span class="params">()</span>&#123;</span><br><span class="line"> ...</span><br><span class="line">    <span class="type">Cursor</span> <span class="variable">cursor</span> <span class="operator">=</span> getContentResolver().query(UserInfoContent.CONTENT_URI, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="7-2内容组件获取通讯信息"><a href="#7-2内容组件获取通讯信息" class="headerlink" title="7.2内容组件获取通讯信息"></a>7.2内容组件获取通讯信息</h2><h3 id="7-2-1动态申请权限"><a href="#7-2-1动态申请权限" class="headerlink" title="7.2.1动态申请权限"></a>7.2.1动态申请权限</h3><h4 id="1-AndroidManifest-xml添加权限配置"><a href="#1-AndroidManifest-xml添加权限配置" class="headerlink" title="1.AndroidManifest.xml添加权限配置"></a>1.AndroidManifest.xml添加权限配置</h4><h5 id="在Android某些版本后，用户某些权限还是必须界面手动开启权限"><a href="#在Android某些版本后，用户某些权限还是必须界面手动开启权限" class="headerlink" title="在Android某些版本后，用户某些权限还是必须界面手动开启权限"></a>在<strong>Android某些版本后，用户某些权限还是必须界面手动开启权限</strong></h5><ul>
<li><p>完整存储卡权限：<strong>Android7.0</strong>后</p>
</li>
<li><p><strong>权限配置后系统也不给开启，要App运行时判断权限开关情况</strong>：<strong>Android6.0</strong>后</p>
</li>
<li><p>关闭公共空间沙盒：<strong>Android10.0</strong>（默认开启沙盒）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在application节点下</span></span><br><span class="line">android:requestLegacyExternalStorage=<span class="string">&quot;true&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>临时关闭公共空间沙盒：Android11 (默认开启沙盒)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">      <span class="comment">//在application节点下</span></span><br><span class="line">android:preserveLegacyExternalStorage=<span class="string">&quot;true&quot;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="添加案例"><a href="#添加案例" class="headerlink" title="添加案例"></a>添加案例</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 存储卡读写 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.READ_EXTERNAL_STORAGE&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Android10新增权限MANAGE_EXTERNAL_STORAGE --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 联系人/通讯录。包括读联系人、写联系人 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.READ_CONTACTS&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.WRITE_CONTACTS&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 短信。包括发送短信、接收短信、读短信 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.SEND_SMS&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.RECEIVE_SMS&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.READ_SMS&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 通话记录。包括读通话记录、写通话记录 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.READ_CALL_LOG&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.WRITE_CALL_LOG&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 安装应用请求，Android8.0需要 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.REQUEST_INSTALL_PACKAGES&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 获取媒体位置（Android10新增权限） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_MEDIA_LOCATION&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/Liust1918.githud.io/image/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20211101192418.jpg" alt="微信图片_20211101192418"></p>
<h4 id="2-检查App是否开启权限"><a href="#2-检查App是否开启权限" class="headerlink" title="2.检查App是否开启权限"></a>2.检查App是否开启权限</h4><ul>
<li><p>调用<strong>ContextCompat的checkSelfPermission（获得实例，检查权限名称）</strong>方法</p>
<ul>
<li>实例Activity</li>
<li>检查权限名称：Mainfest.</li>
</ul>
</li>
<li><p>当返回值int类型<strong>等于PackageManager.PERMISSION_GRANTED</strong>就代表成功</p>
</li>
<li><p>检查版本（android小于7）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Build.VERSION.SDK_INT&gt;=Build.VERSION_CODES.M</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ContextCompat.checkSelfPermission(act,permission);</span><br></pre></td></tr></table></figure>



<h4 id="3-弹出用户是否开启权限的系统弹窗"><a href="#3-弹出用户是否开启权限的系统弹窗" class="headerlink" title="3.弹出用户是否开启权限的系统弹窗"></a>3.弹出用户是否开启权限的系统弹窗</h4><ul>
<li><p>调用<strong>ActivityCompat的requestPermissions（活动实例，待申请的权限名称数组，请求码）</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ActivityCompat.requestPermissions(act, permissions, requestCode);</span><br></pre></td></tr></table></figure>
</li>
<li><p>重写<strong>onRequestPermissionsResult</strong>方法<strong>判断用户权限选择结果</strong></p>
<ul>
<li><strong>requestCode</strong>：请求参数(参考上面)</li>
<li>permissions：权限组</li>
<li><strong>grantResults</strong>：<strong>每个权限的同意情况</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onRequestPermissionsResult</span><span class="params">(<span class="type">int</span> requestCode, <span class="meta">@NonNull</span> String[] permissions, <span class="meta">@NonNull</span> <span class="type">int</span>[] grantResults)</span> &#123;</span><br><span class="line">       <span class="built_in">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults);</span><br><span class="line">       <span class="keyword">if</span>(requestCode==R.id.personNumber1%<span class="number">65536</span>)&#123;</span><br><span class="line">           <span class="keyword">if</span>(MyPermissionUtil.checkGrant(grantResults))&#123;</span><br><span class="line">               ToastUtil.show(<span class="built_in">this</span>,<span class="string">&quot;权限开启成功&quot;</span>);</span><br><span class="line">           &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">               ToastUtil.show(<span class="built_in">this</span>,<span class="string">&quot;需要运行存储卡权限才能写入公共空间&quot;</span>);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="7-2-2ContentResolver读写联系人"><a href="#7-2-2ContentResolver读写联系人" class="headerlink" title="7.2.2ContentResolver读写联系人"></a>7.2.2ContentResolver读写联系人</h3><h4 id="联系人Contact的bean和Uri"><a href="#联系人Contact的bean和Uri" class="headerlink" title="联系人Contact的bean和Uri"></a>联系人Contact的bean和Uri</h4><h5 id="联系人bean"><a href="#联系人bean" class="headerlink" title="联系人bean"></a>联系人bean</h5><ul>
<li>conteactId：编号</li>
<li>name：姓名</li>
<li>phone：号码</li>
<li>email：邮箱</li>
</ul>
<h5 id="联系人提供器的Uri对象"><a href="#联系人提供器的Uri对象" class="headerlink" title="联系人提供器的Uri对象"></a>联系人提供器的Uri对象</h5><ul>
<li>&#96;&#96;&#96;java<br>Uri raw_uri &#x3D; Uri.parse(“content:&#x2F;&#x2F;com.android.contacts&#x2F;raw_contacts”);<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 获取联系人Id</span><br><span class="line"></span><br><span class="line">  ```java</span><br><span class="line">  ContentValues values = new ContentValues();</span><br><span class="line">  long contactId = ContentUris.parseId(resolver.insert(raw_uri, values));</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="联系人数据的Uri对象"><a href="#联系人数据的Uri对象" class="headerlink" title="联系人数据的Uri对象"></a>联系人数据的Uri对象</h5><ol>
<li><p>得到联系人数据Uri对象</p>
</li>
<li><p>插入name，phone，email的ContentValues对象</p>
<ul>
<li><p>name：</p>
<table>
<thead>
<tr>
<th>raw_contact_id</th>
<th>联系人Id</th>
</tr>
</thead>
<tbody><tr>
<td>mimetype</td>
<td>vnd.android.cursor.item&#x2F;name</td>
</tr>
<tr>
<td>data2</td>
<td>联系人姓名</td>
</tr>
</tbody></table>
</li>
<li><p>phone：</p>
<table>
<thead>
<tr>
<th>raw_contact_id</th>
<th>联系人Id</th>
</tr>
</thead>
<tbody><tr>
<td>mimetype</td>
<td>vnd.android.cursor.item&#x2F;phone_v2</td>
</tr>
<tr>
<td>data1</td>
<td>电话号码</td>
</tr>
<tr>
<td>data2</td>
<td>1表示家庭，2表示工作</td>
</tr>
</tbody></table>
</li>
<li><p>email：</p>
<table>
<thead>
<tr>
<th>raw_contact_id</th>
<th>联系人Id</th>
</tr>
</thead>
<tbody><tr>
<td>mimetype</td>
<td>vnd.android.cursor.item&#x2F;email_v2</td>
</tr>
<tr>
<td>data1</td>
<td>邮件</td>
</tr>
<tr>
<td>data2</td>
<td>1表示家庭，2表示工作</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
<li><p>调用<strong>ContentResolver</strong>的insert(联系人数据Uri对象，ContentValues对象)</p>
</li>
</ol>
<h4 id="具体使用-2"><a href="#具体使用-2" class="headerlink" title="具体使用"></a>具体使用</h4><ol>
<li>开启读取联系人的动态申请权限</li>
<li>创建联系人相关的pojo<ul>
<li>添加联系人需要先查询到联系人id再插入phone，name，email</li>
</ul>
</li>
<li>调用ContentResolver中的insert或者query方法.</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 往手机通讯录添加一个联系人信息（包括姓名、电话号码、电子邮箱）</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">addContacts</span><span class="params">(ContentResolver resolver, Contact contact)</span> &#123;</span><br><span class="line">    <span class="comment">// 构建一个指向系统联系人提供器的Uri对象</span></span><br><span class="line">    <span class="type">Uri</span> <span class="variable">raw_uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;content://com.android.contacts/raw_contacts&quot;</span>);</span><br><span class="line">    <span class="type">ContentValues</span> <span class="variable">values</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>(); <span class="comment">// 创建新的配对</span></span><br><span class="line">    <span class="comment">// 往 raw_contacts 添加联系人记录，并获取添加后的联系人编号</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">contactId</span> <span class="operator">=</span> ContentUris.parseId(resolver.insert(raw_uri, values));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构建一个指向系统联系人数据的Uri对象</span></span><br><span class="line">    <span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;content://com.android.contacts/data&quot;</span>);</span><br><span class="line">    <span class="type">ContentValues</span> <span class="variable">name</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>(); <span class="comment">// 创建新的配对</span></span><br><span class="line">    name.put(<span class="string">&quot;raw_contact_id&quot;</span>, contactId); <span class="comment">// 往配对添加联系人编号</span></span><br><span class="line">    <span class="comment">// 往配对添加“姓名”的数据类型</span></span><br><span class="line">    name.put(<span class="string">&quot;mimetype&quot;</span>, <span class="string">&quot;vnd.android.cursor.item/name&quot;</span>);</span><br><span class="line">    name.put(<span class="string">&quot;data2&quot;</span>, contact.name); <span class="comment">// 往配对添加联系人的姓名</span></span><br><span class="line">    resolver.insert(uri, name); <span class="comment">// 往提供器添加联系人的姓名记录</span></span><br><span class="line"></span><br><span class="line">    <span class="type">ContentValues</span> <span class="variable">phone</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>(); <span class="comment">// 创建新的配对</span></span><br><span class="line">    phone.put(<span class="string">&quot;raw_contact_id&quot;</span>, contactId); <span class="comment">// 往配对添加联系人编号</span></span><br><span class="line">    <span class="comment">// 往配对添加“电话号码”的数据类型</span></span><br><span class="line">    phone.put(<span class="string">&quot;mimetype&quot;</span>, <span class="string">&quot;vnd.android.cursor.item/phone_v2&quot;</span>);</span><br><span class="line">    phone.put(<span class="string">&quot;data1&quot;</span>, contact.phone); <span class="comment">// 往配对添加联系人的电话号码</span></span><br><span class="line">    phone.put(<span class="string">&quot;data2&quot;</span>, <span class="string">&quot;2&quot;</span>); <span class="comment">// 联系类型。1表示家庭，2表示工作</span></span><br><span class="line">    resolver.insert(uri, phone); <span class="comment">// 往提供器添加联系人的号码记录</span></span><br><span class="line"></span><br><span class="line">    <span class="type">ContentValues</span> <span class="variable">email</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>(); <span class="comment">// 创建新的配对</span></span><br><span class="line">    email.put(<span class="string">&quot;raw_contact_id&quot;</span>, contactId); <span class="comment">// 往配对添加联系人编号</span></span><br><span class="line">    <span class="comment">// 往配对添加“电子邮箱”的数据类型</span></span><br><span class="line">    email.put(<span class="string">&quot;mimetype&quot;</span>, <span class="string">&quot;vnd.android.cursor.item/email_v2&quot;</span>);</span><br><span class="line">    email.put(<span class="string">&quot;data1&quot;</span>, contact.email); <span class="comment">// 往配对添加联系人的电子邮箱</span></span><br><span class="line">    email.put(<span class="string">&quot;data2&quot;</span>, <span class="string">&quot;2&quot;</span>); <span class="comment">// 联系类型。1表示家庭，2表示工作</span></span><br><span class="line">    resolver.insert(uri, email); <span class="comment">// 往提供器添加联系人的邮箱记录</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="7-2-3ContentObserver监听短信"><a href="#7-2-3ContentObserver监听短信" class="headerlink" title="7.2.3ContentObserver监听短信"></a>7.2.3ContentObserver监听短信</h3><h4 id="功能-1"><a href="#功能-1" class="headerlink" title="功能"></a>功能</h4><ul>
<li>ContentResolver是主动查询数据</li>
<li>事先给目标内容注册一个观察器，数据变化就触发Onchange事件</li>
</ul>
<h4 id="使用方式-2"><a href="#使用方式-2" class="headerlink" title="使用方式"></a>使用方式</h4><ol>
<li><p>创建类继承<strong>ContentObserver</strong></p>
<ul>
<li>可以导入Content对象，操作ContentResolver对象</li>
</ul>
</li>
<li><p>重写<strong>onChange</strong>方法</p>
<ul>
<li>具体操作(notifyChange：通知内容观察器发送了数据变化)</li>
</ul>
</li>
<li><p>使用内容解析器注册这个类<strong>registerContentObserver（Uri对象，true，继承ContentObserve类的类）</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//短信得Uri</span></span><br><span class="line">mSmsUri=Uri.parse(<span class="string">&quot;content://sms&quot;</span>);</span><br><span class="line"><span class="comment">//短信得字段</span></span><br><span class="line">mSmsColumn=<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;address&quot;</span>,<span class="string">&quot;body&quot;</span>,<span class="string">&quot;date&quot;</span>&#125;;</span><br><span class="line"><span class="comment">//继承ContentObserver类的类</span></span><br><span class="line">mObserver=<span class="keyword">new</span> <span class="title class_">SmsGetObserver</span>(mHandler,<span class="built_in">this</span>);</span><br><span class="line"><span class="comment">//给SmsGetObserver注册</span></span><br><span class="line">getContentResolver().registerContentObserver(mSmsUri,<span class="literal">true</span>,mObserver);</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用内容解析器注销这个类<strong>unregisterContentObserver(继承ContentObserve类的类)</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getContentResolver().unregisterContentObserver(mObserver);</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="其他系统URI"><a href="#其他系统URI" class="headerlink" title="其他系统URI"></a>其他系统URI</h4><p><img src="/Liust1918.githud.io/image/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20211101224953.jpg" alt="微信图片_20211101224953"></p>
<h2 id="7-3引用之间共享文件"><a href="#7-3引用之间共享文件" class="headerlink" title="7.3引用之间共享文件"></a>7.3引用之间共享文件</h2><h3 id="7-3-1使用相册图片发送彩信"><a href="#7-3-1使用相册图片发送彩信" class="headerlink" title="7.3.1使用相册图片发送彩信"></a>7.3.1使用相册图片发送彩信</h3><p>短信只能文本，彩信可以图片和文本</p>
<h4 id="从系统相册中选择图片"><a href="#从系统相册中选择图片" class="headerlink" title="从系统相册中选择图片"></a>从系统相册中选择图片</h4><ol>
<li><p>创建内容获取动作的意图<strong>Intent.ACTION_GET_CONTENT</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">albumIntent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_GET_CONTENT);</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置内容为图像</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">albumIntent.setType(<span class="string">&quot;image/*&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>调用<strong>startActivityForResult（意图，跳转码）</strong>方法跳转到系统相册.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">startActivityForResult(albumIntent, CHOOSE_CODE); <span class="comment">// 打开系统相册，并等待图片选择结果</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>重写<strong>onActivityResult</strong>方法</p>
</li>
<li><p>调用Intent的getData方法获得图片的<strong>Uri对象</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onActivityResult</span><span class="params">(<span class="type">int</span> requestCode, <span class="type">int</span> resultCode, Intent intent)</span> &#123;</span><br><span class="line">       <span class="built_in">super</span>.onActivityResult(requestCode, resultCode, intent);</span><br><span class="line">       <span class="keyword">if</span> (resultCode == RESULT_OK &amp;&amp; requestCode == CHOOSE_CODE) &#123; </span><br><span class="line">           <span class="comment">// 从相册选择一张照片</span></span><br><span class="line">           <span class="keyword">if</span> (intent.getData() != <span class="literal">null</span>) &#123; <span class="comment">// 数据非空，表示选中了某张照片</span></span><br><span class="line">               mUri = intent.getData(); <span class="comment">// 获得选中照片的路径对象</span></span><br><span class="line">               iv_appendix.setImageURI(mUri); <span class="comment">// 设置图像视图的路径对象</span></span><br><span class="line">               Log.d(TAG, </span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="发送彩信"><a href="#发送彩信" class="headerlink" title="发送彩信"></a>发送彩信</h4><ol>
<li><p>创建一个发送意图<strong>Intent.ACTION_SEND</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_SEND); <span class="comment">// 创建一个发送动作的意图</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>-填入内容</p>
</li>
<li><p>startActivity(意图)</p>
</li>
</ol>
<h3 id="7-3-2借助FileProvider发送彩信（Mms）"><a href="#7-3-2借助FileProvider发送彩信（Mms）" class="headerlink" title="7.3.2借助FileProvider发送彩信（Mms）"></a>7.3.2借助FileProvider发送彩信（Mms）</h3><h4 id="从相册中得到信息更多的图片文件"><a href="#从相册中得到信息更多的图片文件" class="headerlink" title="从相册中得到信息更多的图片文件"></a>从相册中得到信息更多的图片文件</h4><ul>
<li><p><strong>定义相册Uri，字段的对象变量</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">Uri</span> <span class="variable">mImageUri</span> <span class="operator">=</span> MediaStore.Images.Media.EXTERNAL_CONTENT_URI; <span class="comment">// 相册的Uri</span></span><br><span class="line">   <span class="keyword">private</span> String[] mImageColumn = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123; <span class="comment">// 媒体库的字段名称数组</span></span><br><span class="line">           MediaStore.Images.Media._ID, <span class="comment">// 编号</span></span><br><span class="line">           MediaStore.Images.Media.TITLE, <span class="comment">// 标题</span></span><br><span class="line">           MediaStore.Images.Media.SIZE, <span class="comment">// 文件大小</span></span><br><span class="line">           MediaStore.Images.Media.DATA&#125;; <span class="comment">// 文件路径</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>调用<strong>ContentProvider</strong>对象<strong>查询媒体库的图片信息</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Cursor</span> <span class="variable">cursor</span> <span class="operator">=</span> getContentResolver().query(mImageUri, mImageColumn, <span class="literal">null</span>, <span class="literal">null</span>, <span class="string">&quot;_size asc&quot;</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="开放应用的文件访问-共享某个文件"><a href="#开放应用的文件访问-共享某个文件" class="headerlink" title="开放应用的文件访问(共享某个文件)"></a>开放应用的文件访问(共享某个文件)</h4><h5 id="不能直接访问"><a href="#不能直接访问" class="headerlink" title="不能直接访问"></a>不能直接访问</h5><ul>
<li><strong>Android 7.0</strong>后<strong>不能</strong>用Uri.parse(path)来直接访问其他应用的文件</li>
<li>必须通过<strong>FileProvider来共享某个文件</strong>（A共享文件，b访问共享文件）.</li>
</ul>
<h5 id="重新配置FileProvider"><a href="#重新配置FileProvider" class="headerlink" title="重新配置FileProvider"></a>重新配置FileProvider</h5><ol>
<li><p>在res创建xml文件夹，创建paths的xml文件.(开放的路径)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">paths</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">external-path</span> <span class="attr">path</span>=<span class="string">&quot;Android/data/com.example.chapter07/&quot;</span> <span class="attr">name</span>=<span class="string">&quot;files_root&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">external-path</span> <span class="attr">path</span>=<span class="string">&quot;.&quot;</span> <span class="attr">name</span>=<span class="string">&quot;external_storage_root&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">paths</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在<strong>AndroidManifest.xml</strong>下<strong>applcaition</strong>节点添加<strong>provider</strong>标签(声明当前应用的内容提供器组件)</p>
<ul>
<li>authorities；<strong>授权字符串</strong></li>
<li>元数据的resource：<strong>指明文件提供器的路径资源</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">provider</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:name</span>=<span class="string">&quot;androidx.core.content.FileProvider&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:authorities</span>=<span class="string">&quot;授权字符串&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:grantUriPermissions</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:name</span>=<span class="string">&quot;android.support.FILE_PROVIDER_PATHS&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:resource</span>=<span class="string">&quot;@xml/paths的xml文件&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">provider</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="通过FileProvider获取图片文件"><a href="#通过FileProvider获取图片文件" class="headerlink" title="通过FileProvider获取图片文件"></a>通过FileProvider获取图片文件</h4><ul>
<li>调用<strong>FileProvider.getUriForFile(this，文件提供器的授权字符串，File类型的文件对象)</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uri = FileProvider.getUriForFile(<span class="built_in">this</span>,</span><br><span class="line">                    <span class="string">&quot;com.example.chapter07.fileProvider&quot;</span>, <span class="keyword">new</span> <span class="title class_">File</span>(path));</span><br></pre></td></tr></table></figure>



<h3 id="7-3-3借助FileProvider安装应用"><a href="#7-3-3借助FileProvider安装应用" class="headerlink" title="7.3.3借助FileProvider安装应用"></a>7.3.3借助FileProvider安装应用</h3><h4 id="开放安装应用权限"><a href="#开放安装应用权限" class="headerlink" title="开放安装应用权限"></a>开放安装应用权限</h4><ul>
<li><p>从Android 8.0要申请<strong>REQUEST_INSTALL_PACKAGES</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.REQUEST_INSTALL_PACKAGES&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>启动动态权限</p>
</li>
</ul>
<h4 id="从媒体库中得到APK安装包"><a href="#从媒体库中得到APK安装包" class="headerlink" title="从媒体库中得到APK安装包"></a>从媒体库中得到APK安装包</h4><ul>
<li><p><strong>定义存储卡的Uri，字段的对象变量</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">Uri</span> <span class="variable">mFilesUri</span> <span class="operator">=</span> MediaStore.Files.getContentUri(<span class="string">&quot;external&quot;</span>); <span class="comment">// 存储卡的Uri</span></span><br><span class="line">   <span class="keyword">private</span> String[] mFilesColumn = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123; <span class="comment">// 媒体库的字段名称数组</span></span><br><span class="line">           MediaStore.Files.FileColumns._ID, <span class="comment">// 编号</span></span><br><span class="line">           MediaStore.Files.FileColumns.TITLE, <span class="comment">// 标题</span></span><br><span class="line">           MediaStore.Files.FileColumns.SIZE, <span class="comment">// 文件大小</span></span><br><span class="line">           MediaStore.Files.FileColumns.DATA, <span class="comment">// 文件路径</span></span><br><span class="line">           MediaStore.Files.FileColumns.MIME_TYPE&#125;; <span class="comment">// 媒体类型</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>调用<strong>ContentProvider</strong>对象<strong>查找媒体库安装包列表</strong>（查找存储卡的apk文件）</p>
<p>- </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Cursor</span> <span class="variable">cursor</span> <span class="operator">=</span> getContentResolver().query(mFilesUri, mFilesColumn,</span><br><span class="line">              <span class="string">&quot;mime_type=&#x27;application/vnd.android.package-archive&#x27; or _data like &#x27;%.apk&#x27;&quot;</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="启动系统自带的应用安装程序"><a href="#启动系统自带的应用安装程序" class="headerlink" title="启动系统自带的应用安装程序"></a>启动系统自带的应用安装程序</h4><ul>
<li>通过**FileProvider.getUriForFile(this.授权字符串,file类型)**获取文件Uri对象</li>
<li>创建意图<strong>new Intent(Intent.ACTION_VIEW)</strong></li>
<li>设置意图的<strong>setDataAndType（文件Uri对象，”com.example.chapter07.fileProvider”）</strong></li>
<li>startActivity（意图）启动系统自带的应用安装程序</li>
</ul>
<h1 id="8-高级控件"><a href="#8-高级控件" class="headerlink" title="8.高级控件"></a>8.高级控件</h1><h2 id="8-1下拉列表以及适配器"><a href="#8-1下拉列表以及适配器" class="headerlink" title="8.1下拉列表以及适配器"></a>8.1下拉列表以及适配器</h2><h3 id="8-1-1下拉框Spinner"><a href="#8-1-1下拉框Spinner" class="headerlink" title="8.1.1下拉框Spinner"></a>8.1.1下拉框Spinner</h3><h4 id="XML代码-2"><a href="#XML代码-2" class="headerlink" title="XML代码"></a>XML代码</h4><ul>
<li><strong>Spinner</strong><ul>
<li>spinnerMode：下拉框模式<ul>
<li><strong>dropdown</strong>：下拉模式</li>
<li><strong>dialog</strong>：对话框模式</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="java代码-2"><a href="#java代码-2" class="headerlink" title="java代码"></a>java代码</h4><ul>
<li><p><strong>setPrompt</strong>：设置标题文字(对话框才显示，下拉模式不显示)</p>
</li>
<li><p><strong>setAdpater</strong>：设置<strong>列表项</strong>的<strong>数据适配器</strong></p>
</li>
<li><p><strong>setSelection</strong>：设置当前选中项(要先设置setAdpater)</p>
<ul>
<li>ArrayAdapter</li>
<li>SimpleAdapter</li>
</ul>
</li>
<li><p><strong>setOnItemSelectedListener</strong>：选择监听器</p>
<ul>
<li>继承OnItemSelectedListener的类</li>
<li>重写onItemSelected方法(参数arg2为选择得到的下标，从0开始)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MySelectedListener</span> <span class="keyword">implements</span> <span class="title class_">OnItemSelectedListener</span> &#123;</span><br><span class="line">       <span class="comment">// 选择事件的处理方法，其中arg2代表选择项的序号</span></span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemSelected</span><span class="params">(AdapterView&lt;?&gt; arg0, View arg1, <span class="type">int</span> arg2, <span class="type">long</span> arg3)</span> &#123;</span><br><span class="line">           Toast.makeText(SpinnerDropdownActivity.<span class="built_in">this</span>, <span class="string">&quot;您选择的是&quot;</span> + starArray[arg2],</span><br><span class="line">                   Toast.LENGTH_LONG).show();</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// 未选择时的处理方法，通常无需关注</span></span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNothingSelected</span><span class="params">(AdapterView&lt;?&gt; arg0)</span> &#123;&#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="8-1-2数组适配器ArrayAdapter"><a href="#8-1-2数组适配器ArrayAdapter" class="headerlink" title="8.1.2数组适配器ArrayAdapter"></a>8.1.2数组适配器ArrayAdapter</h3><h5 id="功能-2"><a href="#功能-2" class="headerlink" title="功能"></a>功能</h5><p>显示文本列表</p>
<h5 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// new ArrayAdapter&lt;String&gt;(this,列表项的XML文件, 文本内容数组);</span></span><br><span class="line">ArrayAdapter&lt;String&gt; starAdapter = <span class="keyword">new</span> <span class="title class_">ArrayAdapter</span>&lt;String&gt;(<span class="built_in">this</span>,</span><br><span class="line">                R.layout.item_select, starArray);</span><br></pre></td></tr></table></figure>

<ol>
<li><strong>编写列表项的XML文件</strong></li>
<li>调用<strong>new ArrayAdapter&lt;String&gt;(this,列表项的XML文件, 文本内容数组)</strong></li>
<li>调用下拉控件对象的<strong>setAdapter</strong>（适配器对象）</li>
</ol>
<h3 id="8-1-3简单适配器SimpleAdapter"><a href="#8-1-3简单适配器SimpleAdapter" class="headerlink" title="8.1.3简单适配器SimpleAdapter"></a>8.1.3简单适配器SimpleAdapter</h3><h5 id="功能-3"><a href="#功能-3" class="headerlink" title="功能"></a>功能</h5><p>显示文本与图片</p>
<h5 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h5><ol>
<li><p>构建列表项的XML文件</p>
</li>
<li><p>调用<strong>new SimpleAdapter(this, Map数组,列表项的布局文件, Map数组中的key数组，布局文件子控件id数组);</strong></p>
<ul>
<li>Map数组：key-value值</li>
<li>列表项的布局文件：每一个列表项的布局文件</li>
<li>Map数组中的key数组：对应下面的布局文件中子控件id</li>
<li>布局文件子控件id数组：上面一个数据对应一个控件id</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// 声明一个下拉列表的简单适配器，其中指定了图标与文本两组数据</span></span><br><span class="line">        <span class="type">SimpleAdapter</span> <span class="variable">starAdapter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleAdapter</span>(<span class="built_in">this</span>, list,</span><br><span class="line">                R.layout.item_simple, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;icon&quot;</span>, <span class="string">&quot;name&quot;</span>&#125;,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;R.id.iv_icon, R.id.tv_name&#125;);</span><br><span class="line"><span class="comment">//icon的数据对应着item_simple布局文件中的子控件iv_icon</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>调用下拉控件对象的<strong>setAdapter</strong>（适配器对象）</p>
</li>
</ol>
<h3 id="8-1-4基本适配器"><a href="#8-1-4基本适配器" class="headerlink" title="8.1.4基本适配器"></a>8.1.4基本适配器</h3><h5 id="功能-4"><a href="#功能-4" class="headerlink" title="功能"></a>功能</h5><p>让列表项的布局更加丰富.</p>
<h5 id="使用方式-3"><a href="#使用方式-3" class="headerlink" title="使用方式"></a>使用方式</h5><ol>
<li><p>编写列表项的布局文件</p>
</li>
<li><p>创建数据适配类并且继承<strong>BaseAdapter</strong></p>
<ul>
<li><strong>构造方法</strong>：转入数据和上下文Context</li>
<li><strong>getCount</strong>：列表项个数</li>
<li><strong>getItem</strong>：列表项数据</li>
<li><strong>getItemId</strong>：列表项编号</li>
<li><strong>getView</strong>：通过上下文Context找到<strong>列表项的根布局</strong>，<strong>将数据添加到根布局下面的各个子控件</strong></li>
</ul>
</li>
<li><p>调用下拉控件对象的<strong>setAdapter</strong>（<strong>继承BaseAdpater的适配器对象</strong>）</p>
</li>
</ol>
<h2 id="8-2列表视图"><a href="#8-2列表视图" class="headerlink" title="8.2列表视图"></a>8.2列表视图</h2><h3 id="8-2-1列表视图ListView"><a href="#8-2-1列表视图ListView" class="headerlink" title="8.2.1列表视图ListView"></a>8.2.1列表视图ListView</h3><h4 id="效果-9"><a href="#效果-9" class="headerlink" title="效果"></a>效果</h4><p>直接在页面显示全部列表信息</p>
<h4 id="使用方式-4"><a href="#使用方式-4" class="headerlink" title="使用方式"></a>使用方式</h4><ol>
<li><p>在Xml文件中添加<strong>ListView</strong>标签</p>
<ul>
<li><table>
<thead>
<tr>
<th>XMl新属性</th>
<th>java代码新设置</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>divider</td>
<td>setDivider</td>
<td>分隔线图形</td>
</tr>
<tr>
<td>dividerHeight</td>
<td>setDividerHeight</td>
<td>分隔线高度</td>
</tr>
<tr>
<td>listSelector</td>
<td>setListSelector</td>
<td>列表项的按压背景（状态图形格式）</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
<li><p>在java代码填充数据</p>
<ul>
<li>setAdpater</li>
<li>点击监听器</li>
</ul>
</li>
</ol>
<h4 id="点击监听器"><a href="#点击监听器" class="headerlink" title="点击监听器"></a>点击监听器</h4><ul>
<li>点击监听按钮：<strong>setOnItemSelectedListener</strong>（继承OnItemSelectedListener类）</li>
<li>长按点击监听按钮：<strong>setOnItemLongSelectedListener</strong>（继承OnItemSelectedLongListener类）</li>
</ul>
<h4 id="修改分隔线"><a href="#修改分隔线" class="headerlink" title="修改分隔线"></a>修改分隔线</h4><h5 id="默认"><a href="#默认" class="headerlink" title="默认"></a>默认</h5><p>各项之间的默认展示<strong>灰色</strong>分隔线</p>
<h5 id="XML修改"><a href="#XML修改" class="headerlink" title="XML修改"></a>XML修改</h5><ul>
<li><strong>divider属性为@null时</strong></li>
<li><strong>dividerHeight的值不能大于0</strong></li>
<li>不然最后一项会不见</li>
</ul>
<h5 id="java修改"><a href="#java修改" class="headerlink" title="java修改"></a>java修改</h5><ul>
<li>先用<strong>setDivider</strong>方法</li>
<li>再用<strong>setDividerHeight</strong>方法</li>
<li>XML文件不存在顺序问题</li>
<li>如果倒转就会把图片高度当成分隔高度</li>
</ul>
<h5 id="去掉分隔线"><a href="#去掉分隔线" class="headerlink" title="去掉分隔线"></a>去掉分隔线</h5><ul>
<li>Divider设置为<strong>null</strong></li>
<li>DividerHeight设置为<strong>0</strong></li>
</ul>
<h4 id="修改按压背景"><a href="#修改按压背景" class="headerlink" title="修改按压背景"></a>修改按压背景</h4><h5 id="默认-1"><a href="#默认-1" class="headerlink" title="默认"></a>默认</h5><p>点击&#x2F;长按某项时显示默认的<strong>灰色水波背景</strong></p>
<h5 id="XML修改-1"><a href="#XML修改-1" class="headerlink" title="XML修改"></a>XML修改</h5><ul>
<li><strong>listSelector</strong>：Drawable文件</li>
</ul>
<h5 id="java修改-1"><a href="#java修改-1" class="headerlink" title="java修改"></a>java修改</h5><ul>
<li><strong>setSelector（Rrawable文件）</strong></li>
</ul>
<h5 id="去掉按压背景"><a href="#去掉按压背景" class="headerlink" title="去掉按压背景"></a>去掉按压背景</h5><ul>
<li><strong>设置一个透明颜色文件R.color.透明文件</strong></li>
<li>在xml或者java代码修改</li>
<li>@null和设置为null都不行,一个会出现橙色背景，一个空指针</li>
</ul>
<h4 id="高度问题"><a href="#高度问题" class="headerlink" title="高度问题"></a>高度问题</h4><ul>
<li><strong>XML文件，ListView后面还有同级控件时</strong></li>
<li>设置ListView<ul>
<li><strong>高度:0dp</strong></li>
<li><strong>权重:1</strong></li>
</ul>
</li>
<li>如果设置”warp_content”，那么只会显示一项</li>
</ul>
<h4 id="抢占焦点问题"><a href="#抢占焦点问题" class="headerlink" title="抢占焦点问题"></a>抢占焦点问题</h4><p>针对的是<strong>列表项的根节点</strong>，不是listView</p>
<h5 id="是什么"><a href="#是什么" class="headerlink" title="是什么"></a>是什么</h5><p>当<strong>列表项</strong>中存在按钮&#x2F;编辑框，点击列表会无法触发，因为起冲突了.</p>
<h5 id="设置内部视图的焦点抢占方式"><a href="#设置内部视图的焦点抢占方式" class="headerlink" title="设置内部视图的焦点抢占方式"></a>设置内部视图的焦点抢占方式</h5><ul>
<li>XML修改：<strong>descendantFocusability</strong></li>
<li>java修改：<strong>setDescendantFocusability</strong></li>
</ul>
<h5 id="抢占属性"><a href="#抢占属性" class="headerlink" title="抢占属性"></a>抢占属性</h5><table>
<thead>
<tr>
<th>说明</th>
<th>代码</th>
<th>xml</th>
</tr>
</thead>
<tbody><tr>
<td>子控件之前</td>
<td>ViewGroup.FOCUS_BEFORE_DESCENDANTS</td>
<td>beforeDescendants</td>
</tr>
<tr>
<td>子控件之后</td>
<td>ViewGroup.FOCUS_AFTER_DESCENDANTS</td>
<td>afterDescendants</td>
</tr>
<tr>
<td>不让子控件处理</td>
<td>ViewGroup.FOCUS_BLOCK_DESCENDANTS</td>
<td>blocksDescendants</td>
</tr>
</tbody></table>
<h3 id="8-2-2网格视图GridView"><a href="#8-2-2网格视图GridView" class="headerlink" title="8.2.2网格视图GridView"></a>8.2.2网格视图GridView</h3><h4 id="功能和基本属性"><a href="#功能和基本属性" class="headerlink" title="功能和基本属性"></a>功能和基本属性</h4><h5 id="功能-5"><a href="#功能-5" class="headerlink" title="功能"></a>功能</h5><p>分行分列显示表格信息</p>
<h5 id="基本属性"><a href="#基本属性" class="headerlink" title="基本属性"></a>基本属性</h5><ul>
<li>setAdapter</li>
<li>setOnItemClickListener</li>
<li>setOnItemLongClickListener</li>
</ul>
<h4 id="网格属性"><a href="#网格属性" class="headerlink" title="网格属性"></a>网格属性</h4><h5 id="新属性"><a href="#新属性" class="headerlink" title="新属性"></a>新属性</h5><table>
<thead>
<tr>
<th>XML</th>
<th>java</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>horizontalSpacing</td>
<td>setHorizontalSpacing</td>
<td>网格项在水平方向的间距</td>
</tr>
<tr>
<td>vericalSpacing</td>
<td>setVericalSpacing</td>
<td>网格项在垂直方向的间距</td>
</tr>
<tr>
<td>numColumns</td>
<td>setNumColumns</td>
<td>列的数目</td>
</tr>
<tr>
<td>stretchMode</td>
<td>setStretchMode</td>
<td>拉伸模式.</td>
</tr>
<tr>
<td>columnWidth</td>
<td>setColumnWidth</td>
<td>每列宽度(当拉伸模式是spacingWidth，spacingWidthUniform)</td>
</tr>
</tbody></table>
<h5 id="拉伸属性"><a href="#拉伸属性" class="headerlink" title="拉伸属性"></a>拉伸属性</h5><table>
<thead>
<tr>
<th>XML</th>
<th>JAVA</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>none</td>
<td>NO_STRETCH</td>
<td>不拉伸</td>
</tr>
<tr>
<td>columnWidth</td>
<td>STRETCH_COLUMN_WIDTH</td>
<td>拉伸列宽</td>
</tr>
<tr>
<td>spacingWidth</td>
<td>STRETCH_SPACING</td>
<td>列间空隙</td>
</tr>
<tr>
<td>spacingWidthUniform</td>
<td>STRETCH_SPACING_UNIFORM</td>
<td>左右空隙</td>
</tr>
</tbody></table>
<h4 id="拉伸模式说明"><a href="#拉伸模式说明" class="headerlink" title="拉伸模式说明"></a>拉伸模式说明</h4><ul>
<li><p><strong>不设置</strong>stretchMode：无分隔线</p>
</li>
<li><p><strong>不拉伸</strong>NO_STRETCH：每行网格项紧挨，空隙全在右边</p>
</li>
<li><p><strong>拉伸列宽</strong>STRETCH_COLUMN_WIDTH：每个网格变宽，分隔线变小</p>
</li>
<li><p><strong>列间空隙</strong>STRETCH_SPACING：多出来的空隙在网格项中间</p>
</li>
<li><p><strong>左右空隙</strong>STRETCH_SPACING_UNIFORM：空隙同时出现在网格项的左右两边</p>
</li>
<li><p><strong>padding显示全部分隔线</strong>（setPadding）：内外边界都显示分隔线</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gv_planet.setPadding(dividerPad, dividerPad, dividerPad, dividerPad);</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="8-3翻页类视图"><a href="#8-3翻页类视图" class="headerlink" title="8.3翻页类视图"></a>8.3翻页类视图</h2><h3 id="8-3-1翻页视图ViewPager"><a href="#8-3-1翻页视图ViewPager" class="headerlink" title="8.3.1翻页视图ViewPager"></a>8.3.1翻页视图ViewPager</h3><h4 id="功能-6"><a href="#功能-6" class="headerlink" title="功能"></a>功能</h4><ul>
<li>左右滑动翻页</li>
<li>一个页面一个项</li>
</ul>
<h4 id="属性方法"><a href="#属性方法" class="headerlink" title="属性方法"></a>属性方法</h4><ul>
<li><strong>setAdapter（继承PagerAdapter）</strong>：设置页面适配器</li>
<li><strong>setCurrentItem</strong>：设置当前显示页面</li>
<li><strong>addOnPageChangeListener（继承OnPageChangeListener&#x2F;SimpleOnPageChangeListener接口的类）</strong>：页面变化监听器</li>
</ul>
<h4 id="页面适配器PagerAdapter"><a href="#页面适配器PagerAdapter" class="headerlink" title="页面适配器PagerAdapter"></a>页面适配器PagerAdapter</h4><p>首先创建类继承PagerAdapter，让后重写以下方法</p>
<ul>
<li><strong>构造方法</strong>：传入上下文Context以及数据，将数据装入ImageView并保存在list中</li>
<li><strong>getCount</strong>：获得页面项个数</li>
<li><strong>isViewFromObject</strong>：</li>
<li><strong>instantiateItem</strong>：<strong>实例化指定位置（传入下标）的页面</strong>（输入下标获得上面list已经实例化的ImageView）.<strong>并添加到容器中</strong></li>
<li><strong>destroyItem</strong>：从容器中销毁指定位置(下标)的页面</li>
<li><strong>getPageTitle</strong>：获得指定页面的标题文本(后面翻页标签栏会用到)</li>
</ul>
<h4 id="页面变化监听器addOnPageChangeListener"><a href="#页面变化监听器addOnPageChangeListener" class="headerlink" title="页面变化监听器addOnPageChangeListener"></a>页面变化监听器addOnPageChangeListener</h4><ul>
<li><strong>OnPageChangeListener</strong>接口<ul>
<li><strong>onPageScrollStateChanged</strong>：翻页状态改变<ul>
<li>状态变化：正在滑动1-&gt;滑动完毕2-&gt;静止0</li>
</ul>
</li>
<li><strong>onPageScrolled</strong>：翻页过程中触发</li>
<li><strong>onPageSelected</strong>：翻页结束后<ul>
<li>position：翻到那一页</li>
</ul>
</li>
</ul>
</li>
<li><strong>SimpleOnPageChangeListener</strong>接口（常用）<ul>
<li><strong>onPageSelected</strong>：翻页结束后<ul>
<li>position：翻到那一页</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="使用方式-5"><a href="#使用方式-5" class="headerlink" title="使用方式"></a>使用方式</h4><ul>
<li><p>在XML添加<strong>完整路径的ViewPager</strong>节点</p>
</li>
<li><p>创建翻页适配器并重写方法</p>
</li>
<li><p>通过构造方法传入上下文以及数据</p>
<ul>
<li>将每个数据装入页面，并保存起来，方便下面通过下标获得ImageView来实例化页面</li>
</ul>
</li>
<li><p>由<strong>instantiateItem</strong>方法实例化视图对象并添加到容器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实例化指定位置的页面，并将其添加到容器中</span></span><br><span class="line">   <span class="keyword">public</span> Object <span class="title function_">instantiateItem</span><span class="params">(ViewGroup container, <span class="type">int</span> position)</span> &#123;</span><br><span class="line">       container.addView(mViewList.get(position));</span><br><span class="line">       <span class="keyword">return</span> mViewList.get(position);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>给PageView调用setAdapter添加这个页面适配器</p>
</li>
</ul>
<h3 id="8-3-2翻页标签栏PagarTabStrip"><a href="#8-3-2翻页标签栏PagarTabStrip" class="headerlink" title="8.3.2翻页标签栏PagarTabStrip"></a>8.3.2翻页标签栏PagarTabStrip</h3><h4 id="功能-7"><a href="#功能-7" class="headerlink" title="功能"></a>功能</h4><ul>
<li>在翻页视图上方显示页面标题</li>
<li>类似选项卡</li>
<li>文本下面有横线</li>
<li>点击左右选择卡即可切换页面</li>
</ul>
<h4 id="使用方式-6"><a href="#使用方式-6" class="headerlink" title="使用方式"></a>使用方式</h4><ol>
<li><p>在XML布局文件中<strong>ViewPage节点</strong>添加<strong>PagerTabStrip节点</strong></p>
</li>
<li><p>翻页适配器重写<strong>getPageTitle</strong>方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获得指定页面的标题文本</span></span><br><span class="line">    <span class="keyword">public</span> CharSequence <span class="title function_">getPageTitle</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> mGoodsList.get(position).name;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="改变标签栏的文本样式"><a href="#改变标签栏的文本样式" class="headerlink" title="改变标签栏的文本样式"></a>改变标签栏的文本样式</h4><ul>
<li>必须使用java代码修改<ul>
<li>获得翻页标签栏的布局视图对象<ul>
<li>setTextSize</li>
<li>setTextCode</li>
</ul>
</li>
</ul>
</li>
<li>不支持XML修改</li>
</ul>
<h3 id="8-3-3简单的启动引导页"><a href="#8-3-3简单的启动引导页" class="headerlink" title="8.3.3简单的启动引导页"></a>8.3.3简单的启动引导页</h3><h4 id="效果-10"><a href="#效果-10" class="headerlink" title="效果"></a>效果</h4><p>在首次启动中出现欢迎页面，并且向右翻几页才到应用主页面</p>
<h4 id="核心"><a href="#核心" class="headerlink" title="核心"></a>核心</h4><p>页面项的XML布局和适配器</p>
<h4 id="大概思路"><a href="#大概思路" class="headerlink" title="大概思路"></a>大概思路</h4><ul>
<li>页面项的XML文件<ul>
<li>引导页的背景图(ImageView)</li>
<li>底部的一排原点(RaioGroup)</li>
<li>最后一页的入口按钮(Button)</li>
</ul>
</li>
<li>启动引导页的适配器<ul>
<li><strong>在构造方法，将传入数据装入页面项，再把页面项存储起来</strong></li>
<li>让当前的原点显示</li>
<li>最后一页的按钮</li>
</ul>
</li>
</ul>
<h2 id="8-4碎片Fragment"><a href="#8-4碎片Fragment" class="headerlink" title="8.4碎片Fragment"></a>8.4碎片Fragment</h2><h3 id="碎片功能"><a href="#碎片功能" class="headerlink" title="碎片功能"></a>碎片功能</h3><ul>
<li>占据页面的一小块区域</li>
<li><strong>拥有自己的生命周期</strong></li>
<li>添加后之后不影响宿主页面的其他区域，删掉也不影响</li>
<li><strong>每个碎片对应XML布局文件</strong></li>
</ul>
<h3 id="8-4-1碎片的静态注册"><a href="#8-4-1碎片的静态注册" class="headerlink" title="8.4.1碎片的静态注册"></a>8.4.1碎片的静态注册</h3><h4 id="定义和作用"><a href="#定义和作用" class="headerlink" title="定义和作用"></a>定义和作用</h4><ul>
<li>直接在XML文件直接写<strong>fragment</strong>节点</li>
<li>可被其他布局文件&#x2F;活动页面引用</li>
</ul>
<h4 id="具体使用-3"><a href="#具体使用-3" class="headerlink" title="具体使用"></a>具体使用</h4><ol>
<li>编写碎片的XML页面布局</li>
<li>编写碎片类<strong>继承Fragment类</strong>以及<strong>入口方法onCreateView方法</strong></li>
</ol>
<h4 id="其他活动页面引用"><a href="#其他活动页面引用" class="headerlink" title="其他活动页面引用"></a>其他活动页面引用</h4><ul>
<li>直接添加<strong>Fragement节点</strong><ul>
<li>指定id属性(<strong>必须写</strong>)</li>
<li>指定name属性(<strong>必须完整碎片类的路径</strong>)</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">fragment</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:id</span>=<span class="string">&quot;@+id/fragment_static&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:name</span>=<span class="string">&quot;com.example.chapter08.fragment.StaticFragment&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:layout_height</span>=<span class="string">&quot;60dp&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="碎片的静态注册生命周期"><a href="#碎片的静态注册生命周期" class="headerlink" title="碎片的静态注册生命周期"></a>碎片的静态注册生命周期</h4><h5 id="基本生命周期"><a href="#基本生命周期" class="headerlink" title="基本生命周期"></a>基本生命周期</h5><p>onCreate，onStart，OnResume，onPause，onStop，ondDestroy</p>
<h5 id="额外生命周期"><a href="#额外生命周期" class="headerlink" title="额外生命周期"></a>额外生命周期</h5><ul>
<li><strong>onAttach</strong>：与活动页面结合</li>
<li><strong>onCreateView</strong>：创建碎片视图</li>
<li><strong>onActivityCreated</strong>：活动页面创建完毕后调用</li>
<li><strong>onDestroyView</strong>：回收碎片视图</li>
<li><strong>onDetach</strong>：活动页面分离</li>
</ul>
<h3 id="8-4-2碎片的动态注册"><a href="#8-4-2碎片的动态注册" class="headerlink" title="8.4.2碎片的动态注册"></a>8.4.2碎片的动态注册</h3><h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><ul>
<li>代码执行时才动态添加碎片.(基本给翻页视图使用)</li>
<li>无论当前位于那个页面，系统都只会加载当前页及相邻的左右页.</li>
</ul>
<h4 id="使用方式-7"><a href="#使用方式-7" class="headerlink" title="使用方式"></a>使用方式</h4><ol>
<li>创建碎片适配器<strong>继承FragmentPagerAdapter类</strong><ul>
<li><strong>构造方法</strong>：传入碎片管理器和数据</li>
<li><strong>getCount</strong>：获取碎片个数</li>
<li><strong>getItem</strong>：指定位置的碎片Fragment<ul>
<li>给动态碎片类输入参数和页面下标</li>
</ul>
</li>
<li><strong>getPageTitle</strong>：指定碎片页的标题文本</li>
</ul>
</li>
<li>创建动态碎片类继承<strong>Fragment</strong>类<ul>
<li>通过newInstance方法接收数据装成Bundle</li>
<li>onCreateView方法接收Bundle将数据装入视图中.</li>
</ul>
</li>
<li>在活动页面中，给ViewPager添加碎片翻页适配器</li>
</ol>
<h1 id="9-广播组件Broadcast"><a href="#9-广播组件Broadcast" class="headerlink" title="9.广播组件Broadcast"></a>9.广播组件Broadcast</h1><h4 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h4><p>广播(Broadcast)是Android四大组件之一（组件之间进行通信）</p>
<h4 id="广播和活动之间的区别"><a href="#广播和活动之间的区别" class="headerlink" title="广播和活动之间的区别"></a>广播和活动之间的区别</h4><ul>
<li>活动一对一通信，广播一对多</li>
<li>发送方:只要发送广播就行</li>
<li>接收方:过滤符合条件的广播，工作就一定收到广播，不工作就收不到广播</li>
</ul>
<h4 id="广播三步骤"><a href="#广播三步骤" class="headerlink" title="广播三步骤"></a>广播三步骤</h4><ul>
<li>发送广播</li>
<li>定义广播接收器</li>
<li>开关广播接收器</li>
</ul>
<h4 id="广播三方法"><a href="#广播三方法" class="headerlink" title="广播三方法"></a>广播三方法</h4><ul>
<li><strong>sendBroadcast</strong>：发送广播</li>
<li><strong>registerReceiver</strong>：注册广播的接收器（一般写在onStart&#x2F;onResume中）</li>
<li><strong>unregisterReceiver</strong>：注销广播的接收器（onStop&#x2F;onPause方法）</li>
</ul>
<h2 id="9-1发送和接收应用自身的广播"><a href="#9-1发送和接收应用自身的广播" class="headerlink" title="9.1发送和接收应用自身的广播"></a>9.1发送和接收应用自身的广播</h2><h3 id="9-1-1标准广播"><a href="#9-1-1标准广播" class="headerlink" title="9.1.1标准广播"></a>9.1.1标准广播</h3><h3 id="9-1-2有序广播"><a href="#9-1-2有序广播" class="headerlink" title="9.1.2有序广播"></a>9.1.2有序广播</h3><h3 id="9-1-3静态广播"><a href="#9-1-3静态广播" class="headerlink" title="9.1.3静态广播"></a>9.1.3静态广播</h3><h2 id="9-2监听和处理设备发出的系统广播"><a href="#9-2监听和处理设备发出的系统广播" class="headerlink" title="9.2监听和处理设备发出的系统广播"></a>9.2监听和处理设备发出的系统广播</h2><h2 id="9-3监听因屏幕变更导致App界面改变的状态事件"><a href="#9-3监听因屏幕变更导致App界面改变的状态事件" class="headerlink" title="9.3监听因屏幕变更导致App界面改变的状态事件"></a>9.3监听因屏幕变更导致App界面改变的状态事件</h2></div><div class="article-licensing box"><div class="licensing-title"><p>Android入门</p><p><a href="https://liust1918.github.io/Liust1918.githud.io/2022/12/04/Android入门/">https://liust1918.github.io/Liust1918.githud.io/2022/12/04/Android入门/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Liust</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2022-12-04</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2022-12-04</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/Liust1918.githud.io/tags/java/">java</a><a class="link-muted mr-2" rel="tag" href="/Liust1918.githud.io/tags/Android/">Android</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" href="/Liust1918.githud.io/" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>送我杯咖啡</span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/Liust1918.githud.io/2022/12/04/java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">java设计模式</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/Liust1918.githud.io/2022/12/03/Spring%E5%AE%9E%E6%88%98-%E7%AC%AC5%E7%89%88/"><span class="level-item">Spring实战(第5版)</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#1-Android开发环境搭建"><span class="level-left"><span class="level-item">1</span><span class="level-item">1.Android开发环境搭建</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Android发展历程"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">Android发展历程</span></span></a></li><li><a class="level is-mobile" href="#搭建Android-Studio开发环境"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">搭建Android Studio开发环境</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#下载SDK"><span class="level-left"><span class="level-item">1.2.1</span><span class="level-item">下载SDK</span></span></a></li><li><a class="level is-mobile" href="#创建App项目"><span class="level-left"><span class="level-item">1.2.2</span><span class="level-item">创建App项目</span></span></a></li><li><a class="level is-mobile" href="#导入App项目-x2F-模块"><span class="level-left"><span class="level-item">1.2.3</span><span class="level-item">导入App项目/模块</span></span></a></li><li><a class="level is-mobile" href="#编译App项目"><span class="level-left"><span class="level-item">1.2.4</span><span class="level-item">编译App项目</span></span></a></li><li><a class="level is-mobile" href="#运行App"><span class="level-left"><span class="level-item">1.2.5</span><span class="level-item">运行App</span></span></a></li><li><a class="level is-mobile" href="#修改java版本"><span class="level-left"><span class="level-item">1.2.6</span><span class="level-item">修改java版本</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#2-Android-App开发基础"><span class="level-left"><span class="level-item">2</span><span class="level-item">2.Android App开发基础</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#观察App的运行日志"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">观察App的运行日志</span></span></a></li><li><a class="level is-mobile" href="#连接数据库"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">连接数据库</span></span></a></li><li><a class="level is-mobile" href="#项目文件结构"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">项目文件结构</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#简单TextView控件"><span class="level-left"><span class="level-item">2.3.1</span><span class="level-item">简单TextView控件</span></span></a></li><li><a class="level is-mobile" href="#例子"><span class="level-left"><span class="level-item">2.3.2</span><span class="level-item">例子</span></span></a></li></ul></li><li><a class="level is-mobile" href="#java写代码逻辑"><span class="level-left"><span class="level-item">2.4</span><span class="level-item">java写代码逻辑</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#把java文件和xml绑定"><span class="level-left"><span class="level-item">2.4.1</span><span class="level-item">把java文件和xml绑定</span></span></a></li></ul></li><li><a class="level is-mobile" href="#APP的活动页面"><span class="level-left"><span class="level-item">2.5</span><span class="level-item">APP的活动页面</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#手动创建App页面"><span class="level-left"><span class="level-item">2.5.1</span><span class="level-item">手动创建App页面</span></span></a></li><li><a class="level is-mobile" href="#快速生成页面源码"><span class="level-left"><span class="level-item">2.5.2</span><span class="level-item">快速生成页面源码</span></span></a></li><li><a class="level is-mobile" href="#跳到另一个页面"><span class="level-left"><span class="level-item">2.5.3</span><span class="level-item">跳到另一个页面</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#3-简单控件"><span class="level-left"><span class="level-item">3</span><span class="level-item">3.简单控件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-1文本显示-TextView"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">3.1文本显示(TextView)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-1-1文本内容"><span class="level-left"><span class="level-item">3.1.1</span><span class="level-item">3.1.1文本内容</span></span></a></li><li><a class="level is-mobile" href="#3-1-2文本大小"><span class="level-left"><span class="level-item">3.1.2</span><span class="level-item">3.1.2文本大小</span></span></a></li><li><a class="level is-mobile" href="#3-1-3文本颜色"><span class="level-left"><span class="level-item">3.1.3</span><span class="level-item">3.1.3文本颜色</span></span></a></li><li><a class="level is-mobile" href="#3-1-4背景颜色-x2F-背景图片设置"><span class="level-left"><span class="level-item">3.1.4</span><span class="level-item">3.1.4背景颜色/背景图片设置</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-2视图基础"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">3.2视图基础</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-2-1设置视图的宽高"><span class="level-left"><span class="level-item">3.2.1</span><span class="level-item">3.2.1设置视图的宽高</span></span></a></li><li><a class="level is-mobile" href="#3-2-2设置视图的间距"><span class="level-left"><span class="level-item">3.2.2</span><span class="level-item">3.2.2设置视图的间距</span></span></a></li><li><a class="level is-mobile" href="#3-2-3设置视图的对齐方式"><span class="level-left"><span class="level-item">3.2.3</span><span class="level-item">3.2.3设置视图的对齐方式</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-3布局"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">3.3布局</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-3-1线性布局LinearLayout"><span class="level-left"><span class="level-item">3.3.1</span><span class="level-item">3.3.1线性布局LinearLayout</span></span></a></li><li><a class="level is-mobile" href="#3-3-2相对布局RelativeLayout"><span class="level-left"><span class="level-item">3.3.2</span><span class="level-item">3.3.2相对布局RelativeLayout</span></span></a></li><li><a class="level is-mobile" href="#3-3-3网格布局GridLayout"><span class="level-left"><span class="level-item">3.3.3</span><span class="level-item">3.3.3网格布局GridLayout</span></span></a></li><li><a class="level is-mobile" href="#3-3-4滚动视图ScrollView"><span class="level-left"><span class="level-item">3.3.4</span><span class="level-item">3.3.4滚动视图ScrollView</span></span></a></li><li><a class="level is-mobile" href="#3-4按钮控件"><span class="level-left"><span class="level-item">3.3.5</span><span class="level-item">3.4按钮控件</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-5图像显示控件"><span class="level-left"><span class="level-item">3.4</span><span class="level-item">3.5图像显示控件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-5-1图像视图ImageView"><span class="level-left"><span class="level-item">3.4.1</span><span class="level-item">3.5.1图像视图ImageView</span></span></a></li><li><a class="level is-mobile" href="#3-5-2图像按钮ImageButton"><span class="level-left"><span class="level-item">3.4.2</span><span class="level-item">3.5.2图像按钮ImageButton</span></span></a></li><li><a class="level is-mobile" href="#3-5-3Button同时展示文本与图像"><span class="level-left"><span class="level-item">3.4.3</span><span class="level-item">3.5.3Button同时展示文本与图像</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Other"><span class="level-left"><span class="level-item">3.5</span><span class="level-item">Other</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#提示框Toast-makeTex"><span class="level-left"><span class="level-item">3.5.1</span><span class="level-item">提示框Toast.makeTex</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#4-四大组件之一活动Activity"><span class="level-left"><span class="level-item">4</span><span class="level-item">4.四大组件之一活动Activity</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#4-1活动页面"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">4.1活动页面</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#4-1-1活动和页面的概念"><span class="level-left"><span class="level-item">4.1.1</span><span class="level-item">4.1.1活动和页面的概念</span></span></a></li><li><a class="level is-mobile" href="#4-1-2Activity的启动和停止"><span class="level-left"><span class="level-item">4.1.2</span><span class="level-item">4.1.2Activity的启动和停止</span></span></a></li><li><a class="level is-mobile" href="#4-1-3Activity的生命周期"><span class="level-left"><span class="level-item">4.1.3</span><span class="level-item">4.1.3Activity的生命周期</span></span></a></li><li><a class="level is-mobile" href="#4-1-4Activity的启动模式"><span class="level-left"><span class="level-item">4.1.4</span><span class="level-item">4.1.4Activity的启动模式</span></span></a></li></ul></li><li><a class="level is-mobile" href="#4-2Intent在活动之间传递消息"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">4.2Intent在活动之间传递消息</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#4-2-1Intent概念和组成"><span class="level-left"><span class="level-item">4.2.1</span><span class="level-item">4.2.1Intent概念和组成</span></span></a></li><li><a class="level is-mobile" href="#4-2-2显式Intent和隐式Intent"><span class="level-left"><span class="level-item">4.2.2</span><span class="level-item">4.2.2显式Intent和隐式Intent</span></span></a></li><li><a class="level is-mobile" href="#4-2-3把数据发送到下一个活动"><span class="level-left"><span class="level-item">4.2.3</span><span class="level-item">4.2.3把数据发送到下一个活动</span></span></a></li><li><a class="level is-mobile" href="#4-2-4数据发送到下个活动后返回数据到上一个活动"><span class="level-left"><span class="level-item">4.2.4</span><span class="level-item">4.2.4数据发送到下个活动后返回数据到上一个活动</span></span></a></li></ul></li><li><a class="level is-mobile" href="#4-3除Intent之外添加消息"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">4.3除Intent之外添加消息</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#4-3-1设置全局字符串"><span class="level-left"><span class="level-item">4.3.1</span><span class="level-item">4.3.1设置全局字符串</span></span></a></li><li><a class="level is-mobile" href="#4-3-2用元数据传递配置信息"><span class="level-left"><span class="level-item">4.3.2</span><span class="level-item">4.3.2用元数据传递配置信息</span></span></a></li><li><a class="level is-mobile" href="#4-3-3给应用页面注册快捷方式"><span class="level-left"><span class="level-item">4.3.3</span><span class="level-item">4.3.3给应用页面注册快捷方式</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#5-中级控件"><span class="level-left"><span class="level-item">5</span><span class="level-item">5.中级控件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#5-1定制简单图形"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">5.1定制简单图形</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#5-1-1图形基本概念"><span class="level-left"><span class="level-item">5.1.1</span><span class="level-item">5.1.1图形基本概念</span></span></a></li><li><a class="level is-mobile" href="#5-1-2形状图形-Shape图片"><span class="level-left"><span class="level-item">5.1.2</span><span class="level-item">5.1.2形状图形(Shape图片)</span></span></a></li><li><a class="level is-mobile" href="#5-1-3九宫格图片"><span class="level-left"><span class="level-item">5.1.3</span><span class="level-item">5.1.3九宫格图片</span></span></a></li><li><a class="level is-mobile" href="#5-1-4状态列表图形"><span class="level-left"><span class="level-item">5.1.4</span><span class="level-item">5.1.4状态列表图形</span></span></a></li></ul></li><li><a class="level is-mobile" href="#5-2选择按钮"><span class="level-left"><span class="level-item">5.2</span><span class="level-item">5.2选择按钮</span></span></a></li><li><a class="level is-mobile" href="#继承CompoundButton-OnCheckedChangeListener类-RadioGroup-OnCheckedChangeListener-CompoundButton-OnCheckedChangeListener"><span class="level-left"><span class="level-item">5.3</span><span class="level-item">继承CompoundButton.OnCheckedChangeListener类- RadioGroup.OnCheckedChangeListener- CompoundButton.OnCheckedChangeListener</span></span></a></li><li><a class="level is-mobile" href="#5-3文本输入"><span class="level-left"><span class="level-item">5.4</span><span class="level-item">5.3文本输入</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#编辑框EditText"><span class="level-left"><span class="level-item">5.4.1</span><span class="level-item">编辑框EditText</span></span></a></li><li><a class="level is-mobile" href="#焦点变更监听器OnFocusChangeListener"><span class="level-left"><span class="level-item">5.4.2</span><span class="level-item">焦点变更监听器OnFocusChangeListener</span></span></a></li><li><a class="level is-mobile" href="#文本变化监听器"><span class="level-left"><span class="level-item">5.4.3</span><span class="level-item">文本变化监听器</span></span></a></li><li><a class="level is-mobile" href="#日期对话框DatePickerDialog"><span class="level-left"><span class="level-item">5.4.4</span><span class="level-item">日期对话框DatePickerDialog</span></span></a></li><li><a class="level is-mobile" href="#时间对话框TimePuckerDialog"><span class="level-left"><span class="level-item">5.4.5</span><span class="level-item">时间对话框TimePuckerDialog</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#6-数据存储"><span class="level-left"><span class="level-item">6</span><span class="level-item">6.数据存储</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#6-1共享参数SharedPreferences"><span class="level-left"><span class="level-item">6.1</span><span class="level-item">6.1共享参数SharedPreferences</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#6-1-1基本概念"><span class="level-left"><span class="level-item">6.1.1</span><span class="level-item">6.1.1基本概念</span></span></a></li><li><a class="level is-mobile" href="#6-1-2写入和读取共享参数"><span class="level-left"><span class="level-item">6.1.2</span><span class="level-item">6.1.2写入和读取共享参数</span></span></a></li></ul></li><li><a class="level is-mobile" href="#6-2App的全局内存"><span class="level-left"><span class="level-item">6.2</span><span class="level-item">6.2App的全局内存</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#6-2-1Application的生命周期"><span class="level-left"><span class="level-item">6.2.1</span><span class="level-item">6.2.1Application的生命周期</span></span></a></li><li><a class="level is-mobile" href="#6-2-2全局变量写入"><span class="level-left"><span class="level-item">6.2.2</span><span class="level-item">6.2.2全局变量写入</span></span></a></li><li><a class="level is-mobile" href="#6-2-3全局变量读取"><span class="level-left"><span class="level-item">6.2.3</span><span class="level-item">6.2.3全局变量读取</span></span></a></li></ul></li><li><a class="level is-mobile" href="#6-3数据库SQLite"><span class="level-left"><span class="level-item">6.3</span><span class="level-item">6.3数据库SQLite</span></span></a></li><li><a class="level is-mobile" href="#6-3存储卡文件"><span class="level-left"><span class="level-item">6.4</span><span class="level-item">6.3存储卡文件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#6-3-1私有存储空间和公有存储空间"><span class="level-left"><span class="level-item">6.4.1</span><span class="level-item">6.3.1私有存储空间和公有存储空间</span></span></a></li><li><a class="level is-mobile" href="#6-3-2文本文件的读写"><span class="level-left"><span class="level-item">6.4.2</span><span class="level-item">6.3.2文本文件的读写</span></span></a></li><li><a class="level is-mobile" href="#6-3-3图片文件的读写以及使用"><span class="level-left"><span class="level-item">6.4.3</span><span class="level-item">6.3.3图片文件的读写以及使用</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Other-1"><span class="level-left"><span class="level-item">6.5</span><span class="level-item">Other</span></span></a></li></ul></li><li><a class="level is-mobile" href="#7-内容共享ContentProvider"><span class="level-left"><span class="level-item">7</span><span class="level-item">7.内容共享ContentProvider</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#7-1内容组件在应用之间共享数据"><span class="level-left"><span class="level-item">7.1</span><span class="level-item">7.1内容组件在应用之间共享数据</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#7-1-1内容提供器ContentProvider封装内部数据的外部访问接口"><span class="level-left"><span class="level-item">7.1.1</span><span class="level-item">7.1.1内容提供器ContentProvider封装内部数据的外部访问接口</span></span></a></li><li><a class="level is-mobile" href="#7-1-2内容解析器ContentResolver通过外部操作内部数据"><span class="level-left"><span class="level-item">7.1.2</span><span class="level-item">7.1.2内容解析器ContentResolver通过外部操作内部数据</span></span></a></li></ul></li><li><a class="level is-mobile" href="#7-2内容组件获取通讯信息"><span class="level-left"><span class="level-item">7.2</span><span class="level-item">7.2内容组件获取通讯信息</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#7-2-1动态申请权限"><span class="level-left"><span class="level-item">7.2.1</span><span class="level-item">7.2.1动态申请权限</span></span></a></li><li><a class="level is-mobile" href="#7-2-2ContentResolver读写联系人"><span class="level-left"><span class="level-item">7.2.2</span><span class="level-item">7.2.2ContentResolver读写联系人</span></span></a></li><li><a class="level is-mobile" href="#7-2-3ContentObserver监听短信"><span class="level-left"><span class="level-item">7.2.3</span><span class="level-item">7.2.3ContentObserver监听短信</span></span></a></li></ul></li><li><a class="level is-mobile" href="#7-3引用之间共享文件"><span class="level-left"><span class="level-item">7.3</span><span class="level-item">7.3引用之间共享文件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#7-3-1使用相册图片发送彩信"><span class="level-left"><span class="level-item">7.3.1</span><span class="level-item">7.3.1使用相册图片发送彩信</span></span></a></li><li><a class="level is-mobile" href="#7-3-2借助FileProvider发送彩信（Mms）"><span class="level-left"><span class="level-item">7.3.2</span><span class="level-item">7.3.2借助FileProvider发送彩信（Mms）</span></span></a></li><li><a class="level is-mobile" href="#7-3-3借助FileProvider安装应用"><span class="level-left"><span class="level-item">7.3.3</span><span class="level-item">7.3.3借助FileProvider安装应用</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#8-高级控件"><span class="level-left"><span class="level-item">8</span><span class="level-item">8.高级控件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#8-1下拉列表以及适配器"><span class="level-left"><span class="level-item">8.1</span><span class="level-item">8.1下拉列表以及适配器</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#8-1-1下拉框Spinner"><span class="level-left"><span class="level-item">8.1.1</span><span class="level-item">8.1.1下拉框Spinner</span></span></a></li><li><a class="level is-mobile" href="#8-1-2数组适配器ArrayAdapter"><span class="level-left"><span class="level-item">8.1.2</span><span class="level-item">8.1.2数组适配器ArrayAdapter</span></span></a></li><li><a class="level is-mobile" href="#8-1-3简单适配器SimpleAdapter"><span class="level-left"><span class="level-item">8.1.3</span><span class="level-item">8.1.3简单适配器SimpleAdapter</span></span></a></li><li><a class="level is-mobile" href="#8-1-4基本适配器"><span class="level-left"><span class="level-item">8.1.4</span><span class="level-item">8.1.4基本适配器</span></span></a></li></ul></li><li><a class="level is-mobile" href="#8-2列表视图"><span class="level-left"><span class="level-item">8.2</span><span class="level-item">8.2列表视图</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#8-2-1列表视图ListView"><span class="level-left"><span class="level-item">8.2.1</span><span class="level-item">8.2.1列表视图ListView</span></span></a></li><li><a class="level is-mobile" href="#8-2-2网格视图GridView"><span class="level-left"><span class="level-item">8.2.2</span><span class="level-item">8.2.2网格视图GridView</span></span></a></li></ul></li><li><a class="level is-mobile" href="#8-3翻页类视图"><span class="level-left"><span class="level-item">8.3</span><span class="level-item">8.3翻页类视图</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#8-3-1翻页视图ViewPager"><span class="level-left"><span class="level-item">8.3.1</span><span class="level-item">8.3.1翻页视图ViewPager</span></span></a></li><li><a class="level is-mobile" href="#8-3-2翻页标签栏PagarTabStrip"><span class="level-left"><span class="level-item">8.3.2</span><span class="level-item">8.3.2翻页标签栏PagarTabStrip</span></span></a></li><li><a class="level is-mobile" href="#8-3-3简单的启动引导页"><span class="level-left"><span class="level-item">8.3.3</span><span class="level-item">8.3.3简单的启动引导页</span></span></a></li></ul></li><li><a class="level is-mobile" href="#8-4碎片Fragment"><span class="level-left"><span class="level-item">8.4</span><span class="level-item">8.4碎片Fragment</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#碎片功能"><span class="level-left"><span class="level-item">8.4.1</span><span class="level-item">碎片功能</span></span></a></li><li><a class="level is-mobile" href="#8-4-1碎片的静态注册"><span class="level-left"><span class="level-item">8.4.2</span><span class="level-item">8.4.1碎片的静态注册</span></span></a></li><li><a class="level is-mobile" href="#8-4-2碎片的动态注册"><span class="level-left"><span class="level-item">8.4.3</span><span class="level-item">8.4.2碎片的动态注册</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#9-广播组件Broadcast"><span class="level-left"><span class="level-item">9</span><span class="level-item">9.广播组件Broadcast</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#9-1发送和接收应用自身的广播"><span class="level-left"><span class="level-item">9.1</span><span class="level-item">9.1发送和接收应用自身的广播</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#9-1-1标准广播"><span class="level-left"><span class="level-item">9.1.1</span><span class="level-item">9.1.1标准广播</span></span></a></li><li><a class="level is-mobile" href="#9-1-2有序广播"><span class="level-left"><span class="level-item">9.1.2</span><span class="level-item">9.1.2有序广播</span></span></a></li><li><a class="level is-mobile" href="#9-1-3静态广播"><span class="level-left"><span class="level-item">9.1.3</span><span class="level-item">9.1.3静态广播</span></span></a></li></ul></li><li><a class="level is-mobile" href="#9-2监听和处理设备发出的系统广播"><span class="level-left"><span class="level-item">9.2</span><span class="level-item">9.2监听和处理设备发出的系统广播</span></span></a></li><li><a class="level is-mobile" href="#9-3监听因屏幕变更导致App界面改变的状态事件"><span class="level-left"><span class="level-item">9.3</span><span class="level-item">9.3监听因屏幕变更导致App界面改变的状态事件</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/Liust1918.githud.io/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/Liust1918.githud.io/categories/Android/"><span class="level-start"><span class="level-item">Android</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/Liust1918.githud.io/categories/C%E8%AF%AD%E8%A8%80/"><span class="level-start"><span class="level-item">C语言</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/Liust1918.githud.io/categories/Hexo/"><span class="level-start"><span class="level-item">Hexo</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/Liust1918.githud.io/categories/LeetCode/"><span class="level-start"><span class="level-item">LeetCode</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/Liust1918.githud.io/categories/git/"><span class="level-start"><span class="level-item">git</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/Liust1918.githud.io/categories/java/"><span class="level-start"><span class="level-item">java</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/Liust1918.githud.io/categories/java/java8/"><span class="level-start"><span class="level-item">java8</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/Liust1918.githud.io/categories/java/%E5%8F%8D%E5%B0%84/"><span class="level-start"><span class="level-item">反射</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/Liust1918.githud.io/categories/java/%E6%B3%A8%E8%A7%A3/"><span class="level-start"><span class="level-item">注解</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/Liust1918.githud.io/categories/%E5%90%8E%E7%AB%AF/"><span class="level-start"><span class="level-item">后端</span></span><span class="level-end"><span class="level-item tag">5</span></span></a><ul><li><a class="level is-mobile" href="/Liust1918.githud.io/categories/%E5%90%8E%E7%AB%AF/SSM/"><span class="level-start"><span class="level-item">SSM</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/Liust1918.githud.io/categories/%E5%90%8E%E7%AB%AF/spring/"><span class="level-start"><span class="level-item">spring</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/Liust1918.githud.io/categories/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="level-start"><span class="level-item">数据库</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/Liust1918.githud.io/categories/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql/"><span class="level-start"><span class="level-item">Mysql</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/Liust1918.githud.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><span class="level-start"><span class="level-item">设计模式</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/Liust1918.githud.io/tags/Android/"><span class="tag">Android</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Liust1918.githud.io/tags/C/"><span class="tag">C</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Liust1918.githud.io/tags/C/"><span class="tag">C++</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Liust1918.githud.io/tags/Hexo/"><span class="tag">Hexo</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Liust1918.githud.io/tags/Hibernate/"><span class="tag">Hibernate</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Liust1918.githud.io/tags/LeetCode/"><span class="tag">LeetCode</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/Liust1918.githud.io/tags/SSM/"><span class="tag">SSM</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/Liust1918.githud.io/tags/git/"><span class="tag">git</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Liust1918.githud.io/tags/githud/"><span class="tag">githud</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Liust1918.githud.io/tags/java/"><span class="tag">java</span><span class="tag">20</span></a></div><div class="control"><a class="tags has-addons" href="/Liust1918.githud.io/tags/java8/"><span class="tag">java8</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/Liust1918.githud.io/tags/mysql/"><span class="tag">mysql</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Liust1918.githud.io/tags/spring/"><span class="tag">spring</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/Liust1918.githud.io/tags/springboot2/"><span class="tag">springboot2</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Liust1918.githud.io/tags/%E5%8F%8D%E5%B0%84/"><span class="tag">反射</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Liust1918.githud.io/tags/%E5%90%8E%E7%AB%AF/"><span class="tag">后端</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/Liust1918.githud.io/tags/%E6%8A%80%E6%9C%AF%E4%B9%A6/"><span class="tag">技术书</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/Liust1918.githud.io/tags/%E6%B3%A8%E8%A7%A3/"><span class="tag">注解</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/Liust1918.githud.io/tags/%E7%AE%97%E6%B3%95/"><span class="tag">算法</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/Liust1918.githud.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><span class="tag">设计模式</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">广告</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="liust" data-ad-slot="1918" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/Liust1918.githud.io/img/Battlerfiled3.jpg" alt="Liust1918"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Liust1918</p><p class="is-size-6 is-block">Web Developer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Ice Earth</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/Liust1918.githud.io/archives"><p class="title">23</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/Liust1918.githud.io/categories"><p class="title">15</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/Liust1918.githud.io/tags"><p class="title">20</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Liust1918" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Liust1918"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/Liust1918.githud.io/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://github.com/Liust1918" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Githud</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-03-06T02:44:23.000Z">2023-03-06</time></p><p class="title"><a href="/Liust1918.githud.io/2023/03/06/%E9%87%8D%E5%AD%A6Java8/">重学Java8</a></p><p class="categories"><a href="/Liust1918.githud.io/categories/java/">java</a> / <a href="/Liust1918.githud.io/categories/java/java8/">java8</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-02-22T15:46:48.000Z">2023-02-22</time></p><p class="title"><a href="/Liust1918.githud.io/2023/02/22/java%E6%B3%A8%E8%A7%A3/">java注解</a></p><p class="categories"><a href="/Liust1918.githud.io/categories/java/">java</a> / <a href="/Liust1918.githud.io/categories/java/%E6%B3%A8%E8%A7%A3/">注解</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-02-22T06:04:30.000Z">2023-02-22</time></p><p class="title"><a href="/Liust1918.githud.io/2023/02/22/java%E5%8F%8D%E5%B0%84/">java反射</a></p><p class="categories"><a href="/Liust1918.githud.io/categories/java/">java</a> / <a href="/Liust1918.githud.io/categories/java/%E5%8F%8D%E5%B0%84/">反射</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-12-03T17:11:33.000Z">2022-12-04</time></p><p class="title"><a href="/Liust1918.githud.io/2022/12/04/Mysql%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/">Mysql必知必会书</a></p><p class="categories"><a href="/Liust1918.githud.io/categories/%E5%90%8E%E7%AB%AF/">后端</a> / <a href="/Liust1918.githud.io/categories/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a> / <a href="/Liust1918.githud.io/categories/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql/">Mysql</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-12-03T16:56:56.000Z">2022-12-04</time></p><p class="title"><a href="/Liust1918.githud.io/2022/12/04/SSM/">SSM</a></p><p class="categories"><a href="/Liust1918.githud.io/categories/%E5%90%8E%E7%AB%AF/">后端</a> / <a href="/Liust1918.githud.io/categories/%E5%90%8E%E7%AB%AF/SSM/">SSM</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/Liust1918.githud.io/archives/2023/03/"><span class="level-start"><span class="level-item">三月 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/Liust1918.githud.io/archives/2023/02/"><span class="level-start"><span class="level-item">二月 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/Liust1918.githud.io/archives/2022/12/"><span class="level-start"><span class="level-item">十二月 2022</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/Liust1918.githud.io/"><img src="/Liust1918.githud.io/img/Battlerfiled3.jpg" alt="Liust of Blog" height="28"></a><p class="is-size-7"><span>&copy; 2023 Liust</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="My GitHub" href="https://github.com/Liust1918"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/Liust1918.githud.io/js/column.js"></script><script src="/Liust1918.githud.io/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/Liust1918.githud.io/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/Liust1918.githud.io/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/Liust1918.githud.io/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/Liust1918.githud.io/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>